<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Vim: /home/travis/build/yegappan/vimdoc/src/textprop.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vim
   </div>
   <div id="projectbrief">Vim Editor Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">textprop.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="textprop_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* vi:set ts=8 sts=4 sw=4 noet:</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * VIM - Vi IMproved    by Bram Moolenaar</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Do &quot;:help uganda&quot;  in Vim to read copying and usage conditions.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Do &quot;:help credits&quot; in Vim to see a list of people who contributed.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * See README.txt for an overview of the Vim source code.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * Text properties implementation.  See &quot;:help text-properties&quot;.</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * TODO:</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * - Adjust text property column and length when text is inserted/deleted.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *   -&gt; :substitute with multiple matches, issue #4427</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *   -&gt; a :substitute with a multi-line match</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> *   -&gt; search for changed_bytes() from misc1.c</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *   -&gt; search for mark_col_adjust()</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * - Perhaps we only need TP_FLAG_CONT_NEXT and can drop TP_FLAG_CONT_PREV?</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * - Add an arrray for global_proptypes, to quickly lookup a prop type by ID</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * - Add an arrray for b_proptypes, to quickly lookup a prop type by ID</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> * - Checking the text length to detect text properties is slow.  Use a flag in</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *   the index, like DB_MARKED?</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * - Also test line2byte() with many lines, so that ml_updatechunk() is taken</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *   into account.</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * - Perhaps have a window-local option to disable highlighting from text</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> *   properties?</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vim_8h.html">vim.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#if defined(FEAT_TEXT_PROP) || defined(PROTO)</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"> * In a hashtable item &quot;hi_key&quot; points to &quot;pt_name&quot; in a proptype_T.</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"> * This avoids adding a pointer to the hashtable item.</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * PT2HIKEY() converts a proptype pointer to a hashitem key pointer.</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * HIKEY2PT() converts a hashitem key pointer to a proptype pointer.</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> * HI2PT() converts a hashitem pointer to a proptype pointer.</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="textprop_8c.html#a37f7dfe34c6fe34c9fca205f40d75988">   41</a></span>&#160;<span class="preprocessor">#define PT2HIKEY(p)  ((p)-&gt;pt_name)</span></div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="textprop_8c.html#ac981ace2effe03f0b2a624b662fdde35">   42</a></span>&#160;<span class="preprocessor">#define HIKEY2PT(p)   ((proptype_T *)((p) - offsetof(proptype_T, pt_name)))</span></div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">   43</a></span>&#160;<span class="preprocessor">#define HI2PT(hi)      HIKEY2PT((hi)-&gt;hi_key)</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// The global text property types.</span></div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="textprop_8c.html#a737d88ebe6434aec9e2b13ff36d1e278">   46</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structhashtable___s.html">hashtab_T</a> *<a class="code" href="textprop_8c.html#a737d88ebe6434aec9e2b13ff36d1e278">global_proptypes</a> = NULL;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// The last used text property type ID.</span></div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="textprop_8c.html#a8e70a1530c984c595594969c556fb3dd">   49</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="textprop_8c.html#a8e70a1530c984c595594969c556fb3dd">proptype_id</a> = 0;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="textprop_8c.html#a377972865a8a4dcde81d324b86afdc4a">   51</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="textprop_8c.html#a377972865a8a4dcde81d324b86afdc4a">e_type_not_exist</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E971: Property type %s does not exist&quot;</span>);</div><div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="textprop_8c.html#ab8877ad05b5982fd5835a02c6993f454">   52</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="textprop_8c.html#ab8877ad05b5982fd5835a02c6993f454">e_invalid_col</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E964: Invalid column number: %ld&quot;</span>);</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="textprop_8c.html#a90ece39084bf2621e2131fb7950f5956">   53</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="textprop_8c.html#a90ece39084bf2621e2131fb7950f5956">e_invalid_lnum</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E966: Invalid line number: %ld&quot;</span>);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"> * Find a property type by name, return the hashitem.</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * Returns NULL if the item can&#39;t be found.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">static</span> <a class="code" href="structhashitem___s.html">hashitem_T</a> *</div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="textprop_8c.html#a8e6f952ff662c7ba3b6df100f415da2c">   60</a></span>&#160;<a class="code" href="textprop_8c.html#a8e6f952ff662c7ba3b6df100f415da2c">find_prop_hi</a>(char_u *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="structfile__buffer.html">buf_T</a> *buf)</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="structhashtable___s.html">hashtab_T</a>   *ht;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="structhashitem___s.html">hashitem_T</a>  *hi;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (*name == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span> (buf == NULL)</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    ht = <a class="code" href="textprop_8c.html#a737d88ebe6434aec9e2b13ff36d1e278">global_proptypes</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    ht = buf-&gt;b_proptypes;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordflow">if</span> (ht == NULL)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    hi = <a class="code" href="hashtab_8c.html#ad88600b48e72a2a435f472e63680577b">hash_find</a>(ht, name);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structs_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a>(hi))</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> hi;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"> * Like find_prop_hi() but return the property type.</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keyword">static</span> <a class="code" href="structproptype___s.html">proptype_T</a> *</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">   84</a></span>&#160;<a class="code" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a>(char_u *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="structfile__buffer.html">buf_T</a> *buf)</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="structhashitem___s.html">hashitem_T</a>  *hi = <a class="code" href="textprop_8c.html#a8e6f952ff662c7ba3b6df100f415da2c">find_prop_hi</a>(name, buf);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (hi == NULL)</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">HI2PT</a>(hi);</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment"> * Get the prop type ID of &quot;name&quot;.</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"> * When not found return zero.</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="textprop_8c.html#ae0763fc7835fad332308599fabfe8751">   98</a></span>&#160;<a class="code" href="textprop_8c.html#ae0763fc7835fad332308599fabfe8751">find_prop_type_id</a>(char_u *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="structfile__buffer.html">buf_T</a> *buf)</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a> *pt = <a class="code" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a>(name, buf);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span> (pt == NULL)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> pt-&gt;<a class="code" href="structproptype___s.html#a6b536a9a614ea72c18ee1dafa179b87f">pt_id</a>;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"> * Lookup a property type by name.  First in &quot;buf&quot; and when not found in the</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"> * global types.</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"> * When not found gives an error message and returns NULL.</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keyword">static</span> <a class="code" href="structproptype___s.html">proptype_T</a> *</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="textprop_8c.html#ab1bf6540b189e7b3c6fb9e68e0f1c147">  113</a></span>&#160;<a class="code" href="textprop_8c.html#ab1bf6540b189e7b3c6fb9e68e0f1c147">lookup_prop_type</a>(char_u *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a>, <a class="code" href="structfile__buffer.html">buf_T</a> *buf)</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a> *type = <a class="code" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a>(name, buf);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (type == NULL)</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    type = <a class="code" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a>(name, NULL);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span> (type == NULL)</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="textprop_8c.html#a377972865a8a4dcde81d324b86afdc4a">e_type_not_exist</a>), name);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keywordflow">return</span> type;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> * Get an optional &quot;bufnr&quot; item from the dict in &quot;arg&quot;.</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> * When the argument is not used or &quot;bufnr&quot; is not present then &quot;buf&quot; is</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> * unchanged.</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * If &quot;bufnr&quot; is valid or not present return OK.</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> * When &quot;arg&quot; is not a dict or &quot;bufnr&quot; is invalide return FAIL.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">  132</a></span>&#160;<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(<a class="code" href="structtypval___t.html">typval_T</a> *arg, <a class="code" href="structfile__buffer.html">buf_T</a> **buf)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="structdictitem___s.html">dictitem_T</a>  *di;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">v_type</a> != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76aa3a72813b2075b71a9a9789fa4252853">VAR_DICT</a>)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_dictreq));</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (arg-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">v_dict</a> == NULL)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;  <span class="comment">// NULL dict is like an empty dict</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(arg-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">v_dict</a>, (char_u *)<span class="stringliteral">&quot;bufnr&quot;</span>, -1);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    *buf = <a class="code" href="evalfunc_8c.html#a5e99ade03f69dac39da096cc37c95d6b">get_buf_arg</a>(&amp;di-&gt;<a class="code" href="structdictitem___s.html#a7c2467304c3b37c1e211b025b1fbd1f9">di_tv</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keywordflow">if</span> (*buf == NULL)</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> * prop_add({lnum}, {col}, {props})</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="textprop_8c.html#a5f84da14752465a749d06c05e49bc6f9">  157</a></span>&#160;<a class="code" href="textprop_8c.html#a5f84da14752465a749d06c05e49bc6f9">f_prop_add</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    start_lnum;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> start_col;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    start_lnum = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[0]);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    start_col = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[1]);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordflow">if</span> (start_col &lt; 1)</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="textprop_8c.html#ab8877ad05b5982fd5835a02c6993f454">e_invalid_col</a>), (<span class="keywordtype">long</span>)start_col);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (argvars[2].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76aa3a72813b2075b71a9a9789fa4252853">VAR_DICT</a>)</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_dictreq));</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="textprop_8c.html#a781cfa3fd66709b6a7c59bff9c155a3e">prop_add_common</a>(start_lnum, start_col, argvars[2].vval.<a class="code" href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">v_dict</a>,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                              curbuf, &amp;argvars[2]);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment"> * Shared between prop_add() and popup_create().</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment"> * &quot;dict_arg&quot; is the function argument of a dict containing &quot;bufnr&quot;.</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment"> * it is NULL for popup_create().</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="textprop_8c.html#a781cfa3fd66709b6a7c59bff9c155a3e">  185</a></span>&#160;<a class="code" href="textprop_8c.html#a781cfa3fd66709b6a7c59bff9c155a3e">prop_add_common</a>(</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    start_lnum,</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>     start_col,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="structdictvar___s.html">dict_T</a>      *dict,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>       *default_buf,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <a class="code" href="structtypval___t.html">typval_T</a>    *dict_arg)</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;{</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    end_lnum;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> end_col;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    char_u  *type_name;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *type;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>   *buf = default_buf;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">int</span>     <span class="keywordtype">id</span> = 0;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    char_u  *newtext;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordtype">int</span>     proplen;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">size_t</span>  textlen;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    char_u  *props = NULL;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    char_u  *newprops;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a>  tmp_prop;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (dict == NULL || <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;type&quot;</span>, -1) == NULL)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E965: missing property type name&quot;</span>));</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    type_name = <a class="code" href="dict_8c.html#a992a6dd9552d0d2263c1178a7d5c7de9">dict_get_string</a>(dict, (char_u *)<span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;end_lnum&quot;</span>, -1) != NULL)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    end_lnum = <a class="code" href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a>(dict, (char_u *)<span class="stringliteral">&quot;end_lnum&quot;</span>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (end_lnum &lt; start_lnum)</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invargval), <span class="stringliteral">&quot;end_lnum&quot;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    end_lnum = start_lnum;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;length&quot;</span>, -1) != NULL)</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">long</span> length = <a class="code" href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a>(dict, (char_u *)<span class="stringliteral">&quot;length&quot;</span>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keywordflow">if</span> (length &lt; 0 || end_lnum &gt; start_lnum)</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    {</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invargval), <span class="stringliteral">&quot;length&quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    end_col = start_col + length;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;end_col&quot;</span>, -1) != NULL)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    end_col = <a class="code" href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a>(dict, (char_u *)<span class="stringliteral">&quot;end_col&quot;</span>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (end_col &lt;= 0)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invargval), <span class="stringliteral">&quot;end_col&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (start_lnum == end_lnum)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    end_col = start_col;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    end_col = 1;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;id&quot;</span>, -1) != NULL)</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">id</span> = <a class="code" href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a>(dict, (char_u *)<span class="stringliteral">&quot;id&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">if</span> (dict_arg != NULL &amp;&amp; <a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(dict_arg, &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    type = <a class="code" href="textprop_8c.html#ab1bf6540b189e7b3c6fb9e68e0f1c147">lookup_prop_type</a>(type_name, buf);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span> (type == NULL)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (start_lnum &lt; 1 || start_lnum &gt; buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">ml_line_count</a>)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="textprop_8c.html#a90ece39084bf2621e2131fb7950f5956">e_invalid_lnum</a>), (<span class="keywordtype">long</span>)start_lnum);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">if</span> (end_lnum &lt; start_lnum || end_lnum &gt; buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">ml_line_count</a>)</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="textprop_8c.html#a90ece39084bf2621e2131fb7950f5956">e_invalid_lnum</a>), (<span class="keywordtype">long</span>)end_lnum);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a9adb5a08b3c01be69c98360a14937227">ml_mfp</a> == NULL)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E275: Cannot add text property to unloaded buffer&quot;</span>));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">for</span> (lnum = start_lnum; lnum &lt;= end_lnum; ++lnum)</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col;    <span class="comment">// start column</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">long</span>    length; <span class="comment">// in bytes</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="comment">// Fetch the line to get the ml_line_len field updated.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    proplen = <a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(buf, lnum, &amp;props, <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    textlen = buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> - proplen * <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordflow">if</span> (lnum == start_lnum)</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        col = start_col;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        col = 1;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">if</span> (col - 1 &gt; (<a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>)textlen)</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="textprop_8c.html#ab8877ad05b5982fd5835a02c6993f454">e_invalid_col</a>), (<span class="keywordtype">long</span>)start_col);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span> (lnum == end_lnum)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        length = end_col - col;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        length = (int)textlen - col + 1;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">if</span> (length &gt; (<span class="keywordtype">long</span>)textlen)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        length = (<span class="keywordtype">int</span>)textlen;  <span class="comment">// can include the end-of-line</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">if</span> (length &lt; 0)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        length = 0;     <span class="comment">// zero-width property</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// Allocate the new line with space for the new proprety.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    newtext = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> + <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (newtext == NULL)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Copy the text, including terminating NUL.</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newtext, buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a>, textlen);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// Find the index where to insert the new property.</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">// Since the text properties are not aligned properly when stored with</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// the text, we need to copy them as bytes before using it as a struct.</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; proplen; ++i)</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(&amp;tmp_prop, props + i * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">if</span> (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &gt;= col)</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    newprops = newtext + textlen;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (i &gt; 0)</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newprops, props, <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>) * i);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> = col;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> = length;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    tmp_prop.<a class="code" href="structtextprop___s.html#add824afd44cdd8e8a34e008fa91fb708">tp_id</a> = id;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    tmp_prop.<a class="code" href="structtextprop___s.html#a01dfe881b1438f9c53dcdd63e76f3fbd">tp_type</a> = type-&gt;<a class="code" href="structproptype___s.html#a6b536a9a614ea72c18ee1dafa179b87f">pt_id</a>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    tmp_prop.<a class="code" href="structtextprop___s.html#a37661218d497b414d619683e1063e09b">tp_flags</a> = (lnum &gt; start_lnum ? <a class="code" href="structs_8h.html#ad2df9991ef69c281e2c46a0b9473dc06">TP_FLAG_CONT_PREV</a> : 0)</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;              | (lnum &lt; end_lnum ? <a class="code" href="structs_8h.html#a1728259701820b8a8745485b2537217d">TP_FLAG_CONT_NEXT</a> : 0);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newprops + i * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>), &amp;tmp_prop,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (i &lt; proplen)</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newprops + (i + 1) * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                        props + i * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                        <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>) * (proplen - i));</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">ml_flags</a> &amp; <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>)</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a> = newtext;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> += <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">ml_flags</a> |= <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    buf-&gt;b_has_textprop = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;  <span class="comment">// this is never reset</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <a class="code" href="drawscreen_8c.html#ad8e43d13fd6b1e3af27b349d1097eb97">redraw_buf_later</a>(buf, <a class="code" href="vim_8h.html#a72695d31382ba5334881ad3407393642">NOT_VALID</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment"> * Fetch the text properties for line &quot;lnum&quot; in buffer &quot;buf&quot;.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment"> * Returns the number of text properties and, when non-zero, a pointer to the</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment"> * first one in &quot;props&quot; (note that it is not aligned, therefore the char_u</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment"> * pointer).</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">  359</a></span>&#160;<a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(<a class="code" href="structfile__buffer.html">buf_T</a> *buf, <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum, char_u **props, <span class="keywordtype">int</span> will_change)</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    char_u *text;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordtype">size_t</span> textlen;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">size_t</span> proplen;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="comment">// Be quick when no text property types have been defined or the buffer,</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="comment">// unless we are adding one.</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordflow">if</span> ((!buf-&gt;b_has_textprop &amp;&amp; !will_change) || buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a9adb5a08b3c01be69c98360a14937227">ml_mfp</a> == NULL)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="comment">// Fetch the line to get the ml_line_len field updated.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    text = <a class="code" href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a>(buf, lnum, will_change);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    textlen = <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(text) + 1;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    proplen = buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> - textlen;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (proplen % <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>) != 0)</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <a class="code" href="message_8c.html#a7926d7fa9a35dc0f5bac051dec01240a">iemsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E967: text property info corrupted&quot;</span>));</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    <span class="keywordflow">if</span> (proplen &gt; 0)</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    *props = text + textlen;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)(proplen / <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment"> * Find text property &quot;type_id&quot; in the visible lines of window &quot;wp&quot;.</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment"> * Match &quot;id&quot; when it is &gt; 0.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment"> * Returns FAIL when not found.</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="textprop_8c.html#a0e128268b44aabf9f599f20a60a3102f">  390</a></span>&#160;<a class="code" href="textprop_8c.html#a0e128268b44aabf9f599f20a60a3102f">find_visible_prop</a>(<a class="code" href="structwindow___s.html">win_T</a> *wp, <span class="keywordtype">int</span> type_id, <span class="keywordtype">int</span> <span class="keywordtype">id</span>, <a class="code" href="structtextprop___s.html">textprop_T</a> *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>,</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                              <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> *found_lnum)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>        lnum;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    char_u      *props;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">int</span>         count;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keywordtype">int</span>         i;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// w_botline may not have been updated yet.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <a class="code" href="move_8c.html#a819f3c9ad1be31c96957b197adbdbf13">validate_botline</a>();</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">for</span> (lnum = wp-&gt;<a class="code" href="structwindow___s.html#a85accd9e93bd488446a80b804b81dde2">w_topline</a>; lnum &lt; wp-&gt;w_botline; ++lnum)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    count = <a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(wp-&gt;<a class="code" href="structwindow___s.html#a4869138fb763f40f6194f7fdff2d9b6a">w_buffer</a>, lnum, &amp;props, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; count; ++i)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(prop, props + i * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structtextprop___s.html#a01dfe881b1438f9c53dcdd63e76f3fbd">tp_type</a> == type_id &amp;&amp; (id &lt;= 0 || prop-&gt;tp_id == <span class="keywordtype">id</span>))</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        *found_lnum = lnum;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        }</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    }</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;}</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"> * Set the text properties for line &quot;lnum&quot; to &quot;props&quot; with length &quot;len&quot;.</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment"> * If &quot;len&quot; is zero text properties are removed, &quot;props&quot; is not used.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment"> * Any existing text properties are dropped.</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment"> * Only works for the current buffer.</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00424"></a><span class="lineno"><a class="line" href="textprop_8c.html#ab6ef254db03477ced9de2458dbe96db6">  424</a></span>&#160;<a class="code" href="textprop_8c.html#ab6ef254db03477ced9de2458dbe96db6">set_text_props</a>(<a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum, char_u *props, <span class="keywordtype">int</span> len)</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;{</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    char_u  *text;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    char_u  *newtext;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="keywordtype">int</span>     textlen;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    text = <a class="code" href="memline_8c.html#a109387062ce17fc808cae3971ce703ba">ml_get</a>(lnum);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    textlen = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(text) + 1;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    newtext = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(textlen + len);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (newtext == NULL)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newtext, text, textlen);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordflow">if</span> (len &gt; 0)</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newtext + textlen, props, len);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (curbuf-&gt;b_ml.ml_flags &amp; <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>)</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(curbuf-&gt;b_ml.ml_line_ptr);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    curbuf-&gt;b_ml.ml_line_ptr = newtext;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    curbuf-&gt;b_ml.ml_line_len = textlen + len;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    curbuf-&gt;b_ml.ml_flags |= <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;}</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keyword">static</span> <a class="code" href="structproptype___s.html">proptype_T</a> *</div><div class="line"><a name="l00446"></a><span class="lineno"><a class="line" href="textprop_8c.html#ad8a9a97db56a4734bd2ebfc30acc017e">  446</a></span>&#160;<a class="code" href="textprop_8c.html#ad8a9a97db56a4734bd2ebfc30acc017e">find_type_by_id</a>(<a class="code" href="structhashtable___s.html">hashtab_T</a> *ht, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;{</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordtype">long</span>    todo;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <a class="code" href="structhashitem___s.html">hashitem_T</a>  *hi;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (ht == NULL)</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="comment">// TODO: Make this faster by keeping a list of types sorted on ID and use</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">// a binary search.</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    todo = (long)ht-&gt;<a class="code" href="structhashtable___s.html#a5102b561274edb12b4ac5c9b0df7dab1">ht_used</a>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    for (hi = ht-&gt;<a class="code" href="structhashtable___s.html#a7cfd4386f392f78cfca0fec4e1188156">ht_array</a>; todo &gt; 0; ++hi)</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structs_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a>(hi))</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        <a class="code" href="structproptype___s.html">proptype_T</a> *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a> = <a class="code" href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">HI2PT</a>(hi);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structproptype___s.html#a6b536a9a614ea72c18ee1dafa179b87f">pt_id</a> == <span class="keywordtype">id</span>)</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        --todo;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment"> * Find a property type by ID in &quot;buf&quot; or globally.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment"> * Returns NULL if not found.</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a> *</div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="textprop_8c.html#ac4b0eb3f47e5ba44b644d74fdf454b20">  477</a></span>&#160;<a class="code" href="textprop_8c.html#ac4b0eb3f47e5ba44b644d74fdf454b20">text_prop_type_by_id</a>(<a class="code" href="structfile__buffer.html">buf_T</a> *buf, <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a> *type;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    type = <a class="code" href="textprop_8c.html#ad8a9a97db56a4734bd2ebfc30acc017e">find_type_by_id</a>(buf-&gt;b_proptypes, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordflow">if</span> (type == NULL)</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    type = <a class="code" href="textprop_8c.html#ad8a9a97db56a4734bd2ebfc30acc017e">find_type_by_id</a>(global_proptypes, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> type;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment"> * prop_clear({lnum} [, {lnum_end} [, {bufnr}]])</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00491"></a><span class="lineno"><a class="line" href="textprop_8c.html#afe2207117e5f323cedfcefea9fede773">  491</a></span>&#160;<a class="code" href="textprop_8c.html#afe2207117e5f323cedfcefea9fede773">f_prop_clear</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;{</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> start = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[0]);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> end = start;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>    *buf = curbuf;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (argvars[1].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    end = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[1]);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordflow">if</span> (argvars[2].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    {</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[2], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (start &lt; 1 || end &lt; 1)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invrange));</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">for</span> (lnum = start; lnum &lt;= end; ++lnum)</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    char_u *text;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">size_t</span> len;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (lnum &gt; buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">ml_line_count</a>)</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    text = <a class="code" href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a>(buf, lnum, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    len = <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(text) + 1;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">size_t</span>)buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> &gt; len)</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">if</span> (!(buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">ml_flags</a> &amp; <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>))</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;        {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        char_u *newtext = <a class="code" href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a>(text);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="comment">// need to allocate the line now</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">if</span> (newtext == NULL)</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a> = newtext;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">ml_flags</a> |= <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> = (int)len;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    }</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <a class="code" href="drawscreen_8c.html#ad8e43d13fd6b1e3af27b349d1097eb97">redraw_buf_later</a>(buf, <a class="code" href="vim_8h.html#a72695d31382ba5334881ad3407393642">NOT_VALID</a>);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> * prop_list({lnum} [, {bufnr}])</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00544"></a><span class="lineno"><a class="line" href="textprop_8c.html#a8e20a6c212b74a64690843b9545d472d">  544</a></span>&#160;<a class="code" href="textprop_8c.html#a8e20a6c212b74a64690843b9545d472d">f_prop_list</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv)</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;{</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[0]);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>    *buf = curbuf;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keywordflow">if</span> (argvars[1].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[1], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (lnum &lt; 1 || lnum &gt; buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">ml_line_count</a>)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invrange));</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    }</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a3d5ded2849bb15be136b9add766f5d38">rettv_list_alloc</a>(rettv) == <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>)</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    char_u      *text = <a class="code" href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a>(buf, lnum, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordtype">size_t</span>      textlen = <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(text) + 1;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordtype">int</span>     count = (int)((buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> - textlen)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                             / <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>));</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a>  <a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *pt;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; count; ++i)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="structdictvar___s.html">dict_T</a> *<a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a> = <a class="code" href="dict_8c.html#a9566ecec0bde76a2d68ff23d90d08771">dict_alloc</a>();</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <span class="keywordflow">if</span> (d == NULL)</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(&amp;prop, text + textlen + i * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;col&quot;</span>, prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a>);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;length&quot;</span>, prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;id&quot;</span>, prop.<a class="code" href="structtextprop___s.html#add824afd44cdd8e8a34e008fa91fb708">tp_id</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;start&quot;</span>, !(prop.<a class="code" href="structtextprop___s.html#a37661218d497b414d619683e1063e09b">tp_flags</a> &amp; <a class="code" href="structs_8h.html#ad2df9991ef69c281e2c46a0b9473dc06">TP_FLAG_CONT_PREV</a>));</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;end&quot;</span>, !(prop.<a class="code" href="structtextprop___s.html#a37661218d497b414d619683e1063e09b">tp_flags</a> &amp; <a class="code" href="structs_8h.html#a1728259701820b8a8745485b2537217d">TP_FLAG_CONT_NEXT</a>));</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        pt = <a class="code" href="textprop_8c.html#ac4b0eb3f47e5ba44b644d74fdf454b20">text_prop_type_by_id</a>(buf, prop.<a class="code" href="structtextprop___s.html#a01dfe881b1438f9c53dcdd63e76f3fbd">tp_type</a>);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">if</span> (pt != NULL)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        <a class="code" href="dict_8c.html#a759ca75bf61d60f49e272e193842c455">dict_add_string</a>(d, <span class="stringliteral">&quot;type&quot;</span>, pt-&gt;<a class="code" href="structproptype___s.html#a2af9133447629631938e43d2ba66d5df">pt_name</a>);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <a class="code" href="list_8c.html#a8ed5892a4a34292a12da894db2264914">list_append_dict</a>(rettv-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a886659f986c150dab284f1d5ef64ee00">v_list</a>, d);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    }</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    }</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;}</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment"> * prop_remove({props} [, {lnum} [, {lnum_end}]])</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="textprop_8c.html#a8dbf264d7882391e9047ea03e37759db">  596</a></span>&#160;<a class="code" href="textprop_8c.html#a8dbf264d7882391e9047ea03e37759db">f_prop_remove</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv)</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    start = 1;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    end = 0;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    <a class="code" href="structdictvar___s.html">dict_T</a>  *dict;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>   *buf = curbuf;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="structdictitem___s.html">dictitem_T</a>  *di;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordtype">int</span>     do_all = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keywordtype">int</span>     <span class="keywordtype">id</span> = -1;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordtype">int</span>     type_id = -1;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    rettv-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#aa8615bd53291928fc5adceff07d5e5bc">v_number</a> = 0;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <span class="keywordflow">if</span> (argvars[0].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76aa3a72813b2075b71a9a9789fa4252853">VAR_DICT</a> || argvars[0].vval.<a class="code" href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">v_dict</a> == NULL)</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invarg));</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordflow">if</span> (argvars[1].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    start = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[1]);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    end = start;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keywordflow">if</span> (argvars[2].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        end = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;argvars[2]);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">if</span> (start &lt; 1 || end &lt; 1)</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invrange));</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    dict = argvars[0].<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">v_dict</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[0], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a9adb5a08b3c01be69c98360a14937227">ml_mfp</a> == NULL)</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u*)<span class="stringliteral">&quot;all&quot;</span>, -1);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    do_all = <a class="code" href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a>(dict, (char_u *)<span class="stringliteral">&quot;all&quot;</span>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;id&quot;</span>, -1) != NULL)</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keywordtype">id</span> = <a class="code" href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a>(dict, (char_u *)<span class="stringliteral">&quot;id&quot;</span>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;type&quot;</span>, -1))</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    char_u      *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a> = <a class="code" href="dict_8c.html#a992a6dd9552d0d2263c1178a7d5c7de9">dict_get_string</a>(dict, (char_u *)<span class="stringliteral">&quot;type&quot;</span>, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *type = <a class="code" href="textprop_8c.html#ab1bf6540b189e7b3c6fb9e68e0f1c147">lookup_prop_type</a>(name, buf);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">if</span> (type == NULL)</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    type_id = type-&gt;<a class="code" href="structproptype___s.html#a6b536a9a614ea72c18ee1dafa179b87f">pt_id</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == -1 &amp;&amp; type_id == -1)</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E968: Need at least one of &#39;id&#39; or &#39;type&#39;&quot;</span>));</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (end == 0)</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    end = buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">ml_line_count</a>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">for</span> (lnum = start; lnum &lt;= end; ++lnum)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    char_u *text;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordtype">size_t</span> len;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (lnum &gt; buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">ml_line_count</a>)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    text = <a class="code" href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a>(buf, lnum, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    len = <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(text) + 1;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> ((<span class="keywordtype">size_t</span>)buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> &gt; len)</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keyword">static</span> <a class="code" href="structtextprop___s.html">textprop_T</a> textprop;  <span class="comment">// static because of alignment</span></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="keywordtype">unsigned</span>          idx;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <span class="keywordflow">for</span> (idx = 0; idx &lt; (buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> - len)</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                           / <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>); ++idx)</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;        {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        char_u *cur_prop = buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a> + len</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                            + idx * <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;        <span class="keywordtype">size_t</span>  taillen;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(&amp;textprop, cur_prop, <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;        <span class="keywordflow">if</span> (textprop.<a class="code" href="structtextprop___s.html#add824afd44cdd8e8a34e008fa91fb708">tp_id</a> == <span class="keywordtype">id</span> || textprop.<a class="code" href="structtextprop___s.html#a01dfe881b1438f9c53dcdd63e76f3fbd">tp_type</a> == type_id)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            <span class="keywordflow">if</span> (!(buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">ml_flags</a> &amp; <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>))</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;            {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            char_u *newptr = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            <span class="comment">// need to allocate the line to be able to change it</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;            <span class="keywordflow">if</span> (newptr == NULL)</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;            <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(newptr, buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a>,</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                            buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a>);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;            buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a> = newptr;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">ml_flags</a> |= <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            cur_prop = buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#aada7438521544eec6c73e223b2811a69">ml_line_ptr</a> + len</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                            + idx * <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;            }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;            taillen = buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> - len</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                          - (idx + 1) * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;            <span class="keywordflow">if</span> (taillen &gt; 0)</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(cur_prop, cur_prop + <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                                      taillen);</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;            buf-&gt;<a class="code" href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">b_ml</a>.<a class="code" href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">ml_line_len</a> -= <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            --idx;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            ++rettv-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#aa8615bd53291928fc5adceff07d5e5bc">v_number</a>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            <span class="keywordflow">if</span> (!do_all)</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="drawscreen_8c.html#ad8e43d13fd6b1e3af27b349d1097eb97">redraw_buf_later</a>(buf, <a class="code" href="vim_8h.html#a72695d31382ba5334881ad3407393642">NOT_VALID</a>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;}</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"> * Common for f_prop_type_add() and f_prop_type_change().</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="textprop_8c.html#a97a5b33e24c3f4eb931a0a34ce05f562">  719</a></span>&#160;<a class="code" href="textprop_8c.html#a97a5b33e24c3f4eb931a0a34ce05f562">prop_type_set</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <span class="keywordtype">int</span> add)</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;{</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    char_u  *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a>;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>   *buf = NULL;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    <a class="code" href="structdictvar___s.html">dict_T</a>  *dict;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <a class="code" href="structdictitem___s.html">dictitem_T</a>  *di;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    name = <a class="code" href="eval_8c.html#ac06b57274a721210cd205e253073bfa9">tv_get_string</a>(&amp;argvars[0]);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <span class="keywordflow">if</span> (*name == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invarg));</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[1], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    dict = argvars[1].<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">v_dict</a>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    prop = <a class="code" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a>(name, buf);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> (add)</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    {</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="structhashtable___s.html">hashtab_T</a> **htp;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="keywordflow">if</span> (prop != NULL)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    {</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E969: Property type %s already defined&quot;</span>), name);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    prop = <a class="code" href="misc2_8c.html#a9d77f05b96f11e6de1d64663f4492a18">alloc_clear</a>(offsetof(<a class="code" href="structproptype___s.html">proptype_T</a>, pt_name) + <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(name) + 1);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <span class="keywordflow">if</span> (prop == NULL)</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <a class="code" href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a>(prop-&gt;<a class="code" href="structproptype___s.html#a2af9133447629631938e43d2ba66d5df">pt_name</a>, name);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    prop-&gt;<a class="code" href="structproptype___s.html#a6b536a9a614ea72c18ee1dafa179b87f">pt_id</a> = ++<a class="code" href="textprop_8c.html#a8e70a1530c984c595594969c556fb3dd">proptype_id</a>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    htp = buf == NULL ? &amp;global_proptypes : &amp;buf-&gt;b_proptypes;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <span class="keywordflow">if</span> (*htp == NULL)</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    {</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;        *htp = <a class="code" href="vim_8h.html#aa7847d468c459f481f1bfc3b82526b20">ALLOC_ONE</a>(<a class="code" href="structhashtable___s.html">hashtab_T</a>);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="keywordflow">if</span> (*htp == NULL)</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(prop);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <a class="code" href="hashtab_8c.html#a1e75fcb634cc34f2a968e47d1b37381a">hash_init</a>(*htp);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;    }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;    <a class="code" href="hashtab_8c.html#af1235e0f7163089ec19df22a8af6d996">hash_add</a>(*htp, <a class="code" href="textprop_8c.html#a37f7dfe34c6fe34c9fca205f40d75988">PT2HIKEY</a>(prop));</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;    }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;    {</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;    <span class="keywordflow">if</span> (prop == NULL)</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="textprop_8c.html#a377972865a8a4dcde81d324b86afdc4a">e_type_not_exist</a>), name);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;    }</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    <span class="keywordflow">if</span> (dict != NULL)</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;highlight&quot;</span>, -1);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;        char_u  *highlight;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;        <span class="keywordtype">int</span>     hl_id = 0;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        highlight = <a class="code" href="dict_8c.html#a992a6dd9552d0d2263c1178a7d5c7de9">dict_get_string</a>(dict, (char_u *)<span class="stringliteral">&quot;highlight&quot;</span>, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="keywordflow">if</span> (highlight != NULL &amp;&amp; *highlight != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        hl_id = <a class="code" href="highlight_8c.html#a81568cefb6df0f84da039d8a8faf5c8b">syn_name2id</a>(highlight);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;        <span class="keywordflow">if</span> (hl_id &lt;= 0)</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E970: Unknown highlight group name: &#39;%s&#39;&quot;</span>),</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            highlight == NULL ? (char_u *)<span class="stringliteral">&quot;&quot;</span> : highlight);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#a8a952cadfe900ca68cbfe979c21bc383">pt_hl_id</a> = hl_id;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;combine&quot;</span>, -1);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;    {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;di-&gt;<a class="code" href="structdictitem___s.html#a7c2467304c3b37c1e211b025b1fbd1f9">di_tv</a>))</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> |= <a class="code" href="structs_8h.html#a633cd57cd90cbb1ee6e73da261d695df">PT_FLAG_COMBINE</a>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp;= ~<a class="code" href="structs_8h.html#a633cd57cd90cbb1ee6e73da261d695df">PT_FLAG_COMBINE</a>;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;priority&quot;</span>, -1);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#a9b6392edcb16cf55b5bb9674abe61729">pt_priority</a> = <a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;di-&gt;<a class="code" href="structdictitem___s.html#a7c2467304c3b37c1e211b025b1fbd1f9">di_tv</a>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;start_incl&quot;</span>, -1);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;    {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;di-&gt;<a class="code" href="structdictitem___s.html#a7c2467304c3b37c1e211b025b1fbd1f9">di_tv</a>))</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> |= <a class="code" href="structs_8h.html#a9c5fd510e0b237fded288d2457692456">PT_FLAG_INS_START_INCL</a>;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp;= ~<a class="code" href="structs_8h.html#a9c5fd510e0b237fded288d2457692456">PT_FLAG_INS_START_INCL</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;    }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    di = <a class="code" href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a>(dict, (char_u *)<span class="stringliteral">&quot;end_incl&quot;</span>, -1);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">if</span> (di != NULL)</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a>(&amp;di-&gt;<a class="code" href="structdictitem___s.html#a7c2467304c3b37c1e211b025b1fbd1f9">di_tv</a>))</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> |= <a class="code" href="structs_8h.html#a79e94795284f93460d1ec069b0b2761e">PT_FLAG_INS_END_INCL</a>;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp;= ~<a class="code" href="structs_8h.html#a79e94795284f93460d1ec069b0b2761e">PT_FLAG_INS_END_INCL</a>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;<span class="comment"> * prop_type_add({name}, {props})</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="textprop_8c.html#a3cd0880d024303e58568ce3a7eabdf93">  832</a></span>&#160;<a class="code" href="textprop_8c.html#a3cd0880d024303e58568ce3a7eabdf93">f_prop_type_add</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;{</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    <a class="code" href="textprop_8c.html#a97a5b33e24c3f4eb931a0a34ce05f562">prop_type_set</a>(argvars, <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;}</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment"> * prop_type_change({name}, {props})</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00841"></a><span class="lineno"><a class="line" href="textprop_8c.html#ab19161cf7a714d51897ae8b1e5b14565">  841</a></span>&#160;<a class="code" href="textprop_8c.html#ab19161cf7a714d51897ae8b1e5b14565">f_prop_type_change</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;{</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="textprop_8c.html#a97a5b33e24c3f4eb931a0a34ce05f562">prop_type_set</a>(argvars, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;<span class="comment"> * prop_type_delete({name} [, {bufnr}])</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="textprop_8c.html#a97a27f72b1c16dffd401945c67cb7a16">  850</a></span>&#160;<a class="code" href="textprop_8c.html#a97a27f72b1c16dffd401945c67cb7a16">f_prop_type_delete</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;{</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    char_u  *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>   *buf = NULL;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    <a class="code" href="structhashitem___s.html">hashitem_T</a>  *hi;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    name = <a class="code" href="eval_8c.html#ac06b57274a721210cd205e253073bfa9">tv_get_string</a>(&amp;argvars[0]);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordflow">if</span> (*name == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    {</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invarg));</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordflow">if</span> (argvars[1].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[1], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    hi = <a class="code" href="textprop_8c.html#a8e6f952ff662c7ba3b6df100f415da2c">find_prop_hi</a>(name, buf);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    <span class="keywordflow">if</span> (hi != NULL)</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;    {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;    <a class="code" href="structhashtable___s.html">hashtab_T</a>   *ht;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a> = <a class="code" href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">HI2PT</a>(hi);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <span class="keywordflow">if</span> (buf == NULL)</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        ht = <a class="code" href="textprop_8c.html#a737d88ebe6434aec9e2b13ff36d1e278">global_proptypes</a>;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;        ht = buf-&gt;b_proptypes;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <a class="code" href="hashtab_8c.html#a6acdcb55113dfca42811b53109f8b3ba">hash_remove</a>(ht, hi);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(prop);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    }</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment"> * prop_type_get({name} [, {bufnr}])</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="textprop_8c.html#a0fa3b70237daea8e52073e0ebd3d82bb">  888</a></span>&#160;<a class="code" href="textprop_8c.html#a0fa3b70237daea8e52073e0ebd3d82bb">f_prop_type_get</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;{</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    char_u *<a class="code" href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a> = <a class="code" href="eval_8c.html#ac06b57274a721210cd205e253073bfa9">tv_get_string</a>(&amp;argvars[0]);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">if</span> (*name == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_invarg));</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dict_8c.html#a1b581a492dfc8329a74ec91f4c209234">rettv_dict_alloc</a>(rettv) == <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>)</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a> = NULL;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>       *buf = NULL;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="keywordflow">if</span> (argvars[1].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[1], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    prop = <a class="code" href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a>(name, buf);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordflow">if</span> (prop != NULL)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <a class="code" href="structdictvar___s.html">dict_T</a> *<a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a> = rettv-&gt;vval.v_dict;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <span class="keywordflow">if</span> (prop-&gt;<a class="code" href="structproptype___s.html#a8a952cadfe900ca68cbfe979c21bc383">pt_hl_id</a> &gt; 0)</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;        <a class="code" href="dict_8c.html#a759ca75bf61d60f49e272e193842c455">dict_add_string</a>(d, <span class="stringliteral">&quot;highlight&quot;</span>, <a class="code" href="highlight_8c.html#a453301a0803cdd006df65350a2a79546">syn_id2name</a>(prop-&gt;<a class="code" href="structproptype___s.html#a8a952cadfe900ca68cbfe979c21bc383">pt_hl_id</a>));</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;priority&quot;</span>, prop-&gt;<a class="code" href="structproptype___s.html#a9b6392edcb16cf55b5bb9674abe61729">pt_priority</a>);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;combine&quot;</span>,</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                   (prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp; <a class="code" href="structs_8h.html#a633cd57cd90cbb1ee6e73da261d695df">PT_FLAG_COMBINE</a>) ? 1 : 0);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;start_incl&quot;</span>,</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                (prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp; <a class="code" href="structs_8h.html#a9c5fd510e0b237fded288d2457692456">PT_FLAG_INS_START_INCL</a>) ? 1 : 0);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;end_incl&quot;</span>,</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                  (prop-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp; <a class="code" href="structs_8h.html#a79e94795284f93460d1ec069b0b2761e">PT_FLAG_INS_END_INCL</a>) ? 1 : 0);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">if</span> (buf != NULL)</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;        <a class="code" href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a>(d, <span class="stringliteral">&quot;bufnr&quot;</span>, buf-&gt;<a class="code" href="structfile__buffer.html#ae5baea5400f6dbb0dbc24986c4da2f7b">b_fnum</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;    }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="textprop_8c.html#a8a110bc8a1e5e04aeeb1a9dadfe0b8c3">  929</a></span>&#160;<a class="code" href="textprop_8c.html#a8a110bc8a1e5e04aeeb1a9dadfe0b8c3">list_types</a>(<a class="code" href="structhashtable___s.html">hashtab_T</a> *ht, <a class="code" href="structlistvar___s.html">list_T</a> *<a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>)</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;{</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordtype">long</span>    todo;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <a class="code" href="structhashitem___s.html">hashitem_T</a>  *hi;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    todo = (long)ht-&gt;<a class="code" href="structhashtable___s.html#a5102b561274edb12b4ac5c9b0df7dab1">ht_used</a>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;    for (hi = ht-&gt;<a class="code" href="structhashtable___s.html#a7cfd4386f392f78cfca0fec4e1188156">ht_array</a>; todo &gt; 0; ++hi)</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structs_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a>(hi))</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;        <a class="code" href="structproptype___s.html">proptype_T</a> *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a> = <a class="code" href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">HI2PT</a>(hi);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;        <a class="code" href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a>(l, prop-&gt;<a class="code" href="structproptype___s.html#a2af9133447629631938e43d2ba66d5df">pt_name</a>, -1);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;        --todo;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    }</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;}</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment"> * prop_type_list([{bufnr}])</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l00951"></a><span class="lineno"><a class="line" href="textprop_8c.html#ad645064b5f95a971a101e545a3025be8">  951</a></span>&#160;<a class="code" href="textprop_8c.html#ad645064b5f95a971a101e545a3025be8">f_prop_type_list</a>(<a class="code" href="structtypval___t.html">typval_T</a> *argvars, <a class="code" href="structtypval___t.html">typval_T</a> *rettv <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;{</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a> *buf = NULL;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a3d5ded2849bb15be136b9add766f5d38">rettv_list_alloc</a>(rettv) == <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>)</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    {</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    <span class="keywordflow">if</span> (argvars[0].v_type != <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a>)</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a>(&amp;argvars[0], &amp;buf) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <span class="keywordflow">if</span> (buf == NULL)</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        <span class="keywordflow">if</span> (global_proptypes != NULL)</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <a class="code" href="textprop_8c.html#a8a110bc8a1e5e04aeeb1a9dadfe0b8c3">list_types</a>(global_proptypes, rettv-&gt;vval.v_list);</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    }</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (buf-&gt;b_proptypes != NULL)</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;        <a class="code" href="textprop_8c.html#a8a110bc8a1e5e04aeeb1a9dadfe0b8c3">list_types</a>(buf-&gt;b_proptypes, rettv-&gt;vval.v_list);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;}</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"> * Free all property types in &quot;ht&quot;.</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="textprop_8c.html#af817decf99a3a09eb01c398f4b25eb99">  976</a></span>&#160;<a class="code" href="textprop_8c.html#af817decf99a3a09eb01c398f4b25eb99">clear_ht_prop_types</a>(<a class="code" href="structhashtable___s.html">hashtab_T</a> *ht)</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="keywordtype">long</span>    todo;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="structhashitem___s.html">hashitem_T</a>  *hi;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (ht == NULL)</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    todo = (long)ht-&gt;<a class="code" href="structhashtable___s.html#a5102b561274edb12b4ac5c9b0df7dab1">ht_used</a>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    for (hi = ht-&gt;<a class="code" href="structhashtable___s.html#a7cfd4386f392f78cfca0fec4e1188156">ht_array</a>; todo &gt; 0; ++hi)</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="structs_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a>(hi))</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;        <a class="code" href="structproptype___s.html">proptype_T</a> *<a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a> = <a class="code" href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">HI2PT</a>(hi);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(prop);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        --todo;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    }</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <a class="code" href="hashtab_8c.html#a82320ef8ee0783629a0cab3a74586b75">hash_clear</a>(ht);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(ht);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;}</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="preprocessor">#if defined(EXITFREE) || defined(PROTO)</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment"> * Free all global property types.</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;clear_global_prop_types(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;{</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <a class="code" href="textprop_8c.html#af817decf99a3a09eb01c398f4b25eb99">clear_ht_prop_types</a>(global_proptypes);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    global_proptypes = NULL;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;}</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"> * Free all property types for &quot;buf&quot;.</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="textprop_8c.html#a1c182865621e270774a5b3606be4983a"> 1016</a></span>&#160;<a class="code" href="textprop_8c.html#a1c182865621e270774a5b3606be4983a">clear_buf_prop_types</a>(<a class="code" href="structfile__buffer.html">buf_T</a> *buf)</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;{</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <a class="code" href="textprop_8c.html#af817decf99a3a09eb01c398f4b25eb99">clear_ht_prop_types</a>(buf-&gt;b_proptypes);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    buf-&gt;b_proptypes = NULL;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"> * Adjust the columns of text properties in line &quot;lnum&quot; after position &quot;col&quot; to</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment"> * shift by &quot;bytes_added&quot; (can be negative).</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment"> * Note that &quot;col&quot; is zero-based, while tp_col is one-based.</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment"> * Only for the current buffer.</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"> * &quot;flags&quot; can have:</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment"> * APC_SAVE_FOR_UNDO:   Call u_savesub() before making changes to the line.</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment"> * APC_SUBSTITUTE:  Text is replaced, not inserted.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"> * Caller is expected to check b_has_textprop and &quot;bytes_added&quot; being non-zero.</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment"> * Returns TRUE when props were changed.</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l01034"></a><span class="lineno"><a class="line" href="textprop_8c.html#ae6da2049141a445c4e2232e539fcce05"> 1034</a></span>&#160;<a class="code" href="textprop_8c.html#ae6da2049141a445c4e2232e539fcce05">adjust_prop_columns</a>(</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum,</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>     col,</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;    <span class="keywordtype">int</span>     bytes_added,</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordtype">int</span>     flags)</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordtype">int</span>     proplen;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    char_u  *props;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a>  tmp_prop;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <a class="code" href="structproptype___s.html">proptype_T</a>  *pt;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordtype">int</span>     dirty = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;    <span class="keywordtype">int</span>     ri, wi;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    <span class="keywordtype">size_t</span>  textlen;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (text_prop_frozen &gt; 0)</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;    proplen = <a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(curbuf, lnum, &amp;props, <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;    <span class="keywordflow">if</span> (proplen == 0)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;    textlen = curbuf-&gt;b_ml.ml_line_len - proplen * <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;    wi = 0; <span class="comment">// write index</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="keywordflow">for</span> (ri = 0; ri &lt; proplen; ++ri)</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    {</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keywordtype">int</span> start_incl;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(&amp;tmp_prop, props + ri * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;    pt = <a class="code" href="textprop_8c.html#ac4b0eb3f47e5ba44b644d74fdf454b20">text_prop_type_by_id</a>(curbuf, tmp_prop.<a class="code" href="structtextprop___s.html#a01dfe881b1438f9c53dcdd63e76f3fbd">tp_type</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    start_incl = (flags &amp; <a class="code" href="vim_8h.html#a0b6f72cf6f4fbb5ac3d2afedd886d1fd">APC_SUBSTITUTE</a>) ||</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;               (pt != NULL &amp;&amp; (pt-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp; <a class="code" href="structs_8h.html#a9c5fd510e0b237fded288d2457692456">PT_FLAG_INS_START_INCL</a>));</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;    <span class="keywordflow">if</span> (bytes_added &gt; 0</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;        &amp;&amp; (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &gt;= col + (start_incl ? 2 : 1)))</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;    {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;        <span class="keywordflow">if</span> (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &lt; col + (start_incl ? 2 : 1))</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;        {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> += (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> - 1 - col) + bytes_added;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> = col + 1;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;        }</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> += bytes_added;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        <span class="comment">// Save for undo if requested and not done yet.</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;        <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="vim_8h.html#a8a01c64425237940e09f122c65538222">APC_SAVE_FOR_UNDO</a>) &amp;&amp; !dirty)</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;        <a class="code" href="undo_8c.html#a28dcc7cb4dde5309a7cbca2d62761022">u_savesub</a>(lnum);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;        dirty = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bytes_added &lt;= 0 &amp;&amp; (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &gt; col + 1))</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">if</span> (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> + bytes_added &lt; col + 1)</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;        {</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> += (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> - 1 - col) + bytes_added;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> = col + 1;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;        }</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> += bytes_added;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;        <span class="comment">// Save for undo if requested and not done yet.</span></div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;        <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="vim_8h.html#a8a01c64425237940e09f122c65538222">APC_SAVE_FOR_UNDO</a>) &amp;&amp; !dirty)</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;        <a class="code" href="undo_8c.html#a28dcc7cb4dde5309a7cbca2d62761022">u_savesub</a>(lnum);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;        dirty = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;        <span class="keywordflow">if</span> (tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &lt;= 0)</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// drop this text property</span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;    }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &gt; 0</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;        &amp;&amp; tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> + tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &gt; col</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;               + ((pt != NULL &amp;&amp; (pt-&gt;<a class="code" href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">pt_flags</a> &amp; <a class="code" href="structs_8h.html#a79e94795284f93460d1ec069b0b2761e">PT_FLAG_INS_END_INCL</a>))</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                                      ? 0 : 1))</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;        <span class="keywordtype">int</span> after = col - bytes_added</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                     - (tmp_prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> - 1 + tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a>);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;        <span class="keywordflow">if</span> (after &gt; 0)</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> += bytes_added + after;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;        tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> += bytes_added;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;        <span class="comment">// Save for undo if requested and not done yet.</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">if</span> ((flags &amp; <a class="code" href="vim_8h.html#a8a01c64425237940e09f122c65538222">APC_SAVE_FOR_UNDO</a>) &amp;&amp; !dirty)</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;        <a class="code" href="undo_8c.html#a28dcc7cb4dde5309a7cbca2d62761022">u_savesub</a>(lnum);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;        dirty = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;        <span class="keywordflow">if</span> (tmp_prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &lt;= 0)</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">continue</span>;  <span class="comment">// drop this text property</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;    }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(props + wi * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>), &amp;tmp_prop,</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    ++wi;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;    }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">if</span> (dirty)</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;    {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> newlen = (int)textlen + wi * (<a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>)<span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="keywordflow">if</span> ((curbuf-&gt;b_ml.ml_flags &amp; <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>) == 0)</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;        curbuf-&gt;b_ml.ml_line_ptr =</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                 <a class="code" href="misc2_8c.html#a4bcab42fe15a545fd147a9c3d03e4354">vim_memsave</a>(curbuf-&gt;b_ml.ml_line_ptr, newlen);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;    curbuf-&gt;b_ml.ml_flags |= <a class="code" href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a>;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;    curbuf-&gt;b_ml.ml_line_len = newlen;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;    }</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;    <span class="keywordflow">return</span> dirty;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;}</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment"> * Adjust text properties for a line that was split in two.</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment"> * &quot;lnum_props&quot; is the line that has the properties from before the split.</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment"> * &quot;lnum_top&quot; is the top line.</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment"> * &quot;kept&quot; is the number of bytes kept in the first line, while</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"> * &quot;deleted&quot; is the number of bytes deleted.</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="textprop_8c.html#a4a55ee03b2a27f04ccb10f1f9104f1d2"> 1141</a></span>&#160;<a class="code" href="textprop_8c.html#a4a55ee03b2a27f04ccb10f1f9104f1d2">adjust_props_for_split</a>(</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum_props,</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum_top,</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;    <span class="keywordtype">int</span> kept,</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;    <span class="keywordtype">int</span> deleted)</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;{</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    char_u  *props;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;    <span class="keywordtype">int</span>     count;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <a class="code" href="structgrowarray.html">garray_T</a>    prevprop;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <a class="code" href="structgrowarray.html">garray_T</a>    nextprop;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="keywordtype">int</span>     skipped = kept + deleted;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (!curbuf-&gt;b_has_textprop)</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">// Get the text properties from &quot;lnum_props&quot;.</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    count = <a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(curbuf, lnum_props, &amp;props, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <a class="code" href="misc2_8c.html#a3026bad36de32ad700cd165789e53508">ga_init2</a>(&amp;prevprop, <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>), 10);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;    <a class="code" href="misc2_8c.html#a3026bad36de32ad700cd165789e53508">ga_init2</a>(&amp;nextprop, <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>), 10);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">// Keep the relevant ones in the first line, reducing the length if needed.</span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="comment">// Copy the ones that include the split to the second line.</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="comment">// Move the ones after the split to the second line.</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; count; ++i)</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;    {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a>  <a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a> *p;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    <span class="comment">// copy the prop to an aligned structure</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(&amp;prop, props + i * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>), <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;    <span class="keywordflow">if</span> (prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &lt; kept &amp;&amp; <a class="code" href="misc2_8c.html#a0d962b27bea5772af8833d283ff78ae9">ga_grow</a>(&amp;prevprop, 1) == <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>)</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;    {</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        p = ((<a class="code" href="structtextprop___s.html">textprop_T</a> *)prevprop.<a class="code" href="structgrowarray.html#a6737d3d6fada8215cbd56aed057848e9">ga_data</a>) + prevprop.<a class="code" href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">ga_len</a>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        *p = <a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> + p-&gt;<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &gt;= kept)</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;        p-&gt;<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> = kept - p-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a>;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        ++prevprop.<a class="code" href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">ga_len</a>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;    }</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="comment">// Only add the property to the next line if the length is bigger than</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    <span class="comment">// zero.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">if</span> (prop.<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> + prop.<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &gt; skipped &amp;&amp; <a class="code" href="misc2_8c.html#a0d962b27bea5772af8833d283ff78ae9">ga_grow</a>(&amp;nextprop, 1) == <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>)</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;    {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;        p = ((<a class="code" href="structtextprop___s.html">textprop_T</a> *)nextprop.<a class="code" href="structgrowarray.html#a6737d3d6fada8215cbd56aed057848e9">ga_data</a>) + nextprop.<a class="code" href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">ga_len</a>;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;        *p = <a class="code" href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &gt; skipped)</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;        p-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> -= skipped - 1;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        {</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;        p-&gt;<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> -= skipped - p-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a>;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;        p-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> = 1;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;        }</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;        ++nextprop.<a class="code" href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">ga_len</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;    }</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;    }</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;    <a class="code" href="textprop_8c.html#ab6ef254db03477ced9de2458dbe96db6">set_text_props</a>(lnum_top, prevprop.<a class="code" href="structgrowarray.html#a6737d3d6fada8215cbd56aed057848e9">ga_data</a>,</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                     prevprop.<a class="code" href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">ga_len</a> * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;    <a class="code" href="misc2_8c.html#afa822cc3cc70a9a0ee394863bcc0c941">ga_clear</a>(&amp;prevprop);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <a class="code" href="textprop_8c.html#ab6ef254db03477ced9de2458dbe96db6">set_text_props</a>(lnum_top + 1, nextprop.<a class="code" href="structgrowarray.html#a6737d3d6fada8215cbd56aed057848e9">ga_data</a>,</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;                     nextprop.<a class="code" href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">ga_len</a> * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;    <a class="code" href="misc2_8c.html#afa822cc3cc70a9a0ee394863bcc0c941">ga_clear</a>(&amp;nextprop);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment"> * Line &quot;lnum&quot; has been joined and will end up at column &quot;col&quot; in the new line.</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment"> * &quot;removed&quot; bytes have been removed from the start of the line, properties</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment"> * there are to be discarded.</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment"> * Move the adjusted text properties to an allocated string, store it in</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment"> * &quot;prop_line&quot; and adjust the columns.</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l01215"></a><span class="lineno"><a class="line" href="textprop_8c.html#a4b7614b46977a786a377d6ac9df2718d"> 1215</a></span>&#160;<a class="code" href="textprop_8c.html#a4b7614b46977a786a377d6ac9df2718d">adjust_props_for_join</a>(</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum,</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a>  **prop_line,</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;    <span class="keywordtype">int</span>     *prop_length,</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keywordtype">long</span>        col,</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;    <span class="keywordtype">int</span>     removed)</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordtype">int</span>     proplen;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    char_u  *props;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="keywordtype">int</span>     ri;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordtype">int</span>     wi = 0;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;    proplen = <a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(curbuf, lnum, &amp;props, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;    <span class="keywordflow">if</span> (proplen &gt; 0)</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;    {</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;    *prop_line = <a class="code" href="vim_8h.html#a22743f1c6b7f2b83c4a99f8ac1a5d454">ALLOC_MULT</a>(<a class="code" href="structtextprop___s.html">textprop_T</a>, proplen);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keywordflow">if</span> (*prop_line != NULL)</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;    {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;        <span class="keywordflow">for</span> (ri = 0; ri &lt; proplen; ++ri)</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;        {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;        <a class="code" href="structtextprop___s.html">textprop_T</a> *cp = *prop_line + wi;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(cp, props + ri * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>),</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                               <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;        <span class="keywordflow">if</span> (cp-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> + cp-&gt;<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> &gt; removed)</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;        {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;            <span class="keywordflow">if</span> (cp-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> &gt; removed)</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            cp-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> += col;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="comment">// property was partly deleted, make it shorter</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            cp-&gt;<a class="code" href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">tp_len</a> -= removed - cp-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            cp-&gt;<a class="code" href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">tp_col</a> = col;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;            }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            ++wi;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;        }</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        }</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;    }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    *prop_length = wi;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;}</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="comment"> * After joining lines: concatenate the text and the properties of all joined</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<span class="comment"> * lines into one line and replace the line.</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l01262"></a><span class="lineno"><a class="line" href="textprop_8c.html#a439cb8f0f70f752f77d64ebab62ee61f"> 1262</a></span>&#160;<a class="code" href="textprop_8c.html#a439cb8f0f70f752f77d64ebab62ee61f">join_prop_lines</a>(</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum,</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    char_u      *newp,</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;    <a class="code" href="structtextprop___s.html">textprop_T</a>  **prop_lines,</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;    <span class="keywordtype">int</span>     *prop_lengths,</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    <span class="keywordtype">int</span>     count)</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;{</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    <span class="keywordtype">size_t</span>  proplen = 0;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;    <span class="keywordtype">size_t</span>  oldproplen;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;    char_u  *props;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    <span class="keywordtype">size_t</span>  len;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    char_u  *line;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    <span class="keywordtype">size_t</span>  <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; count - 1; ++i)</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;    proplen += prop_lengths[i];</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (proplen == 0)</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    <a class="code" href="memline_8c.html#a20133d6ad47e916b5e0512833896d5fe">ml_replace</a>(lnum, newp, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;    }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    <span class="comment">// get existing properties of the joined line</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    oldproplen = <a class="code" href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a>(curbuf, lnum, &amp;props, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    len = <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(newp) + 1;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    line = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(len + (oldproplen + proplen) * <span class="keyword">sizeof</span>(<a class="code" href="structtextprop___s.html">textprop_T</a>));</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span> (line == NULL)</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(line, newp, len);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;    <span class="keywordflow">if</span> (oldproplen &gt; 0)</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;    l = oldproplen * <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(line + len, props, l);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    len += <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;    }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; count - 1; ++i)</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;    <span class="keywordflow">if</span> (prop_lines[i] != NULL)</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;    {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        l = prop_lengths[i] * <span class="keyword">sizeof</span>(<a class="code" href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(line + len, prop_lines[i], l);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        len += <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(prop_lines[i]);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;    <a class="code" href="memline_8c.html#ab34eb7413d943026a67ef3580359d115">ml_replace_len</a>(lnum, line, (<a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>)len, <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(newp);</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(prop_lines);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(prop_lengths);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="preprocessor">#endif // FEAT_TEXT_PROP</span></div><div class="ttc" id="message_8c_html_aeb2442b830699494f53059773212d850"><div class="ttname"><a href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a></div><div class="ttdeci">int semsg(const char *s,...)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l00724">message.c:724</a></div></div>
<div class="ttc" id="structtextprop___s_html_a37661218d497b414d619683e1063e09b"><div class="ttname"><a href="structtextprop___s.html#a37661218d497b414d619683e1063e09b">textprop_S::tp_flags</a></div><div class="ttdeci">int tp_flags</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00748">structs.h:748</a></div></div>
<div class="ttc" id="list_8c_html_a2881d03fa4a045d1018c5a700228472d"><div class="ttname"><a href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a></div><div class="ttdeci">int list_append_string(list_T *l, char_u *str, int len)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00531">list.c:531</a></div></div>
<div class="ttc" id="structmemline_html_a708091d31fa9cf7718aca80d707b1b3d"><div class="ttname"><a href="structmemline.html#a708091d31fa9cf7718aca80d707b1b3d">memline::ml_line_count</a></div><div class="ttdeci">linenr_T ml_line_count</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00707">structs.h:707</a></div></div>
<div class="ttc" id="dict_8c_html_a76f1a043dac0ebae97cdddc55e137e24"><div class="ttname"><a href="dict_8c.html#a76f1a043dac0ebae97cdddc55e137e24">dict_get_number</a></div><div class="ttdeci">varnumber_T dict_get_number(dict_T *d, char_u *key)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00618">dict.c:618</a></div></div>
<div class="ttc" id="textprop_8c_html_ac4b0eb3f47e5ba44b644d74fdf454b20"><div class="ttname"><a href="textprop_8c.html#ac4b0eb3f47e5ba44b644d74fdf454b20">text_prop_type_by_id</a></div><div class="ttdeci">proptype_T * text_prop_type_by_id(buf_T *buf, int id)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00477">textprop.c:477</a></div></div>
<div class="ttc" id="drawscreen_8c_html_ad8e43d13fd6b1e3af27b349d1097eb97"><div class="ttname"><a href="drawscreen_8c.html#ad8e43d13fd6b1e3af27b349d1097eb97">redraw_buf_later</a></div><div class="ttdeci">void redraw_buf_later(buf_T *buf, int type)</div><div class="ttdef"><b>Definition:</b> <a href="drawscreen_8c_source.html#l02976">drawscreen.c:2976</a></div></div>
<div class="ttc" id="memline_8c_html_a109387062ce17fc808cae3971ce703ba"><div class="ttname"><a href="memline_8c.html#a109387062ce17fc808cae3971ce703ba">ml_get</a></div><div class="ttdeci">char_u * ml_get(linenr_T lnum)</div><div class="ttdef"><b>Definition:</b> <a href="memline_8c_source.html#l02567">memline.c:2567</a></div></div>
<div class="ttc" id="vim_8h_html_a72695d31382ba5334881ad3407393642"><div class="ttname"><a href="vim_8h.html#a72695d31382ba5334881ad3407393642">NOT_VALID</a></div><div class="ttdeci">#define NOT_VALID</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l00589">vim.h:589</a></div></div>
<div class="ttc" id="memline_8c_html_a20133d6ad47e916b5e0512833896d5fe"><div class="ttname"><a href="memline_8c.html#a20133d6ad47e916b5e0512833896d5fe">ml_replace</a></div><div class="ttdeci">int ml_replace(linenr_T lnum, char_u *line, int copy)</div><div class="ttdef"><b>Definition:</b> <a href="memline_8c_source.html#l03371">memline.c:3371</a></div></div>
<div class="ttc" id="dosinst_8h_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="dosinst_8h.html#a5ac083a645d964373f022d03df4849c8">name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00332">dosinst.h:332</a></div></div>
<div class="ttc" id="structtypval___t_html_a886659f986c150dab284f1d5ef64ee00"><div class="ttname"><a href="structtypval___t.html#a886659f986c150dab284f1d5ef64ee00">typval_T::v_list</a></div><div class="ttdeci">list_T * v_list</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01343">structs.h:1343</a></div></div>
<div class="ttc" id="vim_8h_html"><div class="ttname"><a href="vim_8h.html">vim.h</a></div></div>
<div class="ttc" id="highlight_8c_html_a81568cefb6df0f84da039d8a8faf5c8b"><div class="ttname"><a href="highlight_8c.html#a81568cefb6df0f84da039d8a8faf5c8b">syn_name2id</a></div><div class="ttdeci">int syn_name2id(char_u *name)</div><div class="ttdef"><b>Definition:</b> <a href="highlight_8c_source.html#l02906">highlight.c:2906</a></div></div>
<div class="ttc" id="message_8c_html_a7926d7fa9a35dc0f5bac051dec01240a"><div class="ttname"><a href="message_8c.html#a7926d7fa9a35dc0f5bac051dec01240a">iemsg</a></div><div class="ttdeci">void iemsg(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l00746">message.c:746</a></div></div>
<div class="ttc" id="structproptype___s_html_a9b6392edcb16cf55b5bb9674abe61729"><div class="ttname"><a href="structproptype___s.html#a9b6392edcb16cf55b5bb9674abe61729">proptype_S::pt_priority</a></div><div class="ttdeci">int pt_priority</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00762">structs.h:762</a></div></div>
<div class="ttc" id="textprop_8c_html_a3cd0880d024303e58568ce3a7eabdf93"><div class="ttname"><a href="textprop_8c.html#a3cd0880d024303e58568ce3a7eabdf93">f_prop_type_add</a></div><div class="ttdeci">void f_prop_type_add(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00832">textprop.c:832</a></div></div>
<div class="ttc" id="textprop_8c_html_ab8877ad05b5982fd5835a02c6993f454"><div class="ttname"><a href="textprop_8c.html#ab8877ad05b5982fd5835a02c6993f454">e_invalid_col</a></div><div class="ttdeci">static char_u e_invalid_col[]</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00052">textprop.c:52</a></div></div>
<div class="ttc" id="message_8c_html_ae5991a4d11897dfaee9bfab8e5489d82"><div class="ttname"><a href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a></div><div class="ttdeci">int emsg(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l00710">message.c:710</a></div></div>
<div class="ttc" id="misc2_8c_html_a3026bad36de32ad700cd165789e53508"><div class="ttname"><a href="misc2_8c.html#a3026bad36de32ad700cd165789e53508">ga_init2</a></div><div class="ttdeci">void ga_init2(garray_T *gap, int itemsize, int growsize)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l02038">misc2.c:2038</a></div></div>
<div class="ttc" id="misc2_8c_html_acd554ee46804f666060916bf740b3c96"><div class="ttname"><a href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a></div><div class="ttdeci">char_u * vim_strsave(char_u *string)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01270">misc2.c:1270</a></div></div>
<div class="ttc" id="list_8c_html_a3d5ded2849bb15be136b9add766f5d38"><div class="ttname"><a href="list_8c.html#a3d5ded2849bb15be136b9add766f5d38">rettv_list_alloc</a></div><div class="ttdeci">int rettv_list_alloc(typval_T *rettv)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00108">list.c:108</a></div></div>
<div class="ttc" id="evalfunc_8c_html_a5e99ade03f69dac39da096cc37c95d6b"><div class="ttname"><a href="evalfunc_8c.html#a5e99ade03f69dac39da096cc37c95d6b">get_buf_arg</a></div><div class="ttdeci">buf_T * get_buf_arg(typval_T *arg)</div><div class="ttdef"><b>Definition:</b> <a href="evalfunc_8c_source.html#l01327">evalfunc.c:1327</a></div></div>
<div class="ttc" id="dosinst_8h_html_abb508ea8227673f419e9fe3a86c30d8e"><div class="ttname"><a href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a></div><div class="ttdeci">#define FAIL</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00061">dosinst.h:61</a></div></div>
<div class="ttc" id="textprop_8c_html_a0fa3b70237daea8e52073e0ebd3d82bb"><div class="ttname"><a href="textprop_8c.html#a0fa3b70237daea8e52073e0ebd3d82bb">f_prop_type_get</a></div><div class="ttdeci">void f_prop_type_get(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00888">textprop.c:888</a></div></div>
<div class="ttc" id="dosinst_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00065">dosinst.h:65</a></div></div>
<div class="ttc" id="textprop_8c_html_a0e128268b44aabf9f599f20a60a3102f"><div class="ttname"><a href="textprop_8c.html#a0e128268b44aabf9f599f20a60a3102f">find_visible_prop</a></div><div class="ttdeci">int find_visible_prop(win_T *wp, int type_id, int id, textprop_T *prop, linenr_T *found_lnum)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00390">textprop.c:390</a></div></div>
<div class="ttc" id="vim_8h_html_a8a01c64425237940e09f122c65538222"><div class="ttname"><a href="vim_8h.html#a8a01c64425237940e09f122c65538222">APC_SAVE_FOR_UNDO</a></div><div class="ttdeci">#define APC_SAVE_FOR_UNDO</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l02631">vim.h:2631</a></div></div>
<div class="ttc" id="textprop_8c_html_a90ece39084bf2621e2131fb7950f5956"><div class="ttname"><a href="textprop_8c.html#a90ece39084bf2621e2131fb7950f5956">e_invalid_lnum</a></div><div class="ttdeci">static char_u e_invalid_lnum[]</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00053">textprop.c:53</a></div></div>
<div class="ttc" id="structwindow___s_html_a4869138fb763f40f6194f7fdff2d9b6a"><div class="ttname"><a href="structwindow___s.html#a4869138fb763f40f6194f7fdff2d9b6a">window_S::w_buffer</a></div><div class="ttdeci">buf_T * w_buffer</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02949">structs.h:2949</a></div></div>
<div class="ttc" id="textprop_8c_html_a97a27f72b1c16dffd401945c67cb7a16"><div class="ttname"><a href="textprop_8c.html#a97a27f72b1c16dffd401945c67cb7a16">f_prop_type_delete</a></div><div class="ttdeci">void f_prop_type_delete(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00850">textprop.c:850</a></div></div>
<div class="ttc" id="namespacedehqx_html_aa833403a763c179f4ce8087adc050961"><div class="ttname"><a href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">dehqx.d</a></div><div class="ttdeci">d</div><div class="ttdef"><b>Definition:</b> <a href="dehqx_8py_source.html#l00026">dehqx.py:26</a></div></div>
<div class="ttc" id="structdictvar___s_html"><div class="ttname"><a href="structdictvar___s.html">dictvar_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01447">structs.h:1447</a></div></div>
<div class="ttc" id="vim_8h_html_a934ce754d29a8aee92b71e970b7e2ae4"><div class="ttname"><a href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a></div><div class="ttdeci">long linenr_T</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01679">vim.h:1679</a></div></div>
<div class="ttc" id="dict_8c_html_a759ca75bf61d60f49e272e193842c455"><div class="ttname"><a href="dict_8c.html#a759ca75bf61d60f49e272e193842c455">dict_add_string</a></div><div class="ttdeci">int dict_add_string(dict_T *d, char *key, char_u *str)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00390">dict.c:390</a></div></div>
<div class="ttc" id="structwindow___s_html_a85accd9e93bd488446a80b804b81dde2"><div class="ttname"><a href="structwindow___s.html#a85accd9e93bd488446a80b804b81dde2">window_S::w_topline</a></div><div class="ttdeci">linenr_T w_topline</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02992">structs.h:2992</a></div></div>
<div class="ttc" id="textprop_8c_html_a37f7dfe34c6fe34c9fca205f40d75988"><div class="ttname"><a href="textprop_8c.html#a37f7dfe34c6fe34c9fca205f40d75988">PT2HIKEY</a></div><div class="ttdeci">#define PT2HIKEY(p)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00041">textprop.c:41</a></div></div>
<div class="ttc" id="structmemline_html_aada7438521544eec6c73e223b2811a69"><div class="ttname"><a href="structmemline.html#aada7438521544eec6c73e223b2811a69">memline::ml_line_ptr</a></div><div class="ttdeci">char_u * ml_line_ptr</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00722">structs.h:722</a></div></div>
<div class="ttc" id="textprop_8c_html_ab19161cf7a714d51897ae8b1e5b14565"><div class="ttname"><a href="textprop_8c.html#ab19161cf7a714d51897ae8b1e5b14565">f_prop_type_change</a></div><div class="ttdeci">void f_prop_type_change(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00841">textprop.c:841</a></div></div>
<div class="ttc" id="ascii_8h_html_af19d48b9f61047a668649a2f9dc317ff"><div class="ttname"><a href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a></div><div class="ttdeci">#define NUL</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00024">ascii.h:24</a></div></div>
<div class="ttc" id="misc2_8c_html_a9d77f05b96f11e6de1d64663f4492a18"><div class="ttname"><a href="misc2_8c.html#a9d77f05b96f11e6de1d64663f4492a18">alloc_clear</a></div><div class="ttdeci">void * alloc_clear(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l00847">misc2.c:847</a></div></div>
<div class="ttc" id="textprop_8c_html_ae0763fc7835fad332308599fabfe8751"><div class="ttname"><a href="textprop_8c.html#ae0763fc7835fad332308599fabfe8751">find_prop_type_id</a></div><div class="ttdeci">int find_prop_type_id(char_u *name, buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00098">textprop.c:98</a></div></div>
<div class="ttc" id="textprop_8c_html_a4a55ee03b2a27f04ccb10f1f9104f1d2"><div class="ttname"><a href="textprop_8c.html#a4a55ee03b2a27f04ccb10f1f9104f1d2">adjust_props_for_split</a></div><div class="ttdeci">void adjust_props_for_split(linenr_T lnum_props, linenr_T lnum_top, int kept, int deleted)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l01141">textprop.c:1141</a></div></div>
<div class="ttc" id="textprop_8c_html_a97a904062b0b630d1c67fdaf7057bcfa"><div class="ttname"><a href="textprop_8c.html#a97a904062b0b630d1c67fdaf7057bcfa">HI2PT</a></div><div class="ttdeci">#define HI2PT(hi)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00043">textprop.c:43</a></div></div>
<div class="ttc" id="structtextprop___s_html_add824afd44cdd8e8a34e008fa91fb708"><div class="ttname"><a href="structtextprop___s.html#add824afd44cdd8e8a34e008fa91fb708">textprop_S::tp_id</a></div><div class="ttdeci">int tp_id</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00746">structs.h:746</a></div></div>
<div class="ttc" id="vim_8h_html_ae79e04a416bd6ce8ffe80e241850c0d2"><div class="ttname"><a href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a></div><div class="ttdeci">int colnr_T</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01680">vim.h:1680</a></div></div>
<div class="ttc" id="list_8c_html_a8ed5892a4a34292a12da894db2264914"><div class="ttname"><a href="list_8c.html#a8ed5892a4a34292a12da894db2264914">list_append_dict</a></div><div class="ttdeci">int list_append_dict(list_T *list, dict_T *dict)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00492">list.c:492</a></div></div>
<div class="ttc" id="textprop_8c_html_a737d88ebe6434aec9e2b13ff36d1e278"><div class="ttname"><a href="textprop_8c.html#a737d88ebe6434aec9e2b13ff36d1e278">global_proptypes</a></div><div class="ttdeci">static hashtab_T * global_proptypes</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00046">textprop.c:46</a></div></div>
<div class="ttc" id="mbyte_8c_html_a4a8f6c91eefb9c6bf448592aac44153d"><div class="ttname"><a href="mbyte_8c.html#a4a8f6c91eefb9c6bf448592aac44153d">prop</a></div><div class="ttdeci">int prop</div><div class="ttdef"><b>Definition:</b> <a href="mbyte_8c_source.html#l00219">mbyte.c:219</a></div></div>
<div class="ttc" id="structs_8h_html_a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309"><div class="ttname"><a href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9aa3e1b5a84820042d52f746ac187309">VAR_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01315">structs.h:1315</a></div></div>
<div class="ttc" id="textprop_8c_html_abae4c4c0d018e2d957c84d0a1d61dd8f"><div class="ttname"><a href="textprop_8c.html#abae4c4c0d018e2d957c84d0a1d61dd8f">get_bufnr_from_arg</a></div><div class="ttdeci">static int get_bufnr_from_arg(typval_T *arg, buf_T **buf)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00132">textprop.c:132</a></div></div>
<div class="ttc" id="textprop_8c_html_ab1bf6540b189e7b3c6fb9e68e0f1c147"><div class="ttname"><a href="textprop_8c.html#ab1bf6540b189e7b3c6fb9e68e0f1c147">lookup_prop_type</a></div><div class="ttdeci">static proptype_T * lookup_prop_type(char_u *name, buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00113">textprop.c:113</a></div></div>
<div class="ttc" id="structtextprop___s_html_a92930deb459cef0462e9e4ce332fc579"><div class="ttname"><a href="structtextprop___s.html#a92930deb459cef0462e9e4ce332fc579">textprop_S::tp_len</a></div><div class="ttdeci">colnr_T tp_len</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00745">structs.h:745</a></div></div>
<div class="ttc" id="structdictitem___s_html_a7c2467304c3b37c1e211b025b1fbd1f9"><div class="ttname"><a href="structdictitem___s.html#a7c2467304c3b37c1e211b025b1fbd1f9">dictitem_S::di_tv</a></div><div class="ttdeci">typval_T di_tv</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01419">structs.h:1419</a></div></div>
<div class="ttc" id="textprop_8c_html_ac4b37a00082f060db7c90b247558194b"><div class="ttname"><a href="textprop_8c.html#ac4b37a00082f060db7c90b247558194b">find_prop</a></div><div class="ttdeci">static proptype_T * find_prop(char_u *name, buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00084">textprop.c:84</a></div></div>
<div class="ttc" id="textprop_8c_html_a1c182865621e270774a5b3606be4983a"><div class="ttname"><a href="textprop_8c.html#a1c182865621e270774a5b3606be4983a">clear_buf_prop_types</a></div><div class="ttdeci">void clear_buf_prop_types(buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l01016">textprop.c:1016</a></div></div>
<div class="ttc" id="structtextprop___s_html_a4c52970bf78ad518de599790e4e9c500"><div class="ttname"><a href="structtextprop___s.html#a4c52970bf78ad518de599790e4e9c500">textprop_S::tp_col</a></div><div class="ttdeci">colnr_T tp_col</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00744">structs.h:744</a></div></div>
<div class="ttc" id="structdictitem___s_html"><div class="ttname"><a href="structdictitem___s.html">dictitem_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01417">structs.h:1417</a></div></div>
<div class="ttc" id="structs_8h_html_a2b5ff4af1dac681258949e5a522dca76aa3a72813b2075b71a9a9789fa4252853"><div class="ttname"><a href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76aa3a72813b2075b71a9a9789fa4252853">VAR_DICT</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01321">structs.h:1321</a></div></div>
<div class="ttc" id="textprop_8c_html_ab6ef254db03477ced9de2458dbe96db6"><div class="ttname"><a href="textprop_8c.html#ab6ef254db03477ced9de2458dbe96db6">set_text_props</a></div><div class="ttdeci">static void set_text_props(linenr_T lnum, char_u *props, int len)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00424">textprop.c:424</a></div></div>
<div class="ttc" id="structhashtable___s_html"><div class="ttname"><a href="structhashtable___s.html">hashtable_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01233">structs.h:1233</a></div></div>
<div class="ttc" id="structs_8h_html_a79e94795284f93460d1ec069b0b2761e"><div class="ttname"><a href="structs_8h.html#a79e94795284f93460d1ec069b0b2761e">PT_FLAG_INS_END_INCL</a></div><div class="ttdeci">#define PT_FLAG_INS_END_INCL</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00768">structs.h:768</a></div></div>
<div class="ttc" id="dict_8c_html_a19be416abede1c238aca79a809ed7676"><div class="ttname"><a href="dict_8c.html#a19be416abede1c238aca79a809ed7676">dict_add_number</a></div><div class="ttdeci">int dict_add_number(dict_T *d, char *key, varnumber_T nr)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00370">dict.c:370</a></div></div>
<div class="ttc" id="structproptype___s_html_a8a952cadfe900ca68cbfe979c21bc383"><div class="ttname"><a href="structproptype___s.html#a8a952cadfe900ca68cbfe979c21bc383">proptype_S::pt_hl_id</a></div><div class="ttdeci">int pt_hl_id</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00761">structs.h:761</a></div></div>
<div class="ttc" id="structs_8h_html_a633cd57cd90cbb1ee6e73da261d695df"><div class="ttname"><a href="structs_8h.html#a633cd57cd90cbb1ee6e73da261d695df">PT_FLAG_COMBINE</a></div><div class="ttdeci">#define PT_FLAG_COMBINE</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00769">structs.h:769</a></div></div>
<div class="ttc" id="textprop_8c_html_a8e70a1530c984c595594969c556fb3dd"><div class="ttname"><a href="textprop_8c.html#a8e70a1530c984c595594969c556fb3dd">proptype_id</a></div><div class="ttdeci">static int proptype_id</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00049">textprop.c:49</a></div></div>
<div class="ttc" id="structfile__buffer_html"><div class="ttname"><a href="structfile__buffer.html">file_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02231">structs.h:2231</a></div></div>
<div class="ttc" id="structproptype___s_html_aa56c91fd9ac9ee98fabb993ddbe9e973"><div class="ttname"><a href="structproptype___s.html#aa56c91fd9ac9ee98fabb993ddbe9e973">proptype_S::pt_flags</a></div><div class="ttdeci">int pt_flags</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00763">structs.h:763</a></div></div>
<div class="ttc" id="os__unix_8h_html_ae70108db942e4f3eeb701ad8787b1835"><div class="ttname"><a href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a></div><div class="ttdeci">#define mch_memmove(to, from, len)</div><div class="ttdef"><b>Definition:</b> <a href="os__unix_8h_source.html#l00434">os_unix.h:434</a></div></div>
<div class="ttc" id="misc2_8c_html_ad0b64e14955781629a3908e328f82665"><div class="ttname"><a href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a></div><div class="ttdeci">void * alloc(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l00825">misc2.c:825</a></div></div>
<div class="ttc" id="textprop_8c_html_a377972865a8a4dcde81d324b86afdc4a"><div class="ttname"><a href="textprop_8c.html#a377972865a8a4dcde81d324b86afdc4a">e_type_not_exist</a></div><div class="ttdeci">static char_u e_type_not_exist[]</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00051">textprop.c:51</a></div></div>
<div class="ttc" id="structgrowarray_html"><div class="ttname"><a href="structgrowarray.html">growarray</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00048">structs.h:48</a></div></div>
<div class="ttc" id="dict_8c_html_a9566ecec0bde76a2d68ff23d90d08771"><div class="ttname"><a href="dict_8c.html#a9566ecec0bde76a2d68ff23d90d08771">dict_alloc</a></div><div class="ttdeci">dict_T * dict_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00027">dict.c:27</a></div></div>
<div class="ttc" id="misc2_8c_html_a4bcab42fe15a545fd147a9c3d03e4354"><div class="ttname"><a href="misc2_8c.html#a4bcab42fe15a545fd147a9c3d03e4354">vim_memsave</a></div><div class="ttdeci">char_u * vim_memsave(char_u *p, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01307">misc2.c:1307</a></div></div>
<div class="ttc" id="textprop_8c_html_a2ff749473010c82045a3dde52a9206bc"><div class="ttname"><a href="textprop_8c.html#a2ff749473010c82045a3dde52a9206bc">get_text_props</a></div><div class="ttdeci">int get_text_props(buf_T *buf, linenr_T lnum, char_u **props, int will_change)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00359">textprop.c:359</a></div></div>
<div class="ttc" id="vim_8h_html_aba49c317732ed2f938129061ee53fe32"><div class="ttname"><a href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a></div><div class="ttdeci">#define N_(x)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l00562">vim.h:562</a></div></div>
<div class="ttc" id="hashtab_8c_html_ad88600b48e72a2a435f472e63680577b"><div class="ttname"><a href="hashtab_8c.html#ad88600b48e72a2a435f472e63680577b">hash_find</a></div><div class="ttdeci">hashitem_T * hash_find(hashtab_T *ht, char_u *key)</div><div class="ttdef"><b>Definition:</b> <a href="hashtab_8c_source.html#l00118">hashtab.c:118</a></div></div>
<div class="ttc" id="structmemline_html_a30f30ddb7264f667a92556f0568981e0"><div class="ttname"><a href="structmemline.html#a30f30ddb7264f667a92556f0568981e0">memline::ml_flags</a></div><div class="ttdeci">int ml_flags</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00715">structs.h:715</a></div></div>
<div class="ttc" id="structproptype___s_html_a2af9133447629631938e43d2ba66d5df"><div class="ttname"><a href="structproptype___s.html#a2af9133447629631938e43d2ba66d5df">proptype_S::pt_name</a></div><div class="ttdeci">char_u pt_name[1]</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00764">structs.h:764</a></div></div>
<div class="ttc" id="structs_8h_html_a5c7e944c137636434555c8a7f0cfcd77"><div class="ttname"><a href="structs_8h.html#a5c7e944c137636434555c8a7f0cfcd77">textprop_T</a></div><div class="ttdeci">struct textprop_S textprop_T</div></div>
<div class="ttc" id="dosinst_8h_html_aba51915c87d64af47fb1cc59348961c9"><div class="ttname"><a href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a></div><div class="ttdeci">#define OK</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00062">dosinst.h:62</a></div></div>
<div class="ttc" id="structlistvar___s_html"><div class="ttname"><a href="structlistvar___s.html">listvar_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01388">structs.h:1388</a></div></div>
<div class="ttc" id="structfile__buffer_html_aee73f43424bc86e09983b73d139589f3"><div class="ttname"><a href="structfile__buffer.html#aee73f43424bc86e09983b73d139589f3">file_buffer::b_ml</a></div><div class="ttdeci">memline_T b_ml</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02233">structs.h:2233</a></div></div>
<div class="ttc" id="eval_8c_html_a3727d19f20cae99511bbcf9b97aad1d5"><div class="ttname"><a href="eval_8c.html#a3727d19f20cae99511bbcf9b97aad1d5">tv_get_number</a></div><div class="ttdeci">varnumber_T tv_get_number(typval_T *varp)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l05427">eval.c:5427</a></div></div>
<div class="ttc" id="structs_8h_html_a8fac7ceea6e156c2915cdcf7e228a9f8"><div class="ttname"><a href="structs_8h.html#a8fac7ceea6e156c2915cdcf7e228a9f8">ML_LINE_DIRTY</a></div><div class="ttdeci">#define ML_LINE_DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00712">structs.h:712</a></div></div>
<div class="ttc" id="textprop_8c_html_ad8a9a97db56a4734bd2ebfc30acc017e"><div class="ttname"><a href="textprop_8c.html#ad8a9a97db56a4734bd2ebfc30acc017e">find_type_by_id</a></div><div class="ttdeci">static proptype_T * find_type_by_id(hashtab_T *ht, int id)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00446">textprop.c:446</a></div></div>
<div class="ttc" id="eval_8c_html_ac06b57274a721210cd205e253073bfa9"><div class="ttname"><a href="eval_8c.html#ac06b57274a721210cd205e253073bfa9">tv_get_string</a></div><div class="ttdeci">char_u * tv_get_string(typval_T *varp)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l05548">eval.c:5548</a></div></div>
<div class="ttc" id="hashtab_8c_html_a82320ef8ee0783629a0cab3a74586b75"><div class="ttname"><a href="hashtab_8c.html#a82320ef8ee0783629a0cab3a74586b75">hash_clear</a></div><div class="ttdeci">void hash_clear(hashtab_T *ht)</div><div class="ttdef"><b>Definition:</b> <a href="hashtab_8c_source.html#l00078">hashtab.c:78</a></div></div>
<div class="ttc" id="misc2_8c_html_a0d962b27bea5772af8833d283ff78ae9"><div class="ttname"><a href="misc2_8c.html#a0d962b27bea5772af8833d283ff78ae9">ga_grow</a></div><div class="ttdeci">int ga_grow(garray_T *gap, int n)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l02050">misc2.c:2050</a></div></div>
<div class="ttc" id="dict_8c_html_a992a6dd9552d0d2263c1178a7d5c7de9"><div class="ttname"><a href="dict_8c.html#a992a6dd9552d0d2263c1178a7d5c7de9">dict_get_string</a></div><div class="ttdeci">char_u * dict_get_string(dict_T *d, char_u *key, int save)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00599">dict.c:599</a></div></div>
<div class="ttc" id="misc2_8c_html_a4b4777924352aae7456002f6d9438ffd"><div class="ttname"><a href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a></div><div class="ttdeci">void vim_free(void *x)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01795">misc2.c:1795</a></div></div>
<div class="ttc" id="textprop_8c_html_a5f84da14752465a749d06c05e49bc6f9"><div class="ttname"><a href="textprop_8c.html#a5f84da14752465a749d06c05e49bc6f9">f_prop_add</a></div><div class="ttdeci">void f_prop_add(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00157">textprop.c:157</a></div></div>
<div class="ttc" id="vim_8h_html_addf5ec070e9499d36b7f2009ce736076"><div class="ttname"><a href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a></div><div class="ttdeci">#define UNUSED</div></div>
<div class="ttc" id="memline_8c_html_ab34eb7413d943026a67ef3580359d115"><div class="ttname"><a href="memline_8c.html#ab34eb7413d943026a67ef3580359d115">ml_replace_len</a></div><div class="ttdeci">int ml_replace_len(linenr_T lnum, char_u *line_arg, colnr_T len_arg, int has_props, int copy)</div><div class="ttdef"><b>Definition:</b> <a href="memline_8c_source.html#l03387">memline.c:3387</a></div></div>
<div class="ttc" id="structtypval___t_html_a6ae136251ffe2c006e55e7dc8b980bfb"><div class="ttname"><a href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">typval_T::vval</a></div><div class="ttdeci">union typval_T::@41 vval</div></div>
<div class="ttc" id="vim_8h_html_a916ffefe1fc74532d08102cca55d8e34"><div class="ttname"><a href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a></div><div class="ttdeci">#define STRLEN(s)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01589">vim.h:1589</a></div></div>
<div class="ttc" id="textprop_8c_html_ad645064b5f95a971a101e545a3025be8"><div class="ttname"><a href="textprop_8c.html#ad645064b5f95a971a101e545a3025be8">f_prop_type_list</a></div><div class="ttdeci">void f_prop_type_list(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00951">textprop.c:951</a></div></div>
<div class="ttc" id="structhashtable___s_html_a5102b561274edb12b4ac5c9b0df7dab1"><div class="ttname"><a href="structhashtable___s.html#a5102b561274edb12b4ac5c9b0df7dab1">hashtable_S::ht_used</a></div><div class="ttdeci">long_u ht_used</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01237">structs.h:1237</a></div></div>
<div class="ttc" id="structtypval___t_html"><div class="ttname"><a href="structtypval___t.html">typval_T</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01332">structs.h:1332</a></div></div>
<div class="ttc" id="textprop_8c_html_a97a5b33e24c3f4eb931a0a34ce05f562"><div class="ttname"><a href="textprop_8c.html#a97a5b33e24c3f4eb931a0a34ce05f562">prop_type_set</a></div><div class="ttdeci">static void prop_type_set(typval_T *argvars, int add)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00719">textprop.c:719</a></div></div>
<div class="ttc" id="vim_8h_html_aa7847d468c459f481f1bfc3b82526b20"><div class="ttname"><a href="vim_8h.html#aa7847d468c459f481f1bfc3b82526b20">ALLOC_ONE</a></div><div class="ttdeci">#define ALLOC_ONE(type)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01577">vim.h:1577</a></div></div>
<div class="ttc" id="memline_8c_html_a5efa31d210327048f60b8b00586e2a8c"><div class="ttname"><a href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a></div><div class="ttdeci">char_u * ml_get_buf(buf_T *buf, linenr_T lnum, int will_change)</div><div class="ttdef"><b>Definition:</b> <a href="memline_8c_source.html#l02607">memline.c:2607</a></div></div>
<div class="ttc" id="structwindow___s_html"><div class="ttname"><a href="structwindow___s.html">window_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02945">structs.h:2945</a></div></div>
<div class="ttc" id="textprop_8c_html_afe2207117e5f323cedfcefea9fede773"><div class="ttname"><a href="textprop_8c.html#afe2207117e5f323cedfcefea9fede773">f_prop_clear</a></div><div class="ttdeci">void f_prop_clear(typval_T *argvars, typval_T *rettv UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00491">textprop.c:491</a></div></div>
<div class="ttc" id="misc2_8c_html_afa822cc3cc70a9a0ee394863bcc0c941"><div class="ttname"><a href="misc2_8c.html#afa822cc3cc70a9a0ee394863bcc0c941">ga_clear</a></div><div class="ttdeci">void ga_clear(garray_T *gap)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l02006">misc2.c:2006</a></div></div>
<div class="ttc" id="textprop_8c_html_a8dbf264d7882391e9047ea03e37759db"><div class="ttname"><a href="textprop_8c.html#a8dbf264d7882391e9047ea03e37759db">f_prop_remove</a></div><div class="ttdeci">void f_prop_remove(typval_T *argvars, typval_T *rettv)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00596">textprop.c:596</a></div></div>
<div class="ttc" id="hangulin_8c_html_a89606eca6b563ec68d2da2e84657736f"><div class="ttname"><a href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a></div><div class="ttdeci">static int l</div><div class="ttdef"><b>Definition:</b> <a href="hangulin_8c_source.html#l00032">hangulin.c:32</a></div></div>
<div class="ttc" id="move_8c_html_a819f3c9ad1be31c96957b197adbdbf13"><div class="ttname"><a href="move_8c.html#a819f3c9ad1be31c96957b197adbdbf13">validate_botline</a></div><div class="ttdeci">void validate_botline(void)</div><div class="ttdef"><b>Definition:</b> <a href="move_8c_source.html#l00601">move.c:601</a></div></div>
<div class="ttc" id="textprop_8c_html_a4b7614b46977a786a377d6ac9df2718d"><div class="ttname"><a href="textprop_8c.html#a4b7614b46977a786a377d6ac9df2718d">adjust_props_for_join</a></div><div class="ttdeci">void adjust_props_for_join(linenr_T lnum, textprop_T **prop_line, int *prop_length, long col, int removed)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l01215">textprop.c:1215</a></div></div>
<div class="ttc" id="textprop_8c_html_a781cfa3fd66709b6a7c59bff9c155a3e"><div class="ttname"><a href="textprop_8c.html#a781cfa3fd66709b6a7c59bff9c155a3e">prop_add_common</a></div><div class="ttdeci">void prop_add_common(linenr_T start_lnum, colnr_T start_col, dict_T *dict, buf_T *default_buf, typval_T *dict_arg)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00185">textprop.c:185</a></div></div>
<div class="ttc" id="structs_8h_html_a9c5fd510e0b237fded288d2457692456"><div class="ttname"><a href="structs_8h.html#a9c5fd510e0b237fded288d2457692456">PT_FLAG_INS_START_INCL</a></div><div class="ttdeci">#define PT_FLAG_INS_START_INCL</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00767">structs.h:767</a></div></div>
<div class="ttc" id="textprop_8c_html_a8e6f952ff662c7ba3b6df100f415da2c"><div class="ttname"><a href="textprop_8c.html#a8e6f952ff662c7ba3b6df100f415da2c">find_prop_hi</a></div><div class="ttdeci">static hashitem_T * find_prop_hi(char_u *name, buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00060">textprop.c:60</a></div></div>
<div class="ttc" id="textprop_8c_html_ae6da2049141a445c4e2232e539fcce05"><div class="ttname"><a href="textprop_8c.html#ae6da2049141a445c4e2232e539fcce05">adjust_prop_columns</a></div><div class="ttdeci">int adjust_prop_columns(linenr_T lnum, colnr_T col, int bytes_added, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l01034">textprop.c:1034</a></div></div>
<div class="ttc" id="textprop_8c_html_af817decf99a3a09eb01c398f4b25eb99"><div class="ttname"><a href="textprop_8c.html#af817decf99a3a09eb01c398f4b25eb99">clear_ht_prop_types</a></div><div class="ttdeci">static void clear_ht_prop_types(hashtab_T *ht)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00976">textprop.c:976</a></div></div>
<div class="ttc" id="highlight_8c_html_a453301a0803cdd006df65350a2a79546"><div class="ttname"><a href="highlight_8c.html#a453301a0803cdd006df65350a2a79546">syn_id2name</a></div><div class="ttdeci">char_u * syn_id2name(int id)</div><div class="ttdef"><b>Definition:</b> <a href="highlight_8c_source.html#l02953">highlight.c:2953</a></div></div>
<div class="ttc" id="dosinst_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00068">dosinst.h:68</a></div></div>
<div class="ttc" id="structfile__buffer_html_ae5baea5400f6dbb0dbc24986c4da2f7b"><div class="ttname"><a href="structfile__buffer.html#ae5baea5400f6dbb0dbc24986c4da2f7b">file_buffer::b_fnum</a></div><div class="ttdeci">int b_fnum</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02270">structs.h:2270</a></div></div>
<div class="ttc" id="structtypval___t_html_a3e158fa0e1ba87a1a739a476845dc6fc"><div class="ttname"><a href="structtypval___t.html#a3e158fa0e1ba87a1a739a476845dc6fc">typval_T::v_dict</a></div><div class="ttdeci">dict_T * v_dict</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01344">structs.h:1344</a></div></div>
<div class="ttc" id="dict_8c_html_aa9ab744cd9a8ef358ec9b941e4d27604"><div class="ttname"><a href="dict_8c.html#aa9ab744cd9a8ef358ec9b941e4d27604">dict_find</a></div><div class="ttdeci">dictitem_T * dict_find(dict_T *d, char_u *key, int len)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00560">dict.c:560</a></div></div>
<div class="ttc" id="structtextprop___s_html"><div class="ttname"><a href="structtextprop___s.html">textprop_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00742">structs.h:742</a></div></div>
<div class="ttc" id="undo_8c_html_a28dcc7cb4dde5309a7cbca2d62761022"><div class="ttname"><a href="undo_8c.html#a28dcc7cb4dde5309a7cbca2d62761022">u_savesub</a></div><div class="ttdeci">int u_savesub(linenr_T lnum)</div><div class="ttdef"><b>Definition:</b> <a href="undo_8c_source.html#l00270">undo.c:270</a></div></div>
<div class="ttc" id="structhashitem___s_html"><div class="ttname"><a href="structhashitem___s.html">hashitem_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01217">structs.h:1217</a></div></div>
<div class="ttc" id="textprop_8c_html_a8a110bc8a1e5e04aeeb1a9dadfe0b8c3"><div class="ttname"><a href="textprop_8c.html#a8a110bc8a1e5e04aeeb1a9dadfe0b8c3">list_types</a></div><div class="ttdeci">static void list_types(hashtab_T *ht, list_T *l)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00929">textprop.c:929</a></div></div>
<div class="ttc" id="structs_8h_html_ad2df9991ef69c281e2c46a0b9473dc06"><div class="ttname"><a href="structs_8h.html#ad2df9991ef69c281e2c46a0b9473dc06">TP_FLAG_CONT_PREV</a></div><div class="ttdeci">#define TP_FLAG_CONT_PREV</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00752">structs.h:752</a></div></div>
<div class="ttc" id="vim_8h_html_aa9cea5fcb1483307770f365fb24aa08d"><div class="ttname"><a href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a></div><div class="ttdeci">#define STRCPY(d, s)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01590">vim.h:1590</a></div></div>
<div class="ttc" id="structmemline_html_ae775dd7dfa8b3dcaa01a9b3fa030371a"><div class="ttname"><a href="structmemline.html#ae775dd7dfa8b3dcaa01a9b3fa030371a">memline::ml_line_len</a></div><div class="ttdeci">colnr_T ml_line_len</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00723">structs.h:723</a></div></div>
<div class="ttc" id="structtextprop___s_html_a01dfe881b1438f9c53dcdd63e76f3fbd"><div class="ttname"><a href="structtextprop___s.html#a01dfe881b1438f9c53dcdd63e76f3fbd">textprop_S::tp_type</a></div><div class="ttdeci">int tp_type</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00747">structs.h:747</a></div></div>
<div class="ttc" id="hashtab_8c_html_af1235e0f7163089ec19df22a8af6d996"><div class="ttname"><a href="hashtab_8c.html#af1235e0f7163089ec19df22a8af6d996">hash_add</a></div><div class="ttdeci">int hash_add(hashtab_T *ht, char_u *key)</div><div class="ttdef"><b>Definition:</b> <a href="hashtab_8c_source.html#l00207">hashtab.c:207</a></div></div>
<div class="ttc" id="dict_8c_html_a1b581a492dfc8329a74ec91f4c209234"><div class="ttname"><a href="dict_8c.html#a1b581a492dfc8329a74ec91f4c209234">rettv_dict_alloc</a></div><div class="ttdeci">int rettv_dict_alloc(typval_T *rettv)</div><div class="ttdef"><b>Definition:</b> <a href="dict_8c_source.html#l00078">dict.c:78</a></div></div>
<div class="ttc" id="structhashtable___s_html_a7cfd4386f392f78cfca0fec4e1188156"><div class="ttname"><a href="structhashtable___s.html#a7cfd4386f392f78cfca0fec4e1188156">hashtable_S::ht_array</a></div><div class="ttdeci">hashitem_T * ht_array</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01242">structs.h:1242</a></div></div>
<div class="ttc" id="structtypval___t_html_a4a097c53f448d2cf81e15a6729228ae3"><div class="ttname"><a href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">typval_T::v_type</a></div><div class="ttdeci">vartype_T v_type</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01334">structs.h:1334</a></div></div>
<div class="ttc" id="structs_8h_html_a6daf8b4e03c36362fcadf86a894e0528"><div class="ttname"><a href="structs_8h.html#a6daf8b4e03c36362fcadf86a894e0528">HASHITEM_EMPTY</a></div><div class="ttdeci">#define HASHITEM_EMPTY(hi)</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01226">structs.h:1226</a></div></div>
<div class="ttc" id="structproptype___s_html_a6b536a9a614ea72c18ee1dafa179b87f"><div class="ttname"><a href="structproptype___s.html#a6b536a9a614ea72c18ee1dafa179b87f">proptype_S::pt_id</a></div><div class="ttdeci">int pt_id</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00759">structs.h:759</a></div></div>
<div class="ttc" id="vim_8h_html_a22743f1c6b7f2b83c4a99f8ac1a5d454"><div class="ttname"><a href="vim_8h.html#a22743f1c6b7f2b83c4a99f8ac1a5d454">ALLOC_MULT</a></div><div class="ttdeci">#define ALLOC_MULT(type, count)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01578">vim.h:1578</a></div></div>
<div class="ttc" id="vim_8h_html_a0b6f72cf6f4fbb5ac3d2afedd886d1fd"><div class="ttname"><a href="vim_8h.html#a0b6f72cf6f4fbb5ac3d2afedd886d1fd">APC_SUBSTITUTE</a></div><div class="ttdeci">#define APC_SUBSTITUTE</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l02632">vim.h:2632</a></div></div>
<div class="ttc" id="structgrowarray_html_ad98cc748707bb96fbb28f26bb44d3d65"><div class="ttname"><a href="structgrowarray.html#ad98cc748707bb96fbb28f26bb44d3d65">growarray::ga_len</a></div><div class="ttdeci">int ga_len</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00050">structs.h:50</a></div></div>
<div class="ttc" id="structtypval___t_html_aa8615bd53291928fc5adceff07d5e5bc"><div class="ttname"><a href="structtypval___t.html#aa8615bd53291928fc5adceff07d5e5bc">typval_T::v_number</a></div><div class="ttdeci">varnumber_T v_number</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01338">structs.h:1338</a></div></div>
<div class="ttc" id="hashtab_8c_html_a6acdcb55113dfca42811b53109f8b3ba"><div class="ttname"><a href="hashtab_8c.html#a6acdcb55113dfca42811b53109f8b3ba">hash_remove</a></div><div class="ttdeci">void hash_remove(hashtab_T *ht, hashitem_T *hi)</div><div class="ttdef"><b>Definition:</b> <a href="hashtab_8c_source.html#l00271">hashtab.c:271</a></div></div>
<div class="ttc" id="structs_8h_html_a1728259701820b8a8745485b2537217d"><div class="ttname"><a href="structs_8h.html#a1728259701820b8a8745485b2537217d">TP_FLAG_CONT_NEXT</a></div><div class="ttdeci">#define TP_FLAG_CONT_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00751">structs.h:751</a></div></div>
<div class="ttc" id="vim_8h_html_af20b8d139279b360b0fdeae71f8f43bc"><div class="ttname"><a href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a></div><div class="ttdeci">#define _(x)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l00560">vim.h:560</a></div></div>
<div class="ttc" id="hashtab_8c_html_a1e75fcb634cc34f2a968e47d1b37381a"><div class="ttname"><a href="hashtab_8c.html#a1e75fcb634cc34f2a968e47d1b37381a">hash_init</a></div><div class="ttdeci">void hash_init(hashtab_T *ht)</div><div class="ttdef"><b>Definition:</b> <a href="hashtab_8c_source.html#l00065">hashtab.c:65</a></div></div>
<div class="ttc" id="textprop_8c_html_a439cb8f0f70f752f77d64ebab62ee61f"><div class="ttname"><a href="textprop_8c.html#a439cb8f0f70f752f77d64ebab62ee61f">join_prop_lines</a></div><div class="ttdeci">void join_prop_lines(linenr_T lnum, char_u *newp, textprop_T **prop_lines, int *prop_lengths, int count)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l01262">textprop.c:1262</a></div></div>
<div class="ttc" id="textprop_8c_html_a8e20a6c212b74a64690843b9545d472d"><div class="ttname"><a href="textprop_8c.html#a8e20a6c212b74a64690843b9545d472d">f_prop_list</a></div><div class="ttdeci">void f_prop_list(typval_T *argvars, typval_T *rettv)</div><div class="ttdef"><b>Definition:</b> <a href="textprop_8c_source.html#l00544">textprop.c:544</a></div></div>
<div class="ttc" id="structproptype___s_html"><div class="ttname"><a href="structproptype___s.html">proptype_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00757">structs.h:757</a></div></div>
<div class="ttc" id="structmemline_html_a9adb5a08b3c01be69c98360a14937227"><div class="ttname"><a href="structmemline.html#a9adb5a08b3c01be69c98360a14937227">memline::ml_mfp</a></div><div class="ttdeci">memfile_T * ml_mfp</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00709">structs.h:709</a></div></div>
<div class="ttc" id="structgrowarray_html_a6737d3d6fada8215cbd56aed057848e9"><div class="ttname"><a href="structgrowarray.html#a6737d3d6fada8215cbd56aed057848e9">growarray::ga_data</a></div><div class="ttdeci">void * ga_data</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00054">structs.h:54</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
