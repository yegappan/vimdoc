<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Vim: /home/travis/build/yegappan/vimdoc/src/regexp.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Vim
   </div>
   <div id="projectbrief">Vim Editor Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">regexp.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="regexp_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* vi:set ts=8 sts=4 sw=4 noet:</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Handling of regular expressions: vim_regcomp(), vim_regexec(), vim_regsub()</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">// By default: do not create debugging logs or files related to regular</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// expressions, even when compiling with -DDEBUG.</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// Uncomment the second line to get the regexp debugging.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#undef DEBUG</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// #define DEBUG</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="vim_8h.html">vim.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">/* show/save debugging data when BT engine is used */</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor"># define BT_REGEXP_DUMP</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">/* save the debugging data to a file instead of displaying it */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor"># define BT_REGEXP_LOG</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor"># define BT_REGEXP_DEBUG_LOG</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor"># define BT_REGEXP_DEBUG_LOG_NAME   &quot;bt_regexp_debug.log&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * Magic characters have a special meaning, they don&#39;t match literally.</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * Magic characters are negative.  This separates them from literal characters</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * (possibly multi-byte).  Only ASCII characters can be Magic.</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">   28</a></span>&#160;<span class="preprocessor">#define Magic(x)    ((int)(x) - 256)</span></div><div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="regexp_8c.html#acc98f25a4f94e6bc0113fad8a44d5308">   29</a></span>&#160;<span class="preprocessor">#define un_Magic(x) ((x) + 256)</span></div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="regexp_8c.html#ada5158c5ec499a6e2ad6c5b4b0a5fce1">   30</a></span>&#160;<span class="preprocessor">#define is_Magic(x) ((x) &lt; 0)</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00033"></a><span class="lineno"><a class="line" href="regexp_8c.html#a742a7b81fb4074f0ec3ba585b6d6c550">   33</a></span>&#160;<a class="code" href="regexp_8c.html#a742a7b81fb4074f0ec3ba585b6d6c550">no_Magic</a>(<span class="keywordtype">int</span> x)</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ada5158c5ec499a6e2ad6c5b4b0a5fce1">is_Magic</a>(x))</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#acc98f25a4f94e6bc0113fad8a44d5308">un_Magic</a>(x);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordflow">return</span> x;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="regexp_8c.html#a5d689700d06c3e06008805c1551467ce">   41</a></span>&#160;<a class="code" href="regexp_8c.html#a5d689700d06c3e06008805c1551467ce">toggle_Magic</a>(<span class="keywordtype">int</span> x)</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ada5158c5ec499a6e2ad6c5b4b0a5fce1">is_Magic</a>(x))</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#acc98f25a4f94e6bc0113fad8a44d5308">un_Magic</a>(x);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(x);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;}</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment"> * The first byte of the BT regexp internal &quot;program&quot; is actually this magic</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"> * number; the start node begins in the second byte.  It&#39;s used to catch the</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment"> * most severe mutilation of the program by the caller.</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="regexp_8c.html#acfe56a0f73a4952db24dfeb4b15ffd8c">   54</a></span>&#160;<span class="preprocessor">#define REGMAGIC    0234</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment"> * Utility definitions.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="regexp_8c.html#a9516e7f9f8711efcb0d381cb09e8f3c5">   59</a></span>&#160;<span class="preprocessor">#define UCHARAT(p)  ((int)*(char_u *)(p))</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">/* Used for an error (down from) vim_regcomp(): give the error message, set</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"> * rc_did_emsg and return NULL */</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab498bcac51faeb44bca0b42be21ac40f">   63</a></span>&#160;<span class="preprocessor">#define EMSG_RET_NULL(m) return (emsg((m)), rc_did_emsg = TRUE, (void *)NULL)</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad62bf91b6d5f859986a68dfde789d533">   64</a></span>&#160;<span class="preprocessor">#define IEMSG_RET_NULL(m) return (iemsg((m)), rc_did_emsg = TRUE, (void *)NULL)</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="regexp_8c.html#a9ea93cc4e66f5146ddd59535ba2b910e">   65</a></span>&#160;<span class="preprocessor">#define EMSG_RET_FAIL(m) return (emsg((m)), rc_did_emsg = TRUE, FAIL)</span></div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="regexp_8c.html#a588812bb341d1ce8a7e07d302861c06c">   66</a></span>&#160;<span class="preprocessor">#define EMSG2_RET_NULL(m, c) return (semsg((const char *)(m), (c) ? &quot;&quot; : &quot;\\&quot;), rc_did_emsg = TRUE, (void *)NULL)</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad2f79ca685f6f1e5a0970cfa0f13d2d3">   67</a></span>&#160;<span class="preprocessor">#define EMSG3_RET_NULL(m, c, a) return (semsg((const char *)(m), (c) ? &quot;&quot; : &quot;\\&quot;, (a)), rc_did_emsg = TRUE, (void *)NULL)</span></div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="regexp_8c.html#af082cfea994077d5a3da04843b1dd7e0">   68</a></span>&#160;<span class="preprocessor">#define EMSG2_RET_FAIL(m, c) return (semsg((const char *)(m), (c) ? &quot;&quot; : &quot;\\&quot;), rc_did_emsg = TRUE, FAIL)</span></div><div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="regexp_8c.html#a8eb17ffc0c00747403dc677d20727c84">   69</a></span>&#160;<span class="preprocessor">#define EMSG_ONE_RET_NULL EMSG2_RET_NULL(_(&quot;E369: invalid item in %s%%[]&quot;), reg_magic == MAGIC_ALL)</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab0d690a0d4a93666d44346dfd058ada0">   72</a></span>&#160;<span class="preprocessor">#define MAX_LIMIT   (32767L &lt;&lt; 16L)</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="regexp_8c.html#af20613961f0779bdd4c923cf3ed99aa8">   74</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#af20613961f0779bdd4c923cf3ed99aa8">e_missingbracket</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E769: Missing ] after %s[&quot;</span>);</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="regexp_8c.html#a482cfb3cd6688b47e85dee5d807e796d">   75</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a482cfb3cd6688b47e85dee5d807e796d">e_reverse_range</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E944: Reverse range in character class&quot;</span>);</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="regexp_8c.html#aef2444bdaedc85e8ef06dca82be1b5ab">   76</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#aef2444bdaedc85e8ef06dca82be1b5ab">e_large_class</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E945: Range too large in character class&quot;</span>);</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="regexp_8c.html#a89f6a07ca5bdcadb5ab7e442b520175d">   77</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a89f6a07ca5bdcadb5ab7e442b520175d">e_unmatchedpp</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E53: Unmatched %s%%(&quot;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="regexp_8c.html#a05cbcd9ba8cb8de2c3a20323915a193f">   78</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a05cbcd9ba8cb8de2c3a20323915a193f">e_unmatchedp</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E54: Unmatched %s(&quot;</span>);</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="regexp_8c.html#a05df9f80a04c4a8395b28f7f4961dddf">   79</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a05df9f80a04c4a8395b28f7f4961dddf">e_unmatchedpar</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E55: Unmatched %s)&quot;</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l00081"></a><span class="lineno"><a class="line" href="regexp_8c.html#a74a08ee662dd2e910f06e815adfcc0df">   81</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a74a08ee662dd2e910f06e815adfcc0df">e_z_not_allowed</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E66: \\z( not allowed here&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="regexp_8c.html#a422a17b780e9f598f934c853d6f9dcd1">   82</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a422a17b780e9f598f934c853d6f9dcd1">e_z1_not_allowed</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E67: \\z1 - \\z9 not allowed here&quot;</span>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="regexp_8c.html#add6fd21c9929e9ac76661c9c79c57a44">   84</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#add6fd21c9929e9ac76661c9c79c57a44">e_missing_sb</a>[] = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E69: Missing ] after %s%%[&quot;</span>);</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="regexp_8c.html#a229ec687979046a5dd50630a0da9f343">   85</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a229ec687979046a5dd50630a0da9f343">e_empty_sb</a>[]  = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E70: Empty %s%%[]&quot;</span>);</div><div class="line"><a name="l00086"></a><span class="lineno"><a class="line" href="regexp_8c.html#a5e7db5a0ca4f89fdf364acc3839435ff">   86</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a5e7db5a0ca4f89fdf364acc3839435ff">e_recursive</a>[]  = <a class="code" href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a>(<span class="stringliteral">&quot;E956: Cannot use pattern recursively&quot;</span>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2e0ab48b2dae9064b2d9a43786e53f13">   88</a></span>&#160;<span class="preprocessor">#define NOT_MULTI   0</span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="regexp_8c.html#a17de9a9aceb1d9fa93139afe29230769">   89</a></span>&#160;<span class="preprocessor">#define MULTI_ONE   1</span></div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="regexp_8c.html#a56cd45f8ad6a13f958427ad4bf7ed7a1">   90</a></span>&#160;<span class="preprocessor">#define MULTI_MULT  2</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">// return values for regmatch()</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="regexp_8c.html#a501c5953f3d8e248063f076d95c424f9">   93</a></span>&#160;<span class="preprocessor">#define RA_FAIL     1   </span><span class="comment">/* something failed, abort */</span><span class="preprocessor"></span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="regexp_8c.html#a850e2915970f76e4b2b4fd8f41540e2e">   94</a></span>&#160;<span class="preprocessor">#define RA_CONT     2   </span><span class="comment">/* continue in inner loop */</span><span class="preprocessor"></span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa9548379ae846ca9db6e16a59a61f5a9">   95</a></span>&#160;<span class="preprocessor">#define RA_BREAK    3   </span><span class="comment">/* break inner loop */</span><span class="preprocessor"></span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae7b1fa1508ffb8177970993fb004b970">   96</a></span>&#160;<span class="preprocessor">#define RA_MATCH    4   </span><span class="comment">/* successful match */</span><span class="preprocessor"></span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="regexp_8c.html#a3b77f97627d25f5564e3b6ad8c529d8b">   97</a></span>&#160;<span class="preprocessor">#define RA_NOMATCH  5   </span><span class="comment">/* didn&#39;t match */</span><span class="preprocessor"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment"> * Return NOT_MULTI if c is not a &quot;multi&quot; operator.</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> * Return MULTI_ONE if c is a single &quot;multi&quot; operator.</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"> * Return MULTI_MULT if c is a multi &quot;multi&quot; operator.</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="regexp_8c.html#a9289fd60d49c1a7f8f18818cdffdf29d">  105</a></span>&#160;<a class="code" href="regexp_8c.html#a9289fd60d49c1a7f8f18818cdffdf29d">re_multi_type</a>(<span class="keywordtype">int</span> c)</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordflow">if</span> (c == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;@&#39;</span>) || c == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;=&#39;</span>) || c == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;?&#39;</span>))</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a17de9a9aceb1d9fa93139afe29230769">MULTI_ONE</a>;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (c == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;*&#39;</span>) || c == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;+&#39;</span>) || c == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;{&#39;</span>))</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a56cd45f8ad6a13f958427ad4bf7ed7a1">MULTI_MULT</a>;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a2e0ab48b2dae9064b2d9a43786e53f13">NOT_MULTI</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">  114</a></span>&#160;<span class="keyword">static</span> char_u       *<a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a> = NULL;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment"> * REGEXP_INRANGE contains all characters which are always special in a []</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"> * range after &#39;\&#39;.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"> * REGEXP_ABBR contains all characters which act as abbreviations after &#39;\&#39;.</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"> * These are:</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment"> *  \n  - New line (NL).</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"> *  \r  - Carriage Return (CR).</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment"> *  \t  - Tab (TAB).</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"> *  \e  - Escape (ESC).</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"> *  \b  - Backspace (Ctrl_H).</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"> *  \d  - Character code in decimal, eg \d123</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> *  \o  - Character code in octal, eg \o80</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> *  \x  - Character code in hex, eg \x4a</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment"> *  \u  - Multibyte character code, eg \u20ac</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment"> *  \U  - Long multibyte character code, eg \U12345678</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="regexp_8c.html#a841be044df265f2b67f1224c9d155cf0">  132</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a841be044df265f2b67f1224c9d155cf0">REGEXP_INRANGE</a>[] = <span class="stringliteral">&quot;]^-n\\&quot;</span>;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="regexp_8c.html#a7674475ca89598eec9cdb67f132c6289">  133</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a7674475ca89598eec9cdb67f132c6289">REGEXP_ABBR</a>[] = <span class="stringliteral">&quot;nrtebdoxuU&quot;</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"> * Translate &#39;\x&#39; to its control character, except &quot;\n&quot;, which is Magic.</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00139"></a><span class="lineno"><a class="line" href="regexp_8c.html#a5b439799fae05f45aca87aab1721a34a">  139</a></span>&#160;<a class="code" href="regexp_8c.html#a5b439799fae05f45aca87aab1721a34a">backslash_trans</a>(<span class="keywordtype">int</span> c)</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">switch</span> (c)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:   <span class="keywordflow">return</span> <a class="code" href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a>;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:   <span class="keywordflow">return</span> <a class="code" href="ascii_8h.html#ad58a1fbfc85c7e4790fc55e654f50221">TAB</a>;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:   <span class="keywordflow">return</span> <a class="code" href="ascii_8h.html#a4af1b6159e447ba72652bb7fcdfa726e">ESC</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:   <span class="keywordflow">return</span> <a class="code" href="ascii_8h.html#a580a88f98668df1ac5e1683cae31c0b3">BS</a>;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> c;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment"> * Check for a character class name &quot;[:name:]&quot;.  &quot;pp&quot; points to the &#39;[&#39;.</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * Returns one of the CLASS_ items. CLASS_NONE means that no item was</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> * recognized.  Otherwise &quot;pp&quot; is advanced to after the item.</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="regexp_8c.html#a20101a2a14e94b74196a0c913db33ab7">  157</a></span>&#160;<a class="code" href="regexp_8c.html#a20101a2a14e94b74196a0c913db33ab7">get_char_class</a>(char_u **pp)</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;{</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *(class_names[]) =</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="stringliteral">&quot;alnum:]&quot;</span>,</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">#define CLASS_ALNUM 0</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="stringliteral">&quot;alpha:]&quot;</span>,</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#define CLASS_ALPHA 1</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="stringliteral">&quot;blank:]&quot;</span>,</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="preprocessor">#define CLASS_BLANK 2</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="stringliteral">&quot;cntrl:]&quot;</span>,</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">#define CLASS_CNTRL 3</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="stringliteral">&quot;digit:]&quot;</span>,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">#define CLASS_DIGIT 4</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="stringliteral">&quot;graph:]&quot;</span>,</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#define CLASS_GRAPH 5</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="stringliteral">&quot;lower:]&quot;</span>,</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor">#define CLASS_LOWER 6</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="stringliteral">&quot;print:]&quot;</span>,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#define CLASS_PRINT 7</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="stringliteral">&quot;punct:]&quot;</span>,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor">#define CLASS_PUNCT 8</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="stringliteral">&quot;space:]&quot;</span>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#define CLASS_SPACE 9</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="stringliteral">&quot;upper:]&quot;</span>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor">#define CLASS_UPPER 10</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="stringliteral">&quot;xdigit:]&quot;</span>,</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#define CLASS_XDIGIT 11</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="stringliteral">&quot;tab:]&quot;</span>,</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#define CLASS_TAB 12</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="stringliteral">&quot;return:]&quot;</span>,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#define CLASS_RETURN 13</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="stringliteral">&quot;backspace:]&quot;</span>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="preprocessor">#define CLASS_BACKSPACE 14</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="stringliteral">&quot;escape:]&quot;</span>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="preprocessor">#define CLASS_ESCAPE 15</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="stringliteral">&quot;ident:]&quot;</span>,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="preprocessor">#define CLASS_IDENT 16</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="stringliteral">&quot;keyword:]&quot;</span>,</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="preprocessor">#define CLASS_KEYWORD 17</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="stringliteral">&quot;fname:]&quot;</span>,</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="preprocessor">#define CLASS_FNAME 18</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    };</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="preprocessor">#define CLASS_NONE 99</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> ((*pp)[1] == <span class="charliteral">&#39;:&#39;</span>)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; (int)(<span class="keyword">sizeof</span>(class_names) / <span class="keyword">sizeof</span>(*class_names)); ++i)</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="vim_8h.html#a5f1ef744c34be69aec1531f1fe604a9b">STRNCMP</a>(*pp + 2, class_names[i], <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(class_names[i])) == 0)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        *pp += <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(class_names[i]) + 2;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <span class="keywordflow">return</span> i;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    }</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#ab27e8d8459fdfdc88557c40b8cb1ac8d">CLASS_NONE</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;}</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment"> * Specific version of character class functions.</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> * Using a table to keep this fast.</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">  219</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">short</span>    <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[256];</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="regexp_8c.html#adeefddda59520e626c2ca6bf4f8f1ecd">  221</a></span>&#160;<span class="preprocessor">#define     RI_DIGIT    0x01</span></div><div class="line"><a name="l00222"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa63acc1189593a155295e9a31d832fbf">  222</a></span>&#160;<span class="preprocessor">#define     RI_HEX  0x02</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="regexp_8c.html#a3b065e4736e7ac58e089404e2bd25ca8">  223</a></span>&#160;<span class="preprocessor">#define     RI_OCTAL    0x04</span></div><div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa143243bda3abc5e824070ef85e66103">  224</a></span>&#160;<span class="preprocessor">#define     RI_WORD 0x08</span></div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">  225</a></span>&#160;<span class="preprocessor">#define     RI_HEAD 0x10</span></div><div class="line"><a name="l00226"></a><span class="lineno"><a class="line" href="regexp_8c.html#af341fa89fd5e7c4d161524c5b29b0b1c">  226</a></span>&#160;<span class="preprocessor">#define     RI_ALPHA    0x20</span></div><div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa6478def4dec44cbd90722b1c1bfa107">  227</a></span>&#160;<span class="preprocessor">#define     RI_LOWER    0x40</span></div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="regexp_8c.html#afde509b0991af1a45c85dfc930cc71b3">  228</a></span>&#160;<span class="preprocessor">#define     RI_UPPER    0x80</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="regexp_8c.html#aae14f81a2b8e3200168fa49ed49ec02e">  229</a></span>&#160;<span class="preprocessor">#define     RI_WHITE    0x100</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2664ca435ed6f3f4bb2184ad3acc1f45">  232</a></span>&#160;<a class="code" href="regexp_8c.html#a2664ca435ed6f3f4bb2184ad3acc1f45">init_class_tab</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span>  done = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (done)</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 256; ++i)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">if</span> (i &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;7&#39;</span>)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = <a class="code" href="regexp_8c.html#adeefddda59520e626c2ca6bf4f8f1ecd">RI_DIGIT</a> + <a class="code" href="regexp_8c.html#aa63acc1189593a155295e9a31d832fbf">RI_HEX</a> + <a class="code" href="regexp_8c.html#a3b065e4736e7ac58e089404e2bd25ca8">RI_OCTAL</a> + <a class="code" href="regexp_8c.html#aa143243bda3abc5e824070ef85e66103">RI_WORD</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <span class="charliteral">&#39;8&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;9&#39;</span>)</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = <a class="code" href="regexp_8c.html#adeefddda59520e626c2ca6bf4f8f1ecd">RI_DIGIT</a> + <a class="code" href="regexp_8c.html#aa63acc1189593a155295e9a31d832fbf">RI_HEX</a> + <a class="code" href="regexp_8c.html#aa143243bda3abc5e824070ef85e66103">RI_WORD</a>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;f&#39;</span>)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = <a class="code" href="regexp_8c.html#aa63acc1189593a155295e9a31d832fbf">RI_HEX</a> + RI_WORD + <a class="code" href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">RI_HEAD</a> + <a class="code" href="regexp_8c.html#af341fa89fd5e7c4d161524c5b29b0b1c">RI_ALPHA</a> + <a class="code" href="regexp_8c.html#aa6478def4dec44cbd90722b1c1bfa107">RI_LOWER</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#ifdef EBCDIC</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((i &gt;= <span class="charliteral">&#39;g&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;i&#39;</span>) || (i &gt;= <span class="charliteral">&#39;j&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;r&#39;</span>)</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                            || (i &gt;= <span class="charliteral">&#39;s&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;z&#39;</span>))</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <span class="charliteral">&#39;g&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;z&#39;</span>)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = RI_WORD + <a class="code" href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">RI_HEAD</a> + <a class="code" href="regexp_8c.html#af341fa89fd5e7c4d161524c5b29b0b1c">RI_ALPHA</a> + <a class="code" href="regexp_8c.html#aa6478def4dec44cbd90722b1c1bfa107">RI_LOWER</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;F&#39;</span>)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = <a class="code" href="regexp_8c.html#aa63acc1189593a155295e9a31d832fbf">RI_HEX</a> + RI_WORD + <a class="code" href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">RI_HEAD</a> + <a class="code" href="regexp_8c.html#af341fa89fd5e7c4d161524c5b29b0b1c">RI_ALPHA</a> + <a class="code" href="regexp_8c.html#afde509b0991af1a45c85dfc930cc71b3">RI_UPPER</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor">#ifdef EBCDIC</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((i &gt;= <span class="charliteral">&#39;G&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;I&#39;</span>) || ( i &gt;= <span class="charliteral">&#39;J&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;R&#39;</span>)</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                            || (i &gt;= <span class="charliteral">&#39;S&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;Z&#39;</span>))</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <span class="charliteral">&#39;G&#39;</span> &amp;&amp; i &lt;= <span class="charliteral">&#39;Z&#39;</span>)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = RI_WORD + <a class="code" href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">RI_HEAD</a> + <a class="code" href="regexp_8c.html#af341fa89fd5e7c4d161524c5b29b0b1c">RI_ALPHA</a> + <a class="code" href="regexp_8c.html#afde509b0991af1a45c85dfc930cc71b3">RI_UPPER</a>;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == <span class="charliteral">&#39;_&#39;</span>)</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = RI_WORD + <a class="code" href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">RI_HEAD</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[i] = 0;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[<span class="charliteral">&#39; &#39;</span>] |= <a class="code" href="regexp_8c.html#aae14f81a2b8e3200168fa49ed49ec02e">RI_WHITE</a>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a>[<span class="charliteral">&#39;\t&#39;</span>] |= <a class="code" href="regexp_8c.html#aae14f81a2b8e3200168fa49ed49ec02e">RI_WHITE</a>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    done = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="regexp_8c.html#a1e8b57c93be74f5aa8be91eacec6c73b">  274</a></span>&#160;<span class="preprocessor">#define ri_digit(c) (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_DIGIT))</span></div><div class="line"><a name="l00275"></a><span class="lineno"><a class="line" href="regexp_8c.html#a06589dcb2c24445d88a04db00c5695db">  275</a></span>&#160;<span class="preprocessor">#define ri_hex(c)   (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_HEX))</span></div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad756c2d1e68a42ebf79a89753e0ac341">  276</a></span>&#160;<span class="preprocessor">#define ri_octal(c) (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_OCTAL))</span></div><div class="line"><a name="l00277"></a><span class="lineno"><a class="line" href="regexp_8c.html#a65b6e715b0263890dc5a7d592a674d1c">  277</a></span>&#160;<span class="preprocessor">#define ri_word(c)  (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_WORD))</span></div><div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa32b179347b5a727e84b767b049ff9b8">  278</a></span>&#160;<span class="preprocessor">#define ri_head(c)  (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_HEAD))</span></div><div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="regexp_8c.html#a559f3af138fee8c39d584f7a2054acc2">  279</a></span>&#160;<span class="preprocessor">#define ri_alpha(c) (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_ALPHA))</span></div><div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa4ddf142f4dca56d460b6de335b98e60">  280</a></span>&#160;<span class="preprocessor">#define ri_lower(c) (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_LOWER))</span></div><div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad6c868b4247c93854da586305a1e8789">  281</a></span>&#160;<span class="preprocessor">#define ri_upper(c) (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_UPPER))</span></div><div class="line"><a name="l00282"></a><span class="lineno"><a class="line" href="regexp_8c.html#a413fd9f99a97a8750be36649a3c4318b">  282</a></span>&#160;<span class="preprocessor">#define ri_white(c) (c &lt; 0x100 &amp;&amp; (class_tab[c] &amp; RI_WHITE))</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">/* flags for regflags */</span></div><div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="regexp_8c.html#a29dfb0a6e3992d815ef2fcfd67d98605">  285</a></span>&#160;<span class="preprocessor">#define RF_ICASE    1   </span><span class="comment">/* ignore case */</span><span class="preprocessor"></span></div><div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="regexp_8c.html#a3935a4b57a8bc795917d1a01b30460ac">  286</a></span>&#160;<span class="preprocessor">#define RF_NOICASE  2   </span><span class="comment">/* don&#39;t ignore case */</span><span class="preprocessor"></span></div><div class="line"><a name="l00287"></a><span class="lineno"><a class="line" href="regexp_8c.html#a5ac2e6b5dc43654bbe0911fd13d632b0">  287</a></span>&#160;<span class="preprocessor">#define RF_HASNL    4   </span><span class="comment">/* can match a NL */</span><span class="preprocessor"></span></div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="regexp_8c.html#af7fcaaa068cbb48ad0b787beca6102be">  288</a></span>&#160;<span class="preprocessor">#define RF_ICOMBINE 8   </span><span class="comment">/* ignore combining characters */</span><span class="preprocessor"></span></div><div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6cddf5002098c696ce95d8e18c76f284">  289</a></span>&#160;<span class="preprocessor">#define RF_LOOKBH   16  </span><span class="comment">/* uses &quot;\@&lt;=&quot; or &quot;\@&lt;!&quot; */</span><span class="preprocessor"></span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"> * Global work variables for vim_regcomp().</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">  295</a></span>&#160;<span class="keyword">static</span> char_u   *<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;  <span class="comment">/* Input-scan pointer. */</span></div><div class="line"><a name="l00296"></a><span class="lineno"><a class="line" href="regexp_8c.html#a81919d8c9eea030b6b86d6115a231f44">  296</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a81919d8c9eea030b6b86d6115a231f44">regnpar</a>;    <span class="comment">/* () count. */</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="regexp_8c.html#a185ef4507bed93cc591e199003232473">  298</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a185ef4507bed93cc591e199003232473">regnzpar</a>;   <span class="comment">/* \z() count. */</span></div><div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="regexp_8c.html#a003e85839832bfb75a0d019d573f58e4">  299</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a003e85839832bfb75a0d019d573f58e4">re_has_z</a>;   <span class="comment">/* \z item detected */</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00301"></a><span class="lineno"><a class="line" href="regexp_8c.html#a751f9427045bd908e2da7211aabd2683">  301</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="regexp_8c.html#a751f9427045bd908e2da7211aabd2683">regflags</a>;   <span class="comment">/* RF_ flags for prog */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="preprocessor">#if defined(FEAT_SYN_HL) || defined(PROTO)</span></div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="regexp_8c.html#afff9a44eced3c9b899398988cfe7e474">  303</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#afff9a44eced3c9b899398988cfe7e474">had_eol</a>;    <span class="comment">/* TRUE when EOL found by vim_regcomp() */</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div><div class="line"><a name="l00306"></a><span class="lineno"><a class="line" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">  306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a>;  <span class="comment">/* magicness of the pattern: */</span></div><div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="regexp_8c.html#affd74523395f3a98d1234b0bd8a97940">  307</a></span>&#160;<span class="preprocessor">#define MAGIC_NONE  1   </span><span class="comment">/* &quot;\V&quot; very unmagic */</span><span class="preprocessor"></span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="regexp_8c.html#af7e8c489405bf8f0c2684981ac9324da">  308</a></span>&#160;<span class="preprocessor">#define MAGIC_OFF   2   </span><span class="comment">/* &quot;\M&quot; or &#39;magic&#39; off */</span><span class="preprocessor"></span></div><div class="line"><a name="l00309"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae4026f0b0121d99d923d7b284d4d1fcc">  309</a></span>&#160;<span class="preprocessor">#define MAGIC_ON    3   </span><span class="comment">/* &quot;\m&quot; or &#39;magic&#39; */</span><span class="preprocessor"></span></div><div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">  310</a></span>&#160;<span class="preprocessor">#define MAGIC_ALL   4   </span><span class="comment">/* &quot;\v&quot; very magic */</span><span class="preprocessor"></span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="regexp_8c.html#a3f9b229cfd40b1d4cb87d53b3c7c4bcc">  312</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a3f9b229cfd40b1d4cb87d53b3c7c4bcc">reg_string</a>; <span class="comment">/* matching with a string instead of a buffer</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">                   line */</span></div><div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="regexp_8c.html#a18d2339761cde0a3010d7be24de2e60a">  314</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a18d2339761cde0a3010d7be24de2e60a">reg_strict</a>; <span class="comment">/* &quot;[abc&quot; is illegal */</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment"> * META contains all characters that may be magic, except &#39;^&#39; and &#39;$&#39;.</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="preprocessor">#ifdef EBCDIC</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="keyword">static</span> char_u META[] = <span class="stringliteral">&quot;%&amp;()*+.123456789&lt;=&gt;?@ACDFHIKLMOPSUVWX[_acdfhiklmnopsuvwxz{|~&quot;</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/* META[] is used often enough to justify turning it into a table. */</span></div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="regexp_8c.html#a1aeb4e49c7371629f26e72134d494ab7">  324</a></span>&#160;<span class="keyword">static</span> char_u <a class="code" href="regexp_8c.html#a1aeb4e49c7371629f26e72134d494ab7">META_flags</a>[] = {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">/*         %  &amp;     (  )  *  +        .    */</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0,</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">/*     1  2  3  4  5  6  7  8  9    &lt;  =  &gt;  ? */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">/*  @  A     C  D     F     H  I     K  L  M     O */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    1, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1,</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">/*  P        S     U  V  W  X     Z  [       _ */</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">/*     a     c  d     f     h  i     k  l  m  n  o */</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    0, 1, 0, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">/*  p        s     u  v  w  x     z  {  |     ~    */</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    1, 0, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;};</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">  342</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>;     <span class="comment">/* currently parsed character */</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">/* Previous character.  Note: prevchr is sometimes -1 when we are not at the</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> * start, eg in /[ ^I]^ the pattern was never found even if it existed,</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment"> * because ^ was taken to be magic -- webb */</span></div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">  346</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a>;</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">  347</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a>;    <span class="comment">/* previous-previous character */</span></div><div class="line"><a name="l00348"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">  348</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a>;    <span class="comment">/* used for ungetchr() */</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">/* arguments for reg() */</span></div><div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6f8952817baf590bdb48586a9d24c67d">  351</a></span>&#160;<span class="preprocessor">#define REG_NOPAREN 0   </span><span class="comment">/* toplevel reg() */</span><span class="preprocessor"></span></div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="regexp_8c.html#a596cd945064a850d8ad29e5b0b399d0a">  352</a></span>&#160;<span class="preprocessor">#define REG_PAREN   1   </span><span class="comment">/* \(\) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="regexp_8c.html#a7c7739ac380aff2a72407d8789d1f9b8">  353</a></span>&#160;<span class="preprocessor">#define REG_ZPAREN  2   </span><span class="comment">/* \z(\) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00354"></a><span class="lineno"><a class="line" href="regexp_8c.html#a86c8dcfc36ae74f1fa3471cad405f8d6">  354</a></span>&#160;<span class="preprocessor">#define REG_NPAREN  3   </span><span class="comment">/* \%(\) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="structparse__state___t.html">  356</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="structparse__state___t.html#ad6727770bac8c82102251b1ca8efbc6b">  358</a></span>&#160;     char_u *<a class="code" href="structparse__state___t.html#ad6727770bac8c82102251b1ca8efbc6b">regparse</a>;</div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="structparse__state___t.html#a0f0ead30a6f2059a84c8641af2e7a89f">  359</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#a0f0ead30a6f2059a84c8641af2e7a89f">prevchr_len</a>;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="structparse__state___t.html#aa88b7450a01ee45fa82cad8447f9398f">  360</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#aa88b7450a01ee45fa82cad8447f9398f">curchr</a>;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="structparse__state___t.html#a1c12485c167c302ea2b5f5eecfa16d6c">  361</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#a1c12485c167c302ea2b5f5eecfa16d6c">prevchr</a>;</div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="structparse__state___t.html#a5e86ee5b6c84c567ec223e3415ea1c1b">  362</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#a5e86ee5b6c84c567ec223e3415ea1c1b">prevprevchr</a>;</div><div class="line"><a name="l00363"></a><span class="lineno"><a class="line" href="structparse__state___t.html#ae7541db3451267004f7c4d0f7d3624f0">  363</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#ae7541db3451267004f7c4d0f7d3624f0">nextchr</a>;</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="structparse__state___t.html#a30a351eaf2afe86a0688c2697164e603">  364</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#a30a351eaf2afe86a0688c2697164e603">at_start</a>;</div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="structparse__state___t.html#a584de1bd523ad7deb8c699fe98ee224a">  365</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#a584de1bd523ad7deb8c699fe98ee224a">prev_at_start</a>;</div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="structparse__state___t.html#a41d00fd7b03eda69b7451b730700648e">  366</a></span>&#160;     <span class="keywordtype">int</span>    <a class="code" href="structparse__state___t.html#a41d00fd7b03eda69b7451b730700648e">regnpar</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;} <a class="code" href="structparse__state___t.html">parse_state_T</a>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#a05f05ac9b422c47f5a8780086bd2f065">initchr</a>(char_u *);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a624c4be32c71b525f1d39791692ba09e">getchr</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#aa1db20edd21b74004b5c5ba0ec166ece">skipchr_keepstart</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">peekchr</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">skipchr</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#a7f3dbbaa1cbb72d5fc7a52b30a4cbf2f">ungetchr</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="keyword">static</span> <span class="keywordtype">long</span> <a class="code" href="regexp_8c.html#ad672fa1734bd44058dd7af298e27d644">gethexchrs</a>(<span class="keywordtype">int</span> maxinputlen);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="keyword">static</span> <span class="keywordtype">long</span> <a class="code" href="regexp_8c.html#aa3dc7d1facc61311070e1b7ea61b0370">getoctchrs</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keyword">static</span> <span class="keywordtype">long</span> <a class="code" href="regexp_8c.html#a47a18fefa87191bfee029a23df83dbca">getdecchrs</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a07a9df7fb28aec9b337c87064c831520">coll_get_char</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a2eae4f57e1ce78c93c4a0c4a69cc96d3">prog_magic_wrong</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a7577eec832babde787008ac19228eb49">cstrncmp</a>(char_u *s1, char_u *s2, <span class="keywordtype">int</span> *n);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="keyword">static</span> char_u   *<a class="code" href="regexp_8c.html#a4b3e3bfff3b3a2cc8c09d7c0c53ee92a">cstrchr</a>(char_u *, <span class="keywordtype">int</span>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#ab644b69b55c309c51d3a1c320f1a4c8c">re_mult_next</a>(<span class="keywordtype">char</span> *what);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a8a374f6114572cd530aee558efb56a4e">reg_iswordc</a>(<span class="keywordtype">int</span>);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="regexp_8c.html#a198f91073a4f1d29cf4a516a8b6412b3">  385</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structregengine.html">regengine_T</a> <a class="code" href="regexp_8c.html#a198f91073a4f1d29cf4a516a8b6412b3">bt_regengine</a>;</div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="regexp_8c.html#adf74187265a2755cbb10c1972d9a0d2b">  386</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structregengine.html">regengine_T</a> <a class="code" href="regexp_8c.html#adf74187265a2755cbb10c1972d9a0d2b">nfa_regengine</a>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment"> * Return TRUE if compiled regular expression &quot;prog&quot; can match a line break.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l00392"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab9e61b1216aafbd3d353948cb8f5c6e4">  392</a></span>&#160;<a class="code" href="regexp_8c.html#ab9e61b1216aafbd3d353948cb8f5c6e4">re_multiline</a>(<a class="code" href="structregprog.html">regprog_T</a> *prog)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> (prog-&gt;<a class="code" href="structregprog.html#a28d4f034bc70a65e57f536c00448d598">regflags</a> &amp; <a class="code" href="regexp_8c.html#a5ac2e6b5dc43654bbe0911fd13d632b0">RF_HASNL</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;}</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment"> * Check for an equivalence class name &quot;[=a=]&quot;.  &quot;pp&quot; points to the &#39;[&#39;.</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment"> * Returns a character representing the class. Zero means that no item was</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment"> * recognized.  Otherwise &quot;pp&quot; is advanced to after the item.</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="regexp_8c.html#aece7fc07c42c4e1c83d4ad58b7a65868">  403</a></span>&#160;<a class="code" href="regexp_8c.html#aece7fc07c42c4e1c83d4ad58b7a65868">get_equi_class</a>(char_u **pp)</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;{</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">int</span>     c;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a> = 1;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    char_u  *p = *pp;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (p[1] == <span class="charliteral">&#39;=&#39;</span> &amp;&amp; p[2] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        l = (*mb_ptr2len)(p + 2);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> (p[l + 2] == <span class="charliteral">&#39;=&#39;</span> &amp;&amp; p[l + 3] == <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        c = <a class="code" href="globals_8h.html#a2ff646629886112d5039957029690e09">mb_ptr2char</a>(p + 2);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        c = p[2];</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        *pp += l + 4;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <span class="keywordflow">return</span> c;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    }</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="preprocessor">#ifdef EBCDIC</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> * Table for equivalence class &quot;c&quot;. (IBM-1047)</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *EQUIVAL_CLASS_C[16] = {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="stringliteral">&quot;A\x62\x63\x64\x65\x66\x67&quot;</span>,</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="stringliteral">&quot;C\x68&quot;</span>,</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="stringliteral">&quot;E\x71\x72\x73\x74&quot;</span>,</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="stringliteral">&quot;I\x75\x76\x77\x78&quot;</span>,</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="stringliteral">&quot;N\x69&quot;</span>,</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="stringliteral">&quot;O\xEB\xEC\xED\xEE\xEF\x80&quot;</span>,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="stringliteral">&quot;U\xFB\xFC\xFD\xFE&quot;</span>,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="stringliteral">&quot;Y\xBA&quot;</span>,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="stringliteral">&quot;a\x42\x43\x44\x45\x46\x47&quot;</span>,</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="stringliteral">&quot;c\x48&quot;</span>,</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="stringliteral">&quot;e\x51\x52\x53\x54&quot;</span>,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="stringliteral">&quot;i\x55\x56\x57\x58&quot;</span>,</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="stringliteral">&quot;n\x49&quot;</span>,</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="stringliteral">&quot;o\xCB\xCC\xCD\xCE\xCF\x70&quot;</span>,</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="stringliteral">&quot;u\xDB\xDC\xDD\xDE&quot;</span>,</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="stringliteral">&quot;y\x8D\xDF&quot;</span>,</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;};</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment"> * Check for a collating element &quot;[.a.]&quot;.  &quot;pp&quot; points to the &#39;[&#39;.</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment"> * Returns a character. Zero means that no item was recognized.  Otherwise</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment"> * &quot;pp&quot; is advanced to after the item.</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment"> * Currently only single characters are recognized!</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00457"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6cf9e213f834085926aa8aca9939a99e">  457</a></span>&#160;<a class="code" href="regexp_8c.html#a6cf9e213f834085926aa8aca9939a99e">get_coll_element</a>(char_u **pp)</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordtype">int</span>     c;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a> = 1;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    char_u  *p = *pp;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> (p[0] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a> &amp;&amp; p[1] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; p[2] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        l = (*mb_ptr2len)(p + 2);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">if</span> (p[l + 2] == <span class="charliteral">&#39;.&#39;</span> &amp;&amp; p[l + 3] == <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        c = <a class="code" href="globals_8h.html#a2ff646629886112d5039957029690e09">mb_ptr2char</a>(p + 2);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        c = p[2];</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        *pp += l + 4;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">return</span> c;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;    }</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6c9db3b8f4f1466d80a8bf504f8a7369">  480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regexp_8c.html#a6c9db3b8f4f1466d80a8bf504f8a7369">reg_cpo_lit</a>; <span class="comment">/* &#39;cpoptions&#39; contains &#39;l&#39; flag */</span></div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="regexp_8c.html#a74a1898fb3405190ab136129c4dda03a">  481</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regexp_8c.html#a74a1898fb3405190ab136129c4dda03a">reg_cpo_bsl</a>; <span class="comment">/* &#39;cpoptions&#39; contains &#39;\&#39; flag */</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2fc7528035ce03855d00eff1ce955a64">  484</a></span>&#160;<a class="code" href="regexp_8c.html#a2fc7528035ce03855d00eff1ce955a64">get_cpo_flags</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="regexp_8c.html#a6c9db3b8f4f1466d80a8bf504f8a7369">reg_cpo_lit</a> = <a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(<a class="code" href="option_8h.html#a441e114eba9a56d517bbe74d233ec3f9">p_cpo</a>, <a class="code" href="option_8h.html#aae48618313c28d39e051675296411882">CPO_LITERAL</a>) != NULL;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <a class="code" href="regexp_8c.html#a74a1898fb3405190ab136129c4dda03a">reg_cpo_bsl</a> = <a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(<a class="code" href="option_8h.html#a441e114eba9a56d517bbe74d233ec3f9">p_cpo</a>, <a class="code" href="option_8h.html#aa792aee58c92572fdfd1dc9ff20817c2">CPO_BACKSL</a>) != NULL;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment"> * Skip over a &quot;[]&quot; range.</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment"> * &quot;p&quot; must point to the character after the &#39;[&#39;.</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment"> * The returned pointer is on the matching &#39;]&#39;, or the terminating NUL.</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keyword">static</span> char_u *</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="regexp_8c.html#a0a7d271c5228c38d2d604e318940b5f3">  496</a></span>&#160;<a class="code" href="regexp_8c.html#a0a7d271c5228c38d2d604e318940b5f3">skip_anyof</a>(char_u *p)</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;{</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;^&#39;</span>)  <span class="comment">/* Complement of range. */</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    ++p;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;]&#39;</span> || *p == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;    ++p;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">while</span> (*p != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a> &amp;&amp; *p != <span class="charliteral">&#39;]&#39;</span>)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">if</span> (has_mbyte &amp;&amp; (l = (*<a class="code" href="globals_8h.html#a76244393355aa024ee3577263f838563">mb_ptr2len</a>)(p)) &gt; 1)</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        p += <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        ++p;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">if</span> (*p != <span class="charliteral">&#39;]&#39;</span> &amp;&amp; *p != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            <a class="code" href="macros_8h.html#a8e76521a98776d2e3f9b33fcb331dcee">MB_PTR_ADV</a>(p);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;\\&#39;</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        &amp;&amp; !<a class="code" href="regexp_8c.html#a74a1898fb3405190ab136129c4dda03a">reg_cpo_bsl</a></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        &amp;&amp; (<a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(<a class="code" href="regexp_8c.html#a841be044df265f2b67f1224c9d155cf0">REGEXP_INRANGE</a>, p[1]) != NULL</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;            || (!<a class="code" href="regexp_8c.html#a6c9db3b8f4f1466d80a8bf504f8a7369">reg_cpo_lit</a> &amp;&amp; <a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(<a class="code" href="regexp_8c.html#a7674475ca89598eec9cdb67f132c6289">REGEXP_ABBR</a>, p[1]) != NULL)))</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        p += 2;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;[&#39;</span>)</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a20101a2a14e94b74196a0c913db33ab7">get_char_class</a>(&amp;p) == <a class="code" href="regexp_8c.html#ab27e8d8459fdfdc88557c40b8cb1ac8d">CLASS_NONE</a></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            &amp;&amp; <a class="code" href="regexp_8c.html#aece7fc07c42c4e1c83d4ad58b7a65868">get_equi_class</a>(&amp;p) == 0</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            &amp;&amp; <a class="code" href="regexp_8c.html#a6cf9e213f834085926aa8aca9939a99e">get_coll_element</a>(&amp;p) == 0</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            &amp;&amp; *p != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        ++p; <span class="comment">/* it is not a class name and not NUL */</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        ++p;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"> * Skip past regular expression.</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"> * Stop at end of &quot;startp&quot; or where &quot;dirc&quot; is found (&#39;/&#39;, &#39;?&#39;, etc).</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> * Take care of characters with a backslash in front of it.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> * Skip strings inside [ and ].</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment"> * When &quot;newp&quot; is not NULL and &quot;dirc&quot; is &#39;?&#39;, make an allocated copy of the</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"> * expression and change &quot;\?&quot; to &quot;?&quot;.  If &quot;*newp&quot; is not NULL the expression</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment"> * is changed in-place.</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    char_u *</div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6fc47cb05ff9c686a3b30670203c033c">  545</a></span>&#160;<a class="code" href="regexp_8c.html#a6fc47cb05ff9c686a3b30670203c033c">skip_regexp</a>(</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    char_u  *startp,</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordtype">int</span>     dirc,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keywordtype">int</span>     magic,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    char_u  **newp)</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;{</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordtype">int</span>     mymagic;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    char_u  *p = startp;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordflow">if</span> (magic)</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    mymagic = <a class="code" href="regexp_8c.html#ae4026f0b0121d99d923d7b284d4d1fcc">MAGIC_ON</a>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    mymagic = <a class="code" href="regexp_8c.html#af7e8c489405bf8f0c2684981ac9324da">MAGIC_OFF</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <a class="code" href="regexp_8c.html#a2fc7528035ce03855d00eff1ce955a64">get_cpo_flags</a>();</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordflow">for</span> (; p[0] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>; <a class="code" href="macros_8h.html#a8e76521a98776d2e3f9b33fcb331dcee">MB_PTR_ADV</a>(p))</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    {</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (p[0] == dirc)   <span class="comment">/* found end of regexp */</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keywordflow">if</span> ((p[0] == <span class="charliteral">&#39;[&#39;</span> &amp;&amp; mymagic &gt;= <a class="code" href="regexp_8c.html#ae4026f0b0121d99d923d7b284d4d1fcc">MAGIC_ON</a>)</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        || (p[0] == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; p[1] == <span class="charliteral">&#39;[&#39;</span> &amp;&amp; mymagic &lt;= <a class="code" href="regexp_8c.html#af7e8c489405bf8f0c2684981ac9324da">MAGIC_OFF</a>))</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    {</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;        p = <a class="code" href="regexp_8c.html#a0a7d271c5228c38d2d604e318940b5f3">skip_anyof</a>(p + 1);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <span class="keywordflow">if</span> (p[0] == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p[0] == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; p[1] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> (dirc == <span class="charliteral">&#39;?&#39;</span> &amp;&amp; newp != NULL &amp;&amp; p[1] == <span class="charliteral">&#39;?&#39;</span>)</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;        <span class="comment">/* change &quot;\?&quot; to &quot;?&quot;, make a copy first. */</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        <span class="keywordflow">if</span> (*newp == NULL)</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            *newp = <a class="code" href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a>(startp);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            <span class="keywordflow">if</span> (*newp != NULL)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            p = *newp + (p - startp);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <span class="keywordflow">if</span> (*newp != NULL)</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;            <a class="code" href="vim_8h.html#a1d75ac7dfcfa7aabca75ae7b1333ac9e">STRMOVE</a>(p, p + 1);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            ++p;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        }</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        ++p;    <span class="comment">/* skip next character */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;v&#39;</span>)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        mymagic = <a class="code" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;V&#39;</span>)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        mymagic = <a class="code" href="regexp_8c.html#affd74523395f3a98d1234b0bd8a97940">MAGIC_NONE</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">return</span> p;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;}</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment"> * Functions for getting characters from the regexp input.</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">  601</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>;    <span class="comment">/* byte length of previous char */</span></div><div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">  602</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a>;   <span class="comment">// True when on the first character</span></div><div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">  603</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a>;  <span class="comment">// True when on the second character</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment"> * Start parsing at &quot;str&quot;.</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00609"></a><span class="lineno"><a class="line" href="regexp_8c.html#a05f05ac9b422c47f5a8780086bd2f065">  609</a></span>&#160;<a class="code" href="regexp_8c.html#a05f05ac9b422c47f5a8780086bd2f065">initchr</a>(char_u *str)</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;{</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> = str;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a> = 0;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a> = <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> = <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a> = -1;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment"> * Save the current parse state, so that it can be restored and parsing</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment"> * starts in the same state again.</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6495374cf73dd261c3f13cabc43b7100">  623</a></span>&#160;<a class="code" href="regexp_8c.html#a6495374cf73dd261c3f13cabc43b7100">save_parse_state</a>(<a class="code" href="structparse__state___t.html">parse_state_T</a> *ps)</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;{</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#ad6727770bac8c82102251b1ca8efbc6b">regparse</a> = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#a0f0ead30a6f2059a84c8641af2e7a89f">prevchr_len</a> = <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#aa88b7450a01ee45fa82cad8447f9398f">curchr</a> = <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#a1c12485c167c302ea2b5f5eecfa16d6c">prevchr</a> = <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#a5e86ee5b6c84c567ec223e3415ea1c1b">prevprevchr</a> = <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#ae7541db3451267004f7c4d0f7d3624f0">nextchr</a> = <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#a30a351eaf2afe86a0688c2697164e603">at_start</a> = <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a>;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#a584de1bd523ad7deb8c699fe98ee224a">prev_at_start</a> = <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    ps-&gt;<a class="code" href="structparse__state___t.html#a41d00fd7b03eda69b7451b730700648e">regnpar</a> = <a class="code" href="regexp_8c.html#a81919d8c9eea030b6b86d6115a231f44">regnpar</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"> * Restore a previously saved parse state.</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="regexp_8c.html#a4027015e50e5714af68f307cc00e6a83">  640</a></span>&#160;<a class="code" href="regexp_8c.html#a4027015e50e5714af68f307cc00e6a83">restore_parse_state</a>(<a class="code" href="structparse__state___t.html">parse_state_T</a> *ps)</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;{</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> = ps-&gt;<a class="code" href="structparse__state___t.html#ad6727770bac8c82102251b1ca8efbc6b">regparse</a>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a> = ps-&gt;<a class="code" href="structparse__state___t.html#a0f0ead30a6f2059a84c8641af2e7a89f">prevchr_len</a>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = ps-&gt;<a class="code" href="structparse__state___t.html#aa88b7450a01ee45fa82cad8447f9398f">curchr</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> = ps-&gt;<a class="code" href="structparse__state___t.html#a1c12485c167c302ea2b5f5eecfa16d6c">prevchr</a>;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a> = ps-&gt;<a class="code" href="structparse__state___t.html#a5e86ee5b6c84c567ec223e3415ea1c1b">prevprevchr</a>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a> = ps-&gt;<a class="code" href="structparse__state___t.html#ae7541db3451267004f7c4d0f7d3624f0">nextchr</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = ps-&gt;<a class="code" href="structparse__state___t.html#a30a351eaf2afe86a0688c2697164e603">at_start</a>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> = ps-&gt;<a class="code" href="structparse__state___t.html#a584de1bd523ad7deb8c699fe98ee224a">prev_at_start</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="regexp_8c.html#a81919d8c9eea030b6b86d6115a231f44">regnpar</a> = ps-&gt;<a class="code" href="structparse__state___t.html#a41d00fd7b03eda69b7451b730700648e">regnpar</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;}</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment"> * Get the next character without advancing.</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">  658</a></span>&#160;<a class="code" href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">peekchr</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span>  after_slash = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> == -1)</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>[0])</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;[&#39;</span>:</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;~&#39;</span>:</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        <span class="comment">/* magic when &#39;magic&#39; is on */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> &gt;= <a class="code" href="regexp_8c.html#ae4026f0b0121d99d923d7b284d4d1fcc">MAGIC_ON</a>)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>:</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;)&#39;</span>:</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;{&#39;</span>:</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;%&#39;</span>:</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;+&#39;</span>:</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;=&#39;</span>:</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;?&#39;</span>:</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;@&#39;</span>:</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;!&#39;</span>:</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>:</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>:</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;\&#39;&#39;</span>:  <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;,&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;:&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;;&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;`&#39;</span>:   <span class="comment">/* future ext. */</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;/&#39;</span>:   <span class="comment">/* Can&#39;t be used in / command */</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;        <span class="comment">/* magic only after &quot;\v&quot; */</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> == <a class="code" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a>)</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;        <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>);</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <span class="comment">/* * is not magic as the very first character, eg &quot;?*ptr&quot;, when</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">         * after &#39;^&#39;, eg &quot;/^*ptr&quot; and when after &quot;\(&quot;, &quot;\|&quot;, &quot;\&amp;&quot;.  But</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment">         * &quot;\(\*&quot; is not magic, thus must be magic if &quot;after_slash&quot; */</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> &gt;= <a class="code" href="regexp_8c.html#ae4026f0b0121d99d923d7b284d4d1fcc">MAGIC_ON</a></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;            &amp;&amp; !<a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;            &amp;&amp; !(<a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> &amp;&amp; <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;^&#39;</span>))</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            &amp;&amp; (after_slash</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            || (<a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> != <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;(&#39;</span>)</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                &amp;&amp; <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> != <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;&amp;&#39;</span>)</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                &amp;&amp; <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> != <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;|&#39;</span>))))</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;*&#39;</span>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>:</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <span class="comment">/* &#39;^&#39; is only magic as the very first character and if it&#39;s after</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">         * &quot;\(&quot;, &quot;\|&quot;, &quot;\&amp;&#39; or &quot;\n&quot; */</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> &gt;= <a class="code" href="regexp_8c.html#af7e8c489405bf8f0c2684981ac9324da">MAGIC_OFF</a></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            &amp;&amp; (<a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;            || <a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> == <a class="code" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            || <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;(&#39;</span>)</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            || <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;|&#39;</span>)</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;            || <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;&amp;&#39;</span>)</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;            || <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;n&#39;</span>)</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;            || (<a class="code" href="regexp_8c.html#a742a7b81fb4074f0ec3ba585b6d6c550">no_Magic</a>(<a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a>) == <span class="charliteral">&#39;(&#39;</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                &amp;&amp; <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a> == <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;%&#39;</span>))))</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;        {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;        <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;^&#39;</span>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;        <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;        }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;$&#39;</span>:</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;        <span class="comment">/* &#39;$&#39; is only magic as the very last char and if it&#39;s in front of</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">         * either &quot;\|&quot;, &quot;\)&quot;, &quot;\&amp;&quot;, or &quot;\n&quot; */</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> &gt;= <a class="code" href="regexp_8c.html#af7e8c489405bf8f0c2684981ac9324da">MAGIC_OFF</a>)</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        char_u *p = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> + 1;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordtype">int</span> is_magic_all = (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> == <a class="code" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;        <span class="comment">/* ignore \c \C \m \M \v \V and \Z after &#39;$&#39; */</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;        <span class="keywordflow">while</span> (p[0] == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; (p[1] == <span class="charliteral">&#39;c&#39;</span> || p[1] == <span class="charliteral">&#39;C&#39;</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                || p[1] == <span class="charliteral">&#39;m&#39;</span> || p[1] == <span class="charliteral">&#39;M&#39;</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                || p[1] == <span class="charliteral">&#39;v&#39;</span> || p[1] == <span class="charliteral">&#39;V&#39;</span> || p[1] == <span class="charliteral">&#39;Z&#39;</span>))</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;            <span class="keywordflow">if</span> (p[1] == <span class="charliteral">&#39;v&#39;</span>)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            is_magic_all = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p[1] == <span class="charliteral">&#39;m&#39;</span> || p[1] == <span class="charliteral">&#39;M&#39;</span> || p[1] == <span class="charliteral">&#39;V&#39;</span>)</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;            is_magic_all = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            p += 2;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        <span class="keywordflow">if</span> (p[0] == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            || (p[0] == <span class="charliteral">&#39;\\&#39;</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                &amp;&amp; (p[1] == <span class="charliteral">&#39;|&#39;</span> || p[1] == <span class="charliteral">&#39;&amp;&#39;</span> || p[1] == <span class="charliteral">&#39;)&#39;</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                || p[1] == <span class="charliteral">&#39;n&#39;</span>))</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            || (is_magic_all</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                   &amp;&amp; (p[0] == <span class="charliteral">&#39;|&#39;</span> || p[0] == <span class="charliteral">&#39;&amp;&#39;</span> || p[0] == <span class="charliteral">&#39;)&#39;</span>))</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;            || <a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> == <a class="code" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a>)</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a>(<span class="charliteral">&#39;$&#39;</span>);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;    <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;        {</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordtype">int</span> c = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>[1];</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <span class="keywordflow">if</span> (c == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <span class="charliteral">&#39;\\&#39;</span>;  <span class="comment">/* trailing &#39;\&#39; */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;#ifdef EBCDIC</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(META, c)</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            c &lt;= <span class="charliteral">&#39;~&#39;</span> &amp;&amp; <a class="code" href="regexp_8c.html#a1aeb4e49c7371629f26e72134d494ab7">META_flags</a>[c]</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;            )</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">             * META contains everything that may be magic sometimes,</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">             * except ^ and $ (&quot;\^&quot; and &quot;\$&quot; are only magic after</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">             * &quot;\V&quot;).  We now fetch the next character and toggle its</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">             * magicness.  Therefore, \ is so meta-magic that it is</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">             * not in META.</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = -1;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> = <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a>;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;   <span class="comment">/* be able to say &quot;/\*ptr&quot; */</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            ++<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            ++after_slash;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;            <a class="code" href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">peekchr</a>();</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            --<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            --after_slash;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#a5d689700d06c3e06008805c1551467ce">toggle_Magic</a>(<a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;        }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(<a class="code" href="regexp_8c.html#a7674475ca89598eec9cdb67f132c6289">REGEXP_ABBR</a>, c))</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;        {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">             * Handle abbreviations, like &quot;\t&quot; for TAB -- webb</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#a5b439799fae05f45aca87aab1721a34a">backslash_trans</a>(c);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> == <a class="code" href="regexp_8c.html#affd74523395f3a98d1234b0bd8a97940">MAGIC_NONE</a> &amp;&amp; (c == <span class="charliteral">&#39;$&#39;</span> || c == <span class="charliteral">&#39;^&#39;</span>))</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#a5d689700d06c3e06008805c1551467ce">toggle_Magic</a>(c);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment">             * Next character can never be (made) magic?</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">             * Then backslashing it won&#39;t do anything.</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = (*mb_ptr2char)(<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> + 1);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = c;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        }</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        }</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = (*mb_ptr2char)(<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;    }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;    }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;}</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment"> * Eat one lexed character.  Do this in a way that we can undo it.</span></div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">  826</a></span>&#160;<a class="code" href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">skipchr</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;{</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <span class="comment">/* peekchr() eats a backslash, do the same here */</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a> = 1;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a> = 0;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>[<a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;    <span class="keywordflow">if</span> (enc_utf8)</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="comment">/* exclude composing chars that mb_ptr2len does include */</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a> += <a class="code" href="mbyte_8c.html#adad1b095d3961720e5b374c3cac048df">utf_ptr2len</a>(<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> + <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a> += (*mb_ptr2len)(<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> + <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>);</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        ++<a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;    <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> += <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> = <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a>;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;    <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;    <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a> = <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a>;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;    <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> = <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;    <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a>;       <span class="comment">/* use previously unget char, or -1 */</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;    <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a> = -1;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;}</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment"> * Skip a character while keeping the value of prev_at_start for at_start.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment"> * prevchr and prevprevchr are also kept.</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa1db20edd21b74004b5c5ba0ec166ece">  857</a></span>&#160;<a class="code" href="regexp_8c.html#aa1db20edd21b74004b5c5ba0ec166ece">skipchr_keepstart</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;{</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    <span class="keywordtype">int</span> as = <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a>;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordtype">int</span> pr = <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordtype">int</span> prpr = <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a>;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <a class="code" href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">skipchr</a>();</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = as;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> = pr;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a> = prpr;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;}</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment"> * Get the next character from the pattern. We know about magic and such, so</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment"> * therefore we need a lexical analyzer.</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00874"></a><span class="lineno"><a class="line" href="regexp_8c.html#a624c4be32c71b525f1d39791692ba09e">  874</a></span>&#160;<a class="code" href="regexp_8c.html#a624c4be32c71b525f1d39791692ba09e">getchr</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;    <span class="keywordtype">int</span> chr = <a class="code" href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">peekchr</a>();</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <a class="code" href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">skipchr</a>();</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="keywordflow">return</span> chr;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment"> * put character back.  Works only once!</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="regexp_8c.html#a7f3dbbaa1cbb72d5fc7a52b30a4cbf2f">  886</a></span>&#160;<a class="code" href="regexp_8c.html#a7f3dbbaa1cbb72d5fc7a52b30a4cbf2f">ungetchr</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <a class="code" href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a> = <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;    <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <a class="code" href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a> = <a class="code" href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a>;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <a class="code" href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a> = <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <a class="code" href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;    <span class="comment">/* Backup regparse, so that it&#39;s at the same position as before the</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">     * getchr(). */</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> -= <a class="code" href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;<span class="comment"> * Get and return the value of the hex string at the current position.</span></div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="comment"> * Return -1 if there is no valid hex number.</span></div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;<span class="comment"> * The position is updated:</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;<span class="comment"> *     blahblah\%x20asdf</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;<span class="comment"> *     before-^ ^-after</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="comment"> * The parameter controls the maximum number of input characters. This will be</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;<span class="comment"> * 2 when reading a \%x20 sequence and 4 when reading a \%u20AC sequence.</span></div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">long</span></div><div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad672fa1734bd44058dd7af298e27d644">  909</a></span>&#160;<a class="code" href="regexp_8c.html#ad672fa1734bd44058dd7af298e27d644">gethexchrs</a>(<span class="keywordtype">int</span> maxinputlen)</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;{</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <a class="code" href="vim_8h.html#af61a821be0d5cd6dbf89685d34bb4d39">long_u</a>  nr = 0;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordtype">int</span>     c;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; maxinputlen; ++i)</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    {</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    c = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>[0];</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="charset_8c.html#a269e1797f0d8a95bd4cc2258588f8a63">vim_isxdigit</a>(c))</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    nr &lt;&lt;= 4;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    nr |= <a class="code" href="charset_8c.html#a58ed0722af2b6452235a9c269767aa0c">hex2nr</a>(c);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    ++<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">if</span> (i == 0)</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">long</span>)nr;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="comment"> * Get and return the value of the decimal string immediately after the</span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment"> * current position. Return -1 for invalid.  Consumes all digits.</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">long</span></div><div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="regexp_8c.html#a47a18fefa87191bfee029a23df83dbca">  935</a></span>&#160;<a class="code" href="regexp_8c.html#a47a18fefa87191bfee029a23df83dbca">getdecchrs</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;{</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <a class="code" href="vim_8h.html#af61a821be0d5cd6dbf89685d34bb4d39">long_u</a>  nr = 0;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <span class="keywordtype">int</span>     c;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="keywordflow">for</span> (i = 0; ; ++i)</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    c = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>[0];</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="keywordflow">if</span> (c &lt; &#39;0&#39; || c &gt; <span class="charliteral">&#39;9&#39;</span>)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    nr *= 10;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;    nr += c - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    ++<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <a class="code" href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a> = -1; <span class="comment">/* no longer valid */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">if</span> (i == 0)</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">long</span>)nr;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;}</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment"> * get and return the value of the octal string immediately after the current</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment"> * position. Return -1 for invalid, or 0-255 for valid. Smart enough to handle</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment"> * numbers &gt; 377 correctly (for example, 400 is treated as 40) and doesn&#39;t</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;<span class="comment"> * treat 8 or 9 as recognised characters. Position is updated:</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment"> *     blahblah\%o210asdf</span></div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;<span class="comment"> *     before-^  ^-after</span></div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">long</span></div><div class="line"><a name="l00966"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa3dc7d1facc61311070e1b7ea61b0370">  966</a></span>&#160;<a class="code" href="regexp_8c.html#aa3dc7d1facc61311070e1b7ea61b0370">getoctchrs</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;    <a class="code" href="vim_8h.html#af61a821be0d5cd6dbf89685d34bb4d39">long_u</a>  nr = 0;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordtype">int</span>     c;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 3 &amp;&amp; nr &lt; 040; ++i)</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    c = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>[0];</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (c &lt; &#39;0&#39; || c &gt; <span class="charliteral">&#39;7&#39;</span>)</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    nr &lt;&lt;= 3;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    nr |= <a class="code" href="charset_8c.html#a58ed0722af2b6452235a9c269767aa0c">hex2nr</a>(c);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    ++<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    }</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="keywordflow">if</span> (i == 0)</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">long</span>)nr;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment"> * read_limits - Read two integers to be taken as a minimum and maximum.</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment"> * If the first character is &#39;-&#39;, then the range is reversed.</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment"> * Should end with &#39;end&#39;.  If minval is missing, zero is default, if maxval is</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment"> * missing, a very big number is the default.</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6e2c0f04f5a7672232232e9b5a4b1c54">  994</a></span>&#160;<a class="code" href="regexp_8c.html#a6e2c0f04f5a7672232232e9b5a4b1c54">read_limits</a>(<span class="keywordtype">long</span> *minval, <span class="keywordtype">long</span> *maxval)</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;{</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="keywordtype">int</span>     reverse = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    char_u  *first_char;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordtype">long</span>    tmp;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> == <span class="charliteral">&#39;-&#39;</span>)</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;    <span class="comment">/* Starts with &#39;-&#39;, so reverse the range later */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>++;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    reverse = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    }</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    first_char = <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    *minval = <a class="code" href="charset_8c.html#ad81a749470a4c63eab4e9dea315f2819">getdigits</a>(&amp;<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> == <span class="charliteral">&#39;,&#39;</span>)       <span class="comment">/* There is a comma */</span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="charset_8c.html#a35845ed87dc61ea86eb2e2f2f2f477f3">vim_isdigit</a>(*++<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>))</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;        *maxval = <a class="code" href="charset_8c.html#ad81a749470a4c63eab4e9dea315f2819">getdigits</a>(&amp;<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;        *maxval = <a class="code" href="regexp_8c.html#ab0d690a0d4a93666d44346dfd058ada0">MAX_LIMIT</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;    }</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="macros_8h.html#a1c79e75cde848afa5b4c0be7c1c99ead">VIM_ISDIGIT</a>(*first_char))</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    *maxval = *minval;      <span class="comment">/* It was \{n} or \{-n} */</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    *maxval = <a class="code" href="regexp_8c.html#ab0d690a0d4a93666d44346dfd058ada0">MAX_LIMIT</a>;        <span class="comment">/* It was \{} or \{-} */</span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> == <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a>++; <span class="comment">/* Allow either \{...} or \{...\} */</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="keywordflow">if</span> (*<a class="code" href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a> != <span class="charliteral">&#39;}&#39;</span>)</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <a class="code" href="regexp_8c.html#af082cfea994077d5a3da04843b1dd7e0">EMSG2_RET_FAIL</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E554: Syntax error in %s{...}&quot;</span>),</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                               <a class="code" href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a> == <a class="code" href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a>);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">     * Reverse the range if there was a &#39;-&#39;, or make sure it is in the right</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">     * order otherwise.</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">if</span> ((!reverse &amp;&amp; *minval &gt; *maxval) || (reverse &amp;&amp; *minval &lt; *maxval))</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;    {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    tmp = *minval;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    *minval = *maxval;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;    *maxval = tmp;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;    <a class="code" href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">skipchr</a>();      <span class="comment">/* let&#39;s be friends with the lexer again */</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;}</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment"> * vim_regexec and friends</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment"> * Global work variables for vim_regexec().</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#af5d315f845c2bf22b0555fbe7b008814">cleanup_subexpr</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#a70fd49df055b8f914060b1502805c113">cleanup_zsubexpr</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="regexp_8c.html#ae31aee91fc381a04c6ddc245d23f5b41">reg_nextline</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>  <a class="code" href="regexp_8c.html#a2075541ea737426246b24b3ea3c12f37">match_with_backref</a>(<a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> start_lnum, <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> start_col, <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> end_lnum, <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> end_col, <span class="keywordtype">int</span> *bytelen);</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> * Sometimes need to save a copy of a line.  Since alloc()/free() is very</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment"> * slow, we keep one allocated piece of memory and only re-allocate it when</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment"> * it&#39;s too small.  It&#39;s freed in bt_regexec_both() when finished.</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e"> 1059</a></span>&#160;<span class="keyword">static</span> char_u   *<a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a> = NULL;</div><div class="line"><a name="l01060"></a><span class="lineno"><a class="line" href="regexp_8c.html#ac73960fd6b38099c8d8df9a17bf90ac2"> 1060</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code" href="regexp_8c.html#ac73960fd6b38099c8d8df9a17bf90ac2">reg_tofreelen</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"> * Structure used to store the execution state of the regex engine.</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment"> * Which ones are set depends on whether a single-line or multi-line match is</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment"> * done:</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment"> *          single-line     multi-line</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment"> * reg_match        &amp;regmatch_T     NULL</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment"> * reg_mmatch       NULL            &amp;regmmatch_T</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment"> * reg_startp       reg_match-&gt;startp   &lt;invalid&gt;</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment"> * reg_endp     reg_match-&gt;endp     &lt;invalid&gt;</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment"> * reg_startpos     &lt;invalid&gt;       reg_mmatch-&gt;startpos</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment"> * reg_endpos       &lt;invalid&gt;       reg_mmatch-&gt;endpos</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment"> * reg_win      NULL            window in which to search</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment"> * reg_buf      curbuf          buffer in which to search</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"> * reg_firstlnum    &lt;invalid&gt;       first line in which to search</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment"> * reg_maxline      0           last line nr</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment"> * reg_line_lbr     FALSE or TRUE       FALSE</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01079"></a><span class="lineno"><a class="line" href="structregexec___t.html"> 1079</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d"> 1080</a></span>&#160;    <a class="code" href="structregmatch___t.html">regmatch_T</a>      *<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b"> 1081</a></span>&#160;    <a class="code" href="structregmmatch___t.html">regmmatch_T</a>     *<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"><a class="line" href="structregexec___t.html#a1065b04b07b945c0eb487c7a63bc7976"> 1082</a></span>&#160;    char_u      **<a class="code" href="structregexec___t.html#a1065b04b07b945c0eb487c7a63bc7976">reg_startp</a>;</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="structregexec___t.html#a674bed9a63a693477f540e93cd055fd0"> 1083</a></span>&#160;    char_u      **<a class="code" href="structregexec___t.html#a674bed9a63a693477f540e93cd055fd0">reg_endp</a>;</div><div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="structregexec___t.html#af92e2d59b9e77aaa4ff083b2baaf3af8"> 1084</a></span>&#160;    <a class="code" href="structlpos___t.html">lpos_T</a>      *<a class="code" href="structregexec___t.html#af92e2d59b9e77aaa4ff083b2baaf3af8">reg_startpos</a>;</div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="structregexec___t.html#a772bb320ad34d787d7009f867578a846"> 1085</a></span>&#160;    <a class="code" href="structlpos___t.html">lpos_T</a>      *<a class="code" href="structregexec___t.html#a772bb320ad34d787d7009f867578a846">reg_endpos</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"><a class="line" href="structregexec___t.html#a900291e625f18d6d7eb4c47c08f7205b"> 1086</a></span>&#160;    <a class="code" href="structwindow___s.html">win_T</a>       *<a class="code" href="structregexec___t.html#a900291e625f18d6d7eb4c47c08f7205b">reg_win</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03"> 1087</a></span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>       *<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c"> 1088</a></span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>        <a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c"> 1089</a></span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>        <a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="structregexec___t.html#a53e1764891cdaa02f204852056b4de3e"> 1090</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structregexec___t.html#a53e1764891cdaa02f204852056b4de3e">reg_line_lbr</a>;   <span class="comment">/* &quot;\n&quot; in string is line break */</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;    <span class="comment">// The current match-position is stord in these variables:</span></div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="structregexec___t.html#a07dd1059fc66a251d5e8757e2ebf93c1"> 1093</a></span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    <a class="code" href="structregexec___t.html#a07dd1059fc66a251d5e8757e2ebf93c1">lnum</a>;       <span class="comment">// line number, relative to first line</span></div><div class="line"><a name="l01094"></a><span class="lineno"><a class="line" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2"> 1094</a></span>&#160;    char_u  *<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>;      <span class="comment">// start of current line</span></div><div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2"> 1095</a></span>&#160;    char_u  *<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a>;     <span class="comment">// current input, points into &quot;regline&quot;</span></div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"><a class="line" href="structregexec___t.html#ab0289ebaf6ba4946aecca35f79d2bb15"> 1097</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#ab0289ebaf6ba4946aecca35f79d2bb15">need_clear_subexpr</a>; <span class="comment">// subexpressions still need to be cleared</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="structregexec___t.html#aa87c2a74de8a0b64bbba077af9194255"> 1099</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#aa87c2a74de8a0b64bbba077af9194255">need_clear_zsubexpr</a>;    <span class="comment">// extmatch subexpressions still need to be</span></div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <span class="comment">// cleared</span></div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="comment">/* Internal copy of &#39;ignorecase&#39;.  It is set at each call to vim_regexec().</span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">     * Normally it gets the value of &quot;rm_ic&quot; or &quot;rmm_ic&quot;, but when the pattern</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">     * contains &#39;\c&#39; or &#39;\C&#39; the value is overruled. */</span></div><div class="line"><a name="l01106"></a><span class="lineno"><a class="line" href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033"> 1106</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033">reg_ic</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    <span class="comment">/* Similar to &quot;reg_ic&quot;, but only for &#39;combining&#39; characters.  Set with \Z</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">     * flag in the regexp.  Defaults to false, always. */</span></div><div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="structregexec___t.html#af889cf51c0f23bf4f7c6cc841e716dc0"> 1110</a></span>&#160;    <span class="keywordtype">int</span>         <a class="code" href="structregexec___t.html#af889cf51c0f23bf4f7c6cc841e716dc0">reg_icombine</a>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;    <span class="comment">/* Copy of &quot;rmm_maxcol&quot;: maximum column to search for a match.  Zero when</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">     * there is no maximum. */</span></div><div class="line"><a name="l01114"></a><span class="lineno"><a class="line" href="structregexec___t.html#a4e17d4016c97c56eab778bd495d07608"> 1114</a></span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>     <a class="code" href="structregexec___t.html#a4e17d4016c97c56eab778bd495d07608">reg_maxcol</a>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;    <span class="comment">// State for the NFA engine regexec.</span></div><div class="line"><a name="l01117"></a><span class="lineno"><a class="line" href="structregexec___t.html#a756224aa624bab4bae49c8bb6ee95054"> 1117</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#a756224aa624bab4bae49c8bb6ee95054">nfa_has_zend</a>;       <span class="comment">// NFA regexp \ze operator encountered.</span></div><div class="line"><a name="l01118"></a><span class="lineno"><a class="line" href="structregexec___t.html#af196521a1c4f1242e382ffd2d6462536"> 1118</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#af196521a1c4f1242e382ffd2d6462536">nfa_has_backref</a>;    <span class="comment">// NFA regexp \1 .. \9 encountered.</span></div><div class="line"><a name="l01119"></a><span class="lineno"><a class="line" href="structregexec___t.html#ab950ceb152649f6f548dd0aaeeee3b93"> 1119</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#ab950ceb152649f6f548dd0aaeeee3b93">nfa_nsubexpr</a>;       <span class="comment">// Number of sub expressions actually being used</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                <span class="comment">// during execution. 1 if only the whole match</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                <span class="comment">// (subexpr 0) is used.</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;    <span class="comment">// listid is global, so that it increases on recursive calls to</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;    <span class="comment">// nfa_regmatch(), which means we don&#39;t have to clear the lastlist field of</span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;    <span class="comment">// all the states.</span></div><div class="line"><a name="l01125"></a><span class="lineno"><a class="line" href="structregexec___t.html#ae6b8a11c6367adbf3b1e984953fb2c34"> 1125</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#ae6b8a11c6367adbf3b1e984953fb2c34">nfa_listid</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"><a class="line" href="structregexec___t.html#afe2695219e555b6ebd05771bceb1edef"> 1126</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#afe2695219e555b6ebd05771bceb1edef">nfa_alt_listid</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l01129"></a><span class="lineno"><a class="line" href="structregexec___t.html#ad6fb083a6602981e8939ad6dc6987cc4"> 1129</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="structregexec___t.html#ad6fb083a6602981e8939ad6dc6987cc4">nfa_has_zsubexpr</a>;   <span class="comment">// NFA regexp has \z( ), set zsubexpr.</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;} <a class="code" href="structregexec___t.html">regexec_T</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;</div><div class="line"><a name="l01133"></a><span class="lineno"><a class="line" href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847"> 1133</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structregexec___t.html">regexec_T</a>    <a class="code" href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847">rex</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"><a class="line" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7"> 1134</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span>      <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment"> * Return TRUE if character &#39;c&#39; is included in &#39;iskeyword&#39; option for</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"> * &quot;reg_buf&quot; buffer.</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="regexp_8c.html#a8a374f6114572cd530aee558efb56a4e"> 1141</a></span>&#160;<a class="code" href="regexp_8c.html#a8a374f6114572cd530aee558efb56a4e">reg_iswordc</a>(<span class="keywordtype">int</span> c)</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;{</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="charset_8c.html#a9dcd8ec399bd749ed97bdd8530ad0701">vim_iswordc_buf</a>(c, rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a>);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;<span class="comment"> * Get pointer to the line &quot;lnum&quot;, which is relative to &quot;reg_firstlnum&quot;.</span></div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;    <span class="keyword">static</span> char_u *</div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f"> 1150</a></span>&#160;<a class="code" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a>(<a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum)</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">/* when looking behind for a match/no-match lnum is negative.  But we</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="comment">     * can&#39;t go before line 1 */</span></div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a> + lnum &lt; 1)</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;    <span class="keywordflow">if</span> (lnum &gt; rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a>)</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;    <span class="comment">/* Must have matched the &quot;\n&quot; in the last line. */</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;    <span class="keywordflow">return</span> (char_u *)<span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a>(rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a>, rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a> + lnum, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;}</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l01163"></a><span class="lineno"><a class="line" href="regexp_8c.html#a1bdf6e238dca7eec87cd0053378b510a"> 1163</a></span>&#160;<span class="keyword">static</span> char_u   *<a class="code" href="regexp_8c.html#a1bdf6e238dca7eec87cd0053378b510a">reg_startzp</a>[<a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>];  <span class="comment">/* Workspace to mark beginning */</span></div><div class="line"><a name="l01164"></a><span class="lineno"><a class="line" href="regexp_8c.html#a87f17acaa43317dad51853d50cdfa4c6"> 1164</a></span>&#160;<span class="keyword">static</span> char_u   *<a class="code" href="regexp_8c.html#a87f17acaa43317dad51853d50cdfa4c6">reg_endzp</a>[<a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>];    <span class="comment">/*   and end of \z(...\) matches */</span></div><div class="line"><a name="l01165"></a><span class="lineno"><a class="line" href="regexp_8c.html#af4de7ca16685ff3b7571015c989cc8b1"> 1165</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structlpos___t.html">lpos_T</a>   <a class="code" href="regexp_8c.html#af4de7ca16685ff3b7571015c989cc8b1">reg_startzpos</a>[<a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>]; <span class="comment">/* idem, beginning pos */</span></div><div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="regexp_8c.html#a854ff71c2cea93ce05fd3e0a8a32fac4"> 1166</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structlpos___t.html">lpos_T</a>   <a class="code" href="regexp_8c.html#a854ff71c2cea93ce05fd3e0a8a32fac4">reg_endzpos</a>[<a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>];   <span class="comment">/* idem, end pos */</span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">/* TRUE if using multi-line regexp. */</span></div><div class="line"><a name="l01170"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c"> 1170</a></span>&#160;<span class="preprocessor">#define REG_MULTI   (rex.reg_match == NULL)</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;<span class="comment"> * Create a new extmatch and mark it as referenced once.</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;    <span class="keyword">static</span> <a class="code" href="structreg__extmatch___t.html">reg_extmatch_T</a> *</div><div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="regexp_8c.html#a4c012eb4e1025956d735275b0c5b836a"> 1177</a></span>&#160;<a class="code" href="regexp_8c.html#a4c012eb4e1025956d735275b0c5b836a">make_extmatch</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;{</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;    <a class="code" href="structreg__extmatch___t.html">reg_extmatch_T</a>  *em;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;    em = <a class="code" href="vim_8h.html#aa48399cd06c9d5c90ec39e59fe61f1d2">ALLOC_CLEAR_ONE</a>(<a class="code" href="structreg__extmatch___t.html">reg_extmatch_T</a>);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;    <span class="keywordflow">if</span> (em != NULL)</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;    em-&gt;<a class="code" href="structreg__extmatch___t.html#abb0946f16ec7489b59022c64f7ecc22e">refcnt</a> = 1;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;    <span class="keywordflow">return</span> em;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;}</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="comment"> * Add a reference to an extmatch.</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;    <a class="code" href="structreg__extmatch___t.html">reg_extmatch_T</a> *</div><div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab783824ead78e71dcc8db7a031c300dc"> 1191</a></span>&#160;<a class="code" href="regexp_8c.html#ab783824ead78e71dcc8db7a031c300dc">ref_extmatch</a>(<a class="code" href="structreg__extmatch___t.html">reg_extmatch_T</a> *em)</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;{</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;    <span class="keywordflow">if</span> (em != NULL)</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;    em-&gt;<a class="code" href="structreg__extmatch___t.html#abb0946f16ec7489b59022c64f7ecc22e">refcnt</a>++;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;    <span class="keywordflow">return</span> em;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;}</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment"> * Remove a reference to an extmatch.  If there are no references left, free</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment"> * the info.</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l01203"></a><span class="lineno"><a class="line" href="regexp_8c.html#a14a2522cb2782f01fde6ec96eb70e25a"> 1203</a></span>&#160;<a class="code" href="regexp_8c.html#a14a2522cb2782f01fde6ec96eb70e25a">unref_extmatch</a>(<a class="code" href="structreg__extmatch___t.html">reg_extmatch_T</a> *em)</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;{</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;    <span class="keywordflow">if</span> (em != NULL &amp;&amp; --em-&gt;<a class="code" href="structreg__extmatch___t.html#abb0946f16ec7489b59022c64f7ecc22e">refcnt</a> &lt;= 0)</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;    {</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>; ++i)</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(em-&gt;<a class="code" href="structreg__extmatch___t.html#a37bc6d5e3d3cbf48d30d178d54afb5f7">matches</a>[i]);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(em);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;    }</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment"> * Get class of previous character.</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01220"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad3dd54c8989ce3895833653fb7545561"> 1220</a></span>&#160;<a class="code" href="regexp_8c.html#ad3dd54c8989ce3895833653fb7545561">reg_prev_class</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> &gt; rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>)</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="mbyte_8c.html#ae242a847bc7d90805007de2faec56759">mb_get_class_buf</a>(rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> - 1</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;               - (*<a class="code" href="globals_8h.html#a6f9149fd98feaea8859bd233c24b6d71">mb_head_off</a>)(rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>, rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> - 1), rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;}</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"> * Return TRUE if the current rex.input position matches the Visual area.</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01232"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad911eb33f36bd0b1b42d0424297f0e9b"> 1232</a></span>&#160;<a class="code" href="regexp_8c.html#ad911eb33f36bd0b1b42d0424297f0e9b">reg_match_visual</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;{</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;    <a class="code" href="structpos___t.html">pos_T</a>   top, bot;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;    <a class="code" href="structwindow___s.html">win_T</a>   *wp = rex.<a class="code" href="structregexec___t.html#a900291e625f18d6d7eb4c47c08f7205b">reg_win</a> == NULL ? <a class="code" href="globals_8h.html#a1440aee39ae90077fff5aeb23c8a3764">curwin</a> : rex.<a class="code" href="structregexec___t.html#a900291e625f18d6d7eb4c47c08f7205b">reg_win</a>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;    <span class="keywordtype">int</span>     mode;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> start, end;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> start2, end2;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> cols;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;    <span class="comment">/* Check if the buffer is the current buffer. */</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a> != curbuf || <a class="code" href="globals_8h.html#acf84ebbba1c7b96312e1e8af22a3bf9a">VIsual</a>.<a class="code" href="structpos___t.html#abff612ea21a47084625b593756153b3e">lnum</a> == 0)</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;    <span class="keywordflow">if</span> (VIsual_active)</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;    {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="macros_8h.html#a945ec044bf625d33eac106e0556ef5ed">LT_POS</a>(<a class="code" href="globals_8h.html#acf84ebbba1c7b96312e1e8af22a3bf9a">VIsual</a>, wp-&gt;<a class="code" href="structwindow___s.html#a397eb20adbcf2f8a50e1038886c1930c">w_cursor</a>))</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;    {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;        top = <a class="code" href="globals_8h.html#acf84ebbba1c7b96312e1e8af22a3bf9a">VIsual</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        bot = wp-&gt;<a class="code" href="structwindow___s.html#a397eb20adbcf2f8a50e1038886c1930c">w_cursor</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;    }</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;    {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;        top = wp-&gt;<a class="code" href="structwindow___s.html#a397eb20adbcf2f8a50e1038886c1930c">w_cursor</a>;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;        bot = <a class="code" href="globals_8h.html#acf84ebbba1c7b96312e1e8af22a3bf9a">VIsual</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;    }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;    mode = VIsual_mode;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;    }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;    {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="macros_8h.html#a945ec044bf625d33eac106e0556ef5ed">LT_POS</a>(curbuf-&gt;b_visual.vi_start, curbuf-&gt;b_visual.vi_end))</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;    {</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;        top = curbuf-&gt;b_visual.vi_start;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        bot = curbuf-&gt;b_visual.vi_end;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;    }</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;    {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;        top = curbuf-&gt;b_visual.vi_end;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;        bot = curbuf-&gt;b_visual.vi_start;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;    }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;    mode = curbuf-&gt;b_visual.vi_mode;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;    }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;    lnum = rex.<a class="code" href="structregexec___t.html#a07dd1059fc66a251d5e8757e2ebf93c1">lnum</a> + rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;    <span class="keywordflow">if</span> (lnum &lt; top.lnum || lnum &gt; bot.<a class="code" href="structpos___t.html#abff612ea21a47084625b593756153b3e">lnum</a>)</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;    <span class="keywordflow">if</span> (mode == <span class="charliteral">&#39;v&#39;</span>)</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;    {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;    col = (<a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>)(rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> - rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;    <span class="keywordflow">if</span> ((lnum == top.<a class="code" href="structpos___t.html#abff612ea21a47084625b593756153b3e">lnum</a> &amp;&amp; col &lt; top.<a class="code" href="structpos___t.html#a08c5af56d347e155e2cd721d99616ab8">col</a>)</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        || (lnum == bot.<a class="code" href="structpos___t.html#abff612ea21a47084625b593756153b3e">lnum</a> &amp;&amp; col &gt;= bot.<a class="code" href="structpos___t.html#a08c5af56d347e155e2cd721d99616ab8">col</a> + (*<a class="code" href="option_8h.html#a4d3414c2fee9cab576dfcae3e05c8b2b">p_sel</a> != <span class="charliteral">&#39;e&#39;</span>)))</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;    }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mode == <a class="code" href="ascii_8h.html#a512bac9e029a487d788a5a6acf58cfe2">Ctrl_V</a>)</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;    {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;    <a class="code" href="charset_8c.html#a39333219c8243783a64d89c25aecc2c0">getvvcol</a>(wp, &amp;top, &amp;start, NULL, &amp;end);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;    <a class="code" href="charset_8c.html#a39333219c8243783a64d89c25aecc2c0">getvvcol</a>(wp, &amp;bot, &amp;start2, NULL, &amp;end2);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;    <span class="keywordflow">if</span> (start2 &lt; start)</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;        start = start2;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;    <span class="keywordflow">if</span> (end2 &gt; end)</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        end = end2;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;    <span class="keywordflow">if</span> (top.<a class="code" href="structpos___t.html#a08c5af56d347e155e2cd721d99616ab8">col</a> == <a class="code" href="vim_8h.html#aef214bee44b8ea3707359a56c8c921c6">MAXCOL</a> || bot.<a class="code" href="structpos___t.html#a08c5af56d347e155e2cd721d99616ab8">col</a> == <a class="code" href="vim_8h.html#aef214bee44b8ea3707359a56c8c921c6">MAXCOL</a>)</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        end = <a class="code" href="vim_8h.html#aef214bee44b8ea3707359a56c8c921c6">MAXCOL</a>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;    cols = <a class="code" href="charset_8c.html#a4b79b924d5ef76cedc50dc43ecdcef1b">win_linetabsize</a>(wp, rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>, (<a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>)(rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> - rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>));</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;    <span class="keywordflow">if</span> (cols &lt; start || cols &gt; end - (*<a class="code" href="option_8h.html#a4d3414c2fee9cab576dfcae3e05c8b2b">p_sel</a> == <span class="charliteral">&#39;e&#39;</span>))</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;    }</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;}</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;<span class="comment"> * Check the regexp program for its magic number.</span></div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;<span class="comment"> * Return TRUE if it&#39;s wrong.</span></div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01308"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2eae4f57e1ce78c93c4a0c4a69cc96d3"> 1308</a></span>&#160;<a class="code" href="regexp_8c.html#a2eae4f57e1ce78c93c4a0c4a69cc96d3">prog_magic_wrong</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;{</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;    <a class="code" href="structregprog.html">regprog_T</a>   *prog;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;    prog = <a class="code" href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c">REG_MULTI</a> ? rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a> : rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a>-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;    <span class="keywordflow">if</span> (prog-&gt;<a class="code" href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">engine</a> == &amp;nfa_regengine)</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;    <span class="comment">/* For NFA matcher we don&#39;t check the magic */</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a9516e7f9f8711efcb0d381cb09e8f3c5">UCHARAT</a>(((<a class="code" href="structbt__regprog___t.html">bt_regprog_T</a> *)prog)-&gt;program) != <a class="code" href="regexp_8c.html#acfe56a0f73a4952db24dfeb4b15ffd8c">REGMAGIC</a>)</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;    {</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_re_corr));</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;    }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;}</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment"> * Cleanup the subexpressions, if this wasn&#39;t done yet.</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment"> * This construction is used to clear the subexpressions only when they are</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment"> * used (to increase speed).</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l01331"></a><span class="lineno"><a class="line" href="regexp_8c.html#af5d315f845c2bf22b0555fbe7b008814"> 1331</a></span>&#160;<a class="code" href="regexp_8c.html#af5d315f845c2bf22b0555fbe7b008814">cleanup_subexpr</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;{</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#ab0289ebaf6ba4946aecca35f79d2bb15">need_clear_subexpr</a>)</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;    {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c">REG_MULTI</a>)</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;    {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;        <span class="comment">/* Use 0xff to set lnum to -1 */</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(rex.<a class="code" href="structregexec___t.html#af92e2d59b9e77aaa4ff083b2baaf3af8">reg_startpos</a>, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="structlpos___t.html">lpos_T</a>) * <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>);</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(rex.<a class="code" href="structregexec___t.html#a772bb320ad34d787d7009f867578a846">reg_endpos</a>, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="structlpos___t.html">lpos_T</a>) * NSUBEXP);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;    }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;    {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(rex.<a class="code" href="structregexec___t.html#a1065b04b07b945c0eb487c7a63bc7976">reg_startp</a>, 0, <span class="keyword">sizeof</span>(char_u *) * <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>);</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(rex.<a class="code" href="structregexec___t.html#a674bed9a63a693477f540e93cd055fd0">reg_endp</a>, 0, <span class="keyword">sizeof</span>(char_u *) * <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    rex.<a class="code" href="structregexec___t.html#ab0289ebaf6ba4946aecca35f79d2bb15">need_clear_subexpr</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;    }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l01352"></a><span class="lineno"><a class="line" href="regexp_8c.html#a70fd49df055b8f914060b1502805c113"> 1352</a></span>&#160;<a class="code" href="regexp_8c.html#a70fd49df055b8f914060b1502805c113">cleanup_zsubexpr</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;{</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#aa87c2a74de8a0b64bbba077af9194255">need_clear_zsubexpr</a>)</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;    {</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c">REG_MULTI</a>)</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;    {</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="comment">/* Use 0xff to set lnum to -1 */</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(reg_startzpos, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="structlpos___t.html">lpos_T</a>) * <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>);</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(reg_endzpos, 0xff, <span class="keyword">sizeof</span>(<a class="code" href="structlpos___t.html">lpos_T</a>) * NSUBEXP);</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;    }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;    {</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(<a class="code" href="regexp_8c.html#a1bdf6e238dca7eec87cd0053378b510a">reg_startzp</a>, 0, <span class="keyword">sizeof</span>(char_u *) * <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(<a class="code" href="regexp_8c.html#a87f17acaa43317dad51853d50cdfa4c6">reg_endzp</a>, 0, <span class="keyword">sizeof</span>(char_u *) * <a class="code" href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a>);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;    }</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;    rex.<a class="code" href="structregexec___t.html#aa87c2a74de8a0b64bbba077af9194255">need_clear_zsubexpr</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    }</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;}</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment"> * Advance rex.lnum, rex.line and rex.input to the next line.</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l01376"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae31aee91fc381a04c6ddc245d23f5b41"> 1376</a></span>&#160;<a class="code" href="regexp_8c.html#ae31aee91fc381a04c6ddc245d23f5b41">reg_nextline</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;{</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;    rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a> = <a class="code" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a>(++rex.<a class="code" href="structregexec___t.html#a07dd1059fc66a251d5e8757e2ebf93c1">lnum</a>);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;    rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> = rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;    <a class="code" href="misc1_8c.html#ab76e97b0e4c8694e5ecae285d0231b22">fast_breakcheck</a>();</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;}</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;<span class="comment"> * Check whether a backreference matches.</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment"> * Returns RA_FAIL, RA_NOMATCH or RA_MATCH.</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment"> * If &quot;bytelen&quot; is not NULL, it is set to the byte length of the match in the</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;<span class="comment"> * last line.</span></div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01390"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2075541ea737426246b24b3ea3c12f37"> 1390</a></span>&#160;<a class="code" href="regexp_8c.html#a2075541ea737426246b24b3ea3c12f37">match_with_backref</a>(</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> start_lnum,</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>  start_col,</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> end_lnum,</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a>  end_col,</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;    <span class="keywordtype">int</span>      *bytelen)</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;{</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    clnum = start_lnum;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> ccol = start_col;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;    <span class="keywordtype">int</span>     len;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;    char_u  *p;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;    <span class="keywordflow">if</span> (bytelen != NULL)</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;    *bytelen = 0;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;    <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;    <span class="comment">/* Since getting one line may invalidate the other, need to make copy.</span></div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;<span class="comment">     * Slow! */</span></div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a> != <a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a>)</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;    {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;        len = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a> == NULL || len &gt;= (<span class="keywordtype">int</span>)<a class="code" href="regexp_8c.html#ac73960fd6b38099c8d8df9a17bf90ac2">reg_tofreelen</a>)</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;        {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;        len += 50;  <span class="comment">/* get some extra */</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(<a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a>);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;        <a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a> = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(len);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a> == NULL)</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a501c5953f3d8e248063f076d95c424f9">RA_FAIL</a>; <span class="comment">/* out of memory!*/</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;        <a class="code" href="regexp_8c.html#ac73960fd6b38099c8d8df9a17bf90ac2">reg_tofreelen</a> = len;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;        }</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        <a class="code" href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a>(<a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a>, rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;        rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> = <a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a> + (rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a> - rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a>);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        rex.<a class="code" href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">line</a> = <a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;    }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;    <span class="comment">/* Get the line to compare with. */</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;    p = <a class="code" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a>(clnum);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;    <span class="keywordflow">if</span> (clnum == end_lnum)</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        len = end_col - ccol;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        len = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(p + ccol);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a7577eec832babde787008ac19228eb49">cstrncmp</a>(p + ccol, rex.<a class="code" href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">input</a>, &amp;len) != 0)</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a3b77f97627d25f5564e3b6ad8c529d8b">RA_NOMATCH</a>;  <span class="comment">/* doesn&#39;t match */</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">if</span> (bytelen != NULL)</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        *bytelen += len;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;    <span class="keywordflow">if</span> (clnum == end_lnum)</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;        <span class="keywordflow">break</span>;      <span class="comment">/* match and at end! */</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;    <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#a07dd1059fc66a251d5e8757e2ebf93c1">lnum</a> &gt;= rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a>)</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a3b77f97627d25f5564e3b6ad8c529d8b">RA_NOMATCH</a>;  <span class="comment">/* text too short */</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;    <span class="comment">/* Advance to next line. */</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    <a class="code" href="regexp_8c.html#ae31aee91fc381a04c6ddc245d23f5b41">reg_nextline</a>();</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span> (bytelen != NULL)</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        *bytelen = 0;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    ++clnum;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;    ccol = 0;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;    <span class="keywordflow">if</span> (got_int)</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#a501c5953f3d8e248063f076d95c424f9">RA_FAIL</a>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;    }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;    <span class="comment">/* found a match!  Note that rex.line may now point to a copy of the line,</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">     * that should not matter. */</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#ae7b1fa1508ffb8177970993fb004b970">RA_MATCH</a>;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;}</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment"> * Used in a place where no * or \+ can follow.</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01460"></a><span class="lineno"><a class="line" href="regexp_8c.html#ab644b69b55c309c51d3a1c320f1a4c8c"> 1460</a></span>&#160;<a class="code" href="regexp_8c.html#ab644b69b55c309c51d3a1c320f1a4c8c">re_mult_next</a>(<span class="keywordtype">char</span> *what)</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a9289fd60d49c1a7f8f18818cdffdf29d">re_multi_type</a>(<a class="code" href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">peekchr</a>()) == <a class="code" href="regexp_8c.html#a56cd45f8ad6a13f958427ad4bf7ed7a1">MULTI_MULT</a>)</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;    {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;       <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E888: (NFA regexp) cannot repeat %s&quot;</span>), what);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;       rc_did_emsg = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;       <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;    }</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;}</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"><a class="line" href="structdecomp___t.html"> 1471</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;{</div><div class="line"><a name="l01473"></a><span class="lineno"><a class="line" href="structdecomp___t.html#a1b0e71f8a5ba3d1eac9a79ff6d265751"> 1473</a></span>&#160;    <span class="keywordtype">int</span> a, b, <a class="code" href="structdecomp___t.html#a1b0e71f8a5ba3d1eac9a79ff6d265751">c</a>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;} <a class="code" href="structdecomp___t.html">decomp_T</a>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">/* 0xfb20 - 0xfb4f */</span></div><div class="line"><a name="l01478"></a><span class="lineno"><a class="line" href="regexp_8c.html#a98347110ae77b09278f1dda77ffbd7c6"> 1478</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structdecomp___t.html">decomp_T</a> <a class="code" href="regexp_8c.html#a98347110ae77b09278f1dda77ffbd7c6">decomp_table</a>[0xfb4f-0xfb20+1] =</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;{</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;    {0x5e2,0,0},        <span class="comment">/* 0xfb20   alt ayin */</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;    {0x5d0,0,0},        <span class="comment">/* 0xfb21   alt alef */</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;    {0x5d3,0,0},        <span class="comment">/* 0xfb22   alt dalet */</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;    {0x5d4,0,0},        <span class="comment">/* 0xfb23   alt he */</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;    {0x5db,0,0},        <span class="comment">/* 0xfb24   alt kaf */</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;    {0x5dc,0,0},        <span class="comment">/* 0xfb25   alt lamed */</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;    {0x5dd,0,0},        <span class="comment">/* 0xfb26   alt mem-sofit */</span></div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;    {0x5e8,0,0},        <span class="comment">/* 0xfb27   alt resh */</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    {0x5ea,0,0},        <span class="comment">/* 0xfb28   alt tav */</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;    {<span class="charliteral">&#39;+&#39;</span>, 0, 0},        <span class="comment">/* 0xfb29   alt plus */</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    {0x5e9, 0x5c1, 0},      <span class="comment">/* 0xfb2a   shin+shin-dot */</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;    {0x5e9, 0x5c2, 0},      <span class="comment">/* 0xfb2b   shin+sin-dot */</span></div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;    {0x5e9, 0x5c1, 0x5bc},  <span class="comment">/* 0xfb2c   shin+shin-dot+dagesh */</span></div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;    {0x5e9, 0x5c2, 0x5bc},  <span class="comment">/* 0xfb2d   shin+sin-dot+dagesh */</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;    {0x5d0, 0x5b7, 0},      <span class="comment">/* 0xfb2e   alef+patah */</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;    {0x5d0, 0x5b8, 0},      <span class="comment">/* 0xfb2f   alef+qamats */</span></div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;    {0x5d0, 0x5b4, 0},      <span class="comment">/* 0xfb30   alef+hiriq */</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;    {0x5d1, 0x5bc, 0},      <span class="comment">/* 0xfb31   bet+dagesh */</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;    {0x5d2, 0x5bc, 0},      <span class="comment">/* 0xfb32   gimel+dagesh */</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;    {0x5d3, 0x5bc, 0},      <span class="comment">/* 0xfb33   dalet+dagesh */</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;    {0x5d4, 0x5bc, 0},      <span class="comment">/* 0xfb34   he+dagesh */</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;    {0x5d5, 0x5bc, 0},      <span class="comment">/* 0xfb35   vav+dagesh */</span></div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;    {0x5d6, 0x5bc, 0},      <span class="comment">/* 0xfb36   zayin+dagesh */</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    {0xfb37, 0, 0},     <span class="comment">/* 0xfb37 -- UNUSED */</span></div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    {0x5d8, 0x5bc, 0},      <span class="comment">/* 0xfb38   tet+dagesh */</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    {0x5d9, 0x5bc, 0},      <span class="comment">/* 0xfb39   yud+dagesh */</span></div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    {0x5da, 0x5bc, 0},      <span class="comment">/* 0xfb3a   kaf sofit+dagesh */</span></div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;    {0x5db, 0x5bc, 0},      <span class="comment">/* 0xfb3b   kaf+dagesh */</span></div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    {0x5dc, 0x5bc, 0},      <span class="comment">/* 0xfb3c   lamed+dagesh */</span></div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;    {0xfb3d, 0, 0},     <span class="comment">/* 0xfb3d -- UNUSED */</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    {0x5de, 0x5bc, 0},      <span class="comment">/* 0xfb3e   mem+dagesh */</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;    {0xfb3f, 0, 0},     <span class="comment">/* 0xfb3f -- UNUSED */</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    {0x5e0, 0x5bc, 0},      <span class="comment">/* 0xfb40   nun+dagesh */</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;    {0x5e1, 0x5bc, 0},      <span class="comment">/* 0xfb41   samech+dagesh */</span></div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    {0xfb42, 0, 0},     <span class="comment">/* 0xfb42 -- UNUSED */</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;    {0x5e3, 0x5bc, 0},      <span class="comment">/* 0xfb43   pe sofit+dagesh */</span></div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    {0x5e4, 0x5bc,0},       <span class="comment">/* 0xfb44   pe+dagesh */</span></div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    {0xfb45, 0, 0},     <span class="comment">/* 0xfb45 -- UNUSED */</span></div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;    {0x5e6, 0x5bc, 0},      <span class="comment">/* 0xfb46   tsadi+dagesh */</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    {0x5e7, 0x5bc, 0},      <span class="comment">/* 0xfb47   qof+dagesh */</span></div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;    {0x5e8, 0x5bc, 0},      <span class="comment">/* 0xfb48   resh+dagesh */</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;    {0x5e9, 0x5bc, 0},      <span class="comment">/* 0xfb49   shin+dagesh */</span></div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;    {0x5ea, 0x5bc, 0},      <span class="comment">/* 0xfb4a   tav+dagesh */</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;    {0x5d5, 0x5b9, 0},      <span class="comment">/* 0xfb4b   vav+holam */</span></div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;    {0x5d1, 0x5bf, 0},      <span class="comment">/* 0xfb4c   bet+rafe */</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;    {0x5db, 0x5bf, 0},      <span class="comment">/* 0xfb4d   kaf+rafe */</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;    {0x5e4, 0x5bf, 0},      <span class="comment">/* 0xfb4e   pe+rafe */</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;    {0x5d0, 0x5dc, 0}       <span class="comment">/* 0xfb4f   alef-lamed */</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;};</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l01531"></a><span class="lineno"><a class="line" href="regexp_8c.html#a30d96694dfc7c35f66fecb91a1974ee0"> 1531</a></span>&#160;<a class="code" href="regexp_8c.html#a30d96694dfc7c35f66fecb91a1974ee0">mb_decompose</a>(<span class="keywordtype">int</span> c, <span class="keywordtype">int</span> *c1, <span class="keywordtype">int</span> *c2, <span class="keywordtype">int</span> *c3)</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;{</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;    <a class="code" href="structdecomp___t.html">decomp_T</a> <a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;    <span class="keywordflow">if</span> (c &gt;= 0xfb20 &amp;&amp; c &lt;= 0xfb4f)</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;    {</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;    d = decomp_table[c - 0xfb20];</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;    *c1 = d.<a class="code" href="structdecomp___t.html#abe4253441cff78e3fd3abc3ef99dac2a">a</a>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;    *c2 = d.<a class="code" href="structdecomp___t.html#aacd3aac354ee475cbc7bd664327950b3">b</a>;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;    *c3 = d.<a class="code" href="structdecomp___t.html#a1b0e71f8a5ba3d1eac9a79ff6d265751">c</a>;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;    }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    {</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;    *c1 = c;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    *c2 = *c3 = 0;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;    }</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;}</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<span class="comment"> * Compare two strings, ignore case if rex.reg_ic set.</span></div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<span class="comment"> * Return 0 if strings match, non-zero otherwise.</span></div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;<span class="comment"> * Correct the length &quot;*n&quot; when composing characters are ignored.</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01555"></a><span class="lineno"><a class="line" href="regexp_8c.html#a7577eec832babde787008ac19228eb49"> 1555</a></span>&#160;<a class="code" href="regexp_8c.html#a7577eec832babde787008ac19228eb49">cstrncmp</a>(char_u *s1, char_u *s2, <span class="keywordtype">int</span> *n)</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;{</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;    <span class="keywordtype">int</span>     result;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordflow">if</span> (!rex.<a class="code" href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033">reg_ic</a>)</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    result = <a class="code" href="vim_8h.html#a5f1ef744c34be69aec1531f1fe604a9b">STRNCMP</a>(s1, s2, *n);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    result = <a class="code" href="vim_8h.html#a1c402209d2bd8cf0ab105a9150203bf7">MB_STRNICMP</a>(s1, s2, *n);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="comment">/* if it failed and it&#39;s utf8 and we want to combineignore: */</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;    <span class="keywordflow">if</span> (result != 0 &amp;&amp; enc_utf8 &amp;&amp; rex.<a class="code" href="structregexec___t.html#af889cf51c0f23bf4f7c6cc841e716dc0">reg_icombine</a>)</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;    char_u  *str1, *str2;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordtype">int</span> c1, c2, c11, c12;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;    <span class="keywordtype">int</span> junk;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;    <span class="comment">/* we have to handle the strcmp ourselves, since it is necessary to</span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment">     * deal with the composing characters by ignoring them: */</span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    str1 = s1;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;    str2 = s2;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    c1 = c2 = 0;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    <span class="keywordflow">while</span> ((<span class="keywordtype">int</span>)(str1 - s1) &lt; *n)</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    {</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        c1 = <a class="code" href="mbyte_8c.html#a505073bff7332ecc1f0c8c21d190264c">mb_ptr2char_adv</a>(&amp;str1);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        c2 = <a class="code" href="mbyte_8c.html#a505073bff7332ecc1f0c8c21d190264c">mb_ptr2char_adv</a>(&amp;str2);</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;        <span class="comment">// Decompose the character if necessary, into &#39;base&#39; characters.</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;        <span class="comment">// Currently hard-coded for Hebrew, Arabic to be done...</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;        <span class="keywordflow">if</span> (c1 != c2 &amp;&amp; (!rex.<a class="code" href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033">reg_ic</a> || <a class="code" href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a>(c1) != <a class="code" href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a>(c2)))</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;        {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        <span class="comment">// decomposition necessary?</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;        <a class="code" href="regexp_8c.html#a30d96694dfc7c35f66fecb91a1974ee0">mb_decompose</a>(c1, &amp;c11, &amp;junk, &amp;junk);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        <a class="code" href="regexp_8c.html#a30d96694dfc7c35f66fecb91a1974ee0">mb_decompose</a>(c2, &amp;c12, &amp;junk, &amp;junk);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;        c1 = c11;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        c2 = c12;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;        <span class="keywordflow">if</span> (c11 != c12</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                &amp;&amp; (!rex.<a class="code" href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033">reg_ic</a> || <a class="code" href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a>(c11) != <a class="code" href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a>(c12)))</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;        }</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;    }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;    result = c2 - c1;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    <span class="keywordflow">if</span> (result == 0)</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;        *n = (int)(str2 - s2);</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;    }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;}</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment"> * cstrchr: This function is used a lot for simple searches, keep it fast!</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;    <span class="keyword">static</span> char_u *</div><div class="line"><a name="l01607"></a><span class="lineno"><a class="line" href="regexp_8c.html#a4b3e3bfff3b3a2cc8c09d7c0c53ee92a"> 1607</a></span>&#160;<a class="code" href="regexp_8c.html#a4b3e3bfff3b3a2cc8c09d7c0c53ee92a">cstrchr</a>(char_u *s, <span class="keywordtype">int</span> c)</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;{</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;    char_u  *p;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;    <span class="keywordtype">int</span>     cc;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    <span class="keywordflow">if</span> (!rex.<a class="code" href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033">reg_ic</a> || (!enc_utf8 &amp;&amp; <a class="code" href="globals_8h.html#a203f91ef47660047aeb8bb865f6cba65">mb_char2len</a>(c) &gt; 1))</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(s, c);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    <span class="comment">/* tolower() and toupper() can be slow, comparing twice should be a lot</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="comment">     * faster (esp. when using MS Visual C++!).</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="comment">     * For UTF-8 need to use folded case. */</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;    <span class="keywordflow">if</span> (enc_utf8 &amp;&amp; c &gt; 0x80)</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    cc = <a class="code" href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a>(c);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="macros_8h.html#a2bfad910dd34f80c38ec2c345bc0215f">MB_ISUPPER</a>(c))</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;    cc = <a class="code" href="macros_8h.html#a864f2928398599e3ead685d4c964cc7d">MB_TOLOWER</a>(c);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="macros_8h.html#a905818ace660bda0b271212f7515751f">MB_ISLOWER</a>(c))</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;    cc = <a class="code" href="macros_8h.html#a56e5c3cffab565358686caf609091f04">MB_TOUPPER</a>(c);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>(s, c);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;    <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;    {</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;    <span class="keywordflow">for</span> (p = s; *p != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>; p += (*mb_ptr2len)(p))</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;    {</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        <span class="keywordflow">if</span> (enc_utf8 &amp;&amp; c &gt; 0x80)</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a>(<a class="code" href="mbyte_8c.html#aaad0e5164799bb3256d7c6827aa9e670">utf_ptr2char</a>(p)) == cc)</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;            <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;        }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*p == c || *p == cc)</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;    }</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;    <span class="comment">/* Faster version for when there are no multi-byte characters. */</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;    <span class="keywordflow">for</span> (p = s; *p != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>; ++p)</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordflow">if</span> (*p == c || *p == cc)</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">/***************************************************************</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="comment"> *            regsub stuff                 *</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="comment"> ***************************************************************/</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;<span class="comment"> * We should define ftpr as a pointer to a function returning a pointer to</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment"> * a function returning a pointer to a function ...</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment"> * This is impossible, so we declare a pointer to a function returning a</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;<span class="comment"> * pointer to a function returning void. This should work for all compilers.</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01660"></a><span class="lineno"><a class="line" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32"> 1660</a></span>&#160;<span class="keyword">typedef</span> void (*(*<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)(<span class="keywordtype">int</span> *, <span class="keywordtype">int</span>))();</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regexp_8c.html#a2e408adf711bd3d3f1fe33c48b79983b">vim_regsub_both</a>(char_u *source, <a class="code" href="structtypval___t.html">typval_T</a> *expr, char_u *dest, <span class="keywordtype">int</span> copy, <span class="keywordtype">int</span> magic, <span class="keywordtype">int</span> backslash);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;    <span class="keyword">static</span> <a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a></div><div class="line"><a name="l01665"></a><span class="lineno"><a class="line" href="regexp_8c.html#a1f4f5bff2d9bda517e295c8355937b9b"> 1665</a></span>&#160;<a class="code" href="regexp_8c.html#a1f4f5bff2d9bda517e295c8355937b9b">do_upper</a>(<span class="keywordtype">int</span> *<a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a>, <span class="keywordtype">int</span> c)</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;{</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;    *d = <a class="code" href="macros_8h.html#a56e5c3cffab565358686caf609091f04">MB_TOUPPER</a>(c);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;}</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;    <span class="keyword">static</span> <a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a></div><div class="line"><a name="l01673"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2e5f1ce30421c6ca1dbd3f366c06b646"> 1673</a></span>&#160;<a class="code" href="regexp_8c.html#a2e5f1ce30421c6ca1dbd3f366c06b646">do_Upper</a>(<span class="keywordtype">int</span> *<a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a>, <span class="keywordtype">int</span> c)</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;{</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;    *d = <a class="code" href="macros_8h.html#a56e5c3cffab565358686caf609091f04">MB_TOUPPER</a>(c);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)<a class="code" href="regexp_8c.html#a2e5f1ce30421c6ca1dbd3f366c06b646">do_Upper</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;}</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keyword">static</span> <a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a></div><div class="line"><a name="l01681"></a><span class="lineno"><a class="line" href="regexp_8c.html#a6122ba1b1cf0b462e7fc87564b0315a5"> 1681</a></span>&#160;<a class="code" href="regexp_8c.html#a6122ba1b1cf0b462e7fc87564b0315a5">do_lower</a>(<span class="keywordtype">int</span> *<a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a>, <span class="keywordtype">int</span> c)</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;{</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;    *d = <a class="code" href="macros_8h.html#a864f2928398599e3ead685d4c964cc7d">MB_TOLOWER</a>(c);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;}</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keyword">static</span> <a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a></div><div class="line"><a name="l01689"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae7a932cc861be3c07a5604e13457cd34"> 1689</a></span>&#160;<a class="code" href="regexp_8c.html#ae7a932cc861be3c07a5604e13457cd34">do_Lower</a>(<span class="keywordtype">int</span> *<a class="code" href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">d</a>, <span class="keywordtype">int</span> c)</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;{</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;    *d = <a class="code" href="macros_8h.html#a864f2928398599e3ead685d4c964cc7d">MB_TOLOWER</a>(c);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)<a class="code" href="regexp_8c.html#ae7a932cc861be3c07a5604e13457cd34">do_Lower</a>;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;}</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="comment"> * regtilde(): Replace tildes in the pattern by the old pattern.</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="comment"> * Short explanation of the tilde: It stands for the previous replacement</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;<span class="comment"> * pattern.  If that previous pattern also contains a ~ we should go back a</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment"> * step further...  But we insert the previous pattern into the current one</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="comment"> * and remember that.</span></div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;<span class="comment"> * This still does not handle the case where &quot;magic&quot; changes.  So require the</span></div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;<span class="comment"> * user to keep his hands off of &quot;magic&quot;.</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;<span class="comment"> * The tildes are parsed once before the first call to vim_regsub().</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;    char_u *</div><div class="line"><a name="l01709"></a><span class="lineno"><a class="line" href="regexp_8c.html#a80efb6fd97eb3e63e7e3ccb7b63832a5"> 1709</a></span>&#160;<a class="code" href="regexp_8c.html#a80efb6fd97eb3e63e7e3ccb7b63832a5">regtilde</a>(char_u *source, <span class="keywordtype">int</span> magic)</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;{</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;    char_u  *newsub = source;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;    char_u  *tmpsub;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;    char_u  *p;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;    <span class="keywordtype">int</span>     len;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;    <span class="keywordtype">int</span>     prevlen;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;    <span class="keywordflow">for</span> (p = newsub; *p; ++p)</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    {</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    <span class="keywordflow">if</span> ((*p == <span class="charliteral">&#39;~&#39;</span> &amp;&amp; magic) || (*p == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; *(p + 1) == <span class="charliteral">&#39;~&#39;</span> &amp;&amp; !magic))</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a> != NULL)</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;        {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        <span class="comment">/* length = len(newsub) - 1 + len(prev_sub) + 1 */</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        prevlen = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(<a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a>);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        tmpsub = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(newsub) + prevlen);</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keywordflow">if</span> (tmpsub != NULL)</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        {</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;            <span class="comment">/* copy prefix */</span></div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            len = (int)(p - newsub);    <span class="comment">/* not including ~ */</span></div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(tmpsub, newsub, (<span class="keywordtype">size_t</span>)len);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            <span class="comment">/* interpret tilde */</span></div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;            <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(tmpsub + len, <a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a>, (<span class="keywordtype">size_t</span>)prevlen);</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;            <span class="comment">/* copy postfix */</span></div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            <span class="keywordflow">if</span> (!magic)</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;            ++p;            <span class="comment">/* back off \ */</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;            <a class="code" href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a>(tmpsub + len + prevlen, p + 1);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="keywordflow">if</span> (newsub != source)   <span class="comment">/* already allocated newsub */</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;            <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(newsub);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;            newsub = tmpsub;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            p = newsub + len + prevlen;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        }</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;        }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (magic)</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <a class="code" href="vim_8h.html#a1d75ac7dfcfa7aabca75ae7b1333ac9e">STRMOVE</a>(p, p + 1);  <span class="comment">/* remove &#39;~&#39; */</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;        <a class="code" href="vim_8h.html#a1d75ac7dfcfa7aabca75ae7b1333ac9e">STRMOVE</a>(p, p + 2);  <span class="comment">/* remove &#39;\~&#39; */</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;        --p;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;    }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;    {</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;        <span class="keywordflow">if</span> (*p == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; p[1])     <span class="comment">/* skip escaped characters */</span></div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;        ++p;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;        p += (*mb_ptr2len)(p) - 1;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;    }</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    }</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(<a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a>);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">if</span> (newsub != source)   <span class="comment">/* newsub was allocated, just keep it */</span></div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;    <a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a> = newsub;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">else</span>            <span class="comment">/* no ~ found, need to save newsub  */</span></div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;    <a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a> = <a class="code" href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a>(newsub);</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="keywordflow">return</span> newsub;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;}</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l01768"></a><span class="lineno"><a class="line" href="regexp_8c.html#a27a7052023bf8c7fa31fe4194afc705b"> 1768</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regexp_8c.html#a27a7052023bf8c7fa31fe4194afc705b">can_f_submatch</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;  <span class="comment">/* TRUE when submatch() can be used */</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;<span class="comment">/* These pointers are used for reg_submatch().  Needed for when the</span></div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;<span class="comment"> * substitution string is an expression that contains a call to substitute()</span></div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment"> * and submatch(). */</span></div><div class="line"><a name="l01773"></a><span class="lineno"><a class="line" href="structregsubmatch___t.html"> 1773</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01774"></a><span class="lineno"><a class="line" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e"> 1774</a></span>&#160;    <a class="code" href="structregmatch___t.html">regmatch_T</a>  *<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>;</div><div class="line"><a name="l01775"></a><span class="lineno"><a class="line" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071"> 1775</a></span>&#160;    <a class="code" href="structregmmatch___t.html">regmmatch_T</a> *<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>;</div><div class="line"><a name="l01776"></a><span class="lineno"><a class="line" href="structregsubmatch___t.html#a5fa015f4fc614ed3f8d7fb29f5eba1c4"> 1776</a></span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    <a class="code" href="structregsubmatch___t.html#a5fa015f4fc614ed3f8d7fb29f5eba1c4">sm_firstlnum</a>;</div><div class="line"><a name="l01777"></a><span class="lineno"><a class="line" href="structregsubmatch___t.html#a009430b5c7cae4f93f72caacf0882919"> 1777</a></span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    <a class="code" href="structregsubmatch___t.html#a009430b5c7cae4f93f72caacf0882919">sm_maxline</a>;</div><div class="line"><a name="l01778"></a><span class="lineno"><a class="line" href="structregsubmatch___t.html#a7a2dfee62db80c4fc56a906768d4841f"> 1778</a></span>&#160;    <span class="keywordtype">int</span>     <a class="code" href="structregsubmatch___t.html#a7a2dfee62db80c4fc56a906768d4841f">sm_line_lbr</a>;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;} <a class="code" href="structregsubmatch___t.html">regsubmatch_T</a>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;</div><div class="line"><a name="l01781"></a><span class="lineno"><a class="line" href="regexp_8c.html#aeea6d0463dd8c6cf65d70e2f1054d3e8"> 1781</a></span>&#160;<span class="keyword">static</span> <a class="code" href="structregsubmatch___t.html">regsubmatch_T</a> <a class="code" href="regexp_8c.html#aeea6d0463dd8c6cf65d70e2f1054d3e8">rsm</a>;  <span class="comment">/* can only be used when can_f_submatch is TRUE */</span></div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;<span class="comment"> * Put the submatches in &quot;argv[0]&quot; which is a list passed into call_func() by</span></div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;<span class="comment"> * vim_regsub_both().</span></div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01791"></a><span class="lineno"><a class="line" href="regexp_8c.html#a725239b8e216f17ca35b612c60160de7"> 1791</a></span>&#160;<a class="code" href="regexp_8c.html#a725239b8e216f17ca35b612c60160de7">fill_submatch_list</a>(<span class="keywordtype">int</span> argc <a class="code" href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>, <a class="code" href="structtypval___t.html">typval_T</a> *argv, <span class="keywordtype">int</span> argcount)</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;{</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;    <a class="code" href="structlistitem___s.html">listitem_T</a>  *li;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    char_u  *s;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;    <span class="keywordflow">if</span> (argcount == 0)</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="comment">/* called function doesn&#39;t take an argument */</span></div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="comment">/* Relies on sl_list to be the first item in staticList10_T. */</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <a class="code" href="list_8c.html#a814f594703aac00d08b487addccb55a3">init_static_list</a>((<a class="code" href="structstatic_list10___t.html">staticList10_T</a> *)(argv-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a886659f986c150dab284f1d5ef64ee00">v_list</a>));</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;    <span class="comment">/* There are always 10 list items in staticList10_T. */</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    li = argv-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a886659f986c150dab284f1d5ef64ee00">v_list</a>-&gt;<a class="code" href="structlistvar___s.html#ac58b71606ce99566ca5d48f92457efd7">lv_first</a>;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 10; ++i)</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    {</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;    s = rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a501f8e5ba3a1835b4f033359c7b6a203">startp</a>[i];</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;    <span class="keywordflow">if</span> (s == NULL || rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[i] == NULL)</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;        s = NULL;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;        s = <a class="code" href="misc2_8c.html#a871ddb65e41d8bed1c38754d59737a5b">vim_strnsave</a>(s, (<span class="keywordtype">int</span>)(rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[i] - s));</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    li-&gt;<a class="code" href="structlistitem___s.html#a65661823089984c3ee9b5e089d549140">li_tv</a>.<a class="code" href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">v_type</a> = <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9db9f9506f3e8660f6bd25e9c48745f1">VAR_STRING</a>;</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    li-&gt;<a class="code" href="structlistitem___s.html#a65661823089984c3ee9b5e089d549140">li_tv</a>.<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#ad5403b6cf230c7f663901d46079b9ac3">v_string</a> = s;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    li = li-&gt;<a class="code" href="structlistitem___s.html#abb33a84716f24bdf8c15f1ab8ba7a9ca">li_next</a>;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    }</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;    <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;}</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l01821"></a><span class="lineno"><a class="line" href="regexp_8c.html#abfd5fcde7ad3d5da685528e7e6a20128"> 1821</a></span>&#160;<a class="code" href="regexp_8c.html#abfd5fcde7ad3d5da685528e7e6a20128">clear_submatch_list</a>(<a class="code" href="structstatic_list10___t.html">staticList10_T</a> *sl)</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;{</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;    <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; 10; ++i)</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(sl-&gt;<a class="code" href="structstatic_list10___t.html#ac3ce93228f7a2254b0ca536c5902c674">sl_items</a>[i].<a class="code" href="structlistitem___s.html#a65661823089984c3ee9b5e089d549140">li_tv</a>.<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#ad5403b6cf230c7f663901d46079b9ac3">v_string</a>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;<span class="comment"> * vim_regsub() - perform substitutions after a vim_regexec() or</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment"> * vim_regexec_multi() match.</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment"> * If &quot;copy&quot; is TRUE really copy into &quot;dest&quot;.</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment"> * If &quot;copy&quot; is FALSE nothing is copied, this is just to find out the length</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<span class="comment"> * of the result.</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment"> * If &quot;backslash&quot; is TRUE, a backslash will be removed later, need to double</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment"> * them to keep them, and insert a backslash before a CR to avoid it being</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment"> * replaced with a line break later.</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;<span class="comment"> * Note: The matched text must not change between the call of</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment"> * vim_regexec()/vim_regexec_multi() and vim_regsub()!  It would make the back</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment"> * references invalid!</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;<span class="comment"> * Returns the size of the replacement, including terminating NUL.</span></div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l01849"></a><span class="lineno"><a class="line" href="regexp_8c.html#a3d79271a6d5ca0e0fc6da065a475c0cc"> 1849</a></span>&#160;<a class="code" href="regexp_8c.html#a3d79271a6d5ca0e0fc6da065a475c0cc">vim_regsub</a>(</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;    <a class="code" href="structregmatch___t.html">regmatch_T</a>  *rmp,</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;    char_u  *source,</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;    <a class="code" href="structtypval___t.html">typval_T</a>    *expr,</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;    char_u  *dest,</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;    <span class="keywordtype">int</span>     copy,</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;    <span class="keywordtype">int</span>     magic,</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;    <span class="keywordtype">int</span>     backslash)</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;{</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordtype">int</span>     result;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <a class="code" href="structregexec___t.html">regexec_T</a>   rex_save;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordtype">int</span>     rex_in_use_save = <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="comment">/* Being called recursively, save the state. */</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    rex_save = <a class="code" href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847">rex</a>;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;    rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a> = rmp;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a> = NULL;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a> = 0;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;    rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a> = curbuf;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    rex.<a class="code" href="structregexec___t.html#a53e1764891cdaa02f204852056b4de3e">reg_line_lbr</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;    result = <a class="code" href="regexp_8c.html#a2e408adf711bd3d3f1fe33c48b79983b">vim_regsub_both</a>(source, expr, dest, copy, magic, backslash);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = rex_in_use_save;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;    rex = rex_save;</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;}</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l01882"></a><span class="lineno"><a class="line" href="regexp_8c.html#af1b2cf37f77fe2ac8deeaf542f2db413"> 1882</a></span>&#160;<a class="code" href="regexp_8c.html#af1b2cf37f77fe2ac8deeaf542f2db413">vim_regsub_multi</a>(</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <a class="code" href="structregmmatch___t.html">regmmatch_T</a> *rmp,</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum,</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;    char_u  *source,</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;    char_u  *dest,</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;    <span class="keywordtype">int</span>     copy,</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;    <span class="keywordtype">int</span>     magic,</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;    <span class="keywordtype">int</span>     backslash)</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;{</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;    <span class="keywordtype">int</span>     result;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;    <a class="code" href="structregexec___t.html">regexec_T</a>   rex_save;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    <span class="keywordtype">int</span>     rex_in_use_save = <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;    <span class="comment">/* Being called recursively, save the state. */</span></div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    rex_save = <a class="code" href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847">rex</a>;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;    rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a> = NULL;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;    rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a> = rmp;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;    rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a> = curbuf;   <span class="comment">/* always works on the current buffer! */</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;    rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a> = lnum;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;    rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a> = curbuf-&gt;b_ml.ml_line_count - lnum;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    rex.<a class="code" href="structregexec___t.html#a53e1764891cdaa02f204852056b4de3e">reg_line_lbr</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;    result = <a class="code" href="regexp_8c.html#a2e408adf711bd3d3f1fe33c48b79983b">vim_regsub_both</a>(source, NULL, dest, copy, magic, backslash);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = rex_in_use_save;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    rex = rex_save;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;    <span class="keywordflow">return</span> result;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;}</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01916"></a><span class="lineno"><a class="line" href="regexp_8c.html#a2e408adf711bd3d3f1fe33c48b79983b"> 1916</a></span>&#160;<a class="code" href="regexp_8c.html#a2e408adf711bd3d3f1fe33c48b79983b">vim_regsub_both</a>(</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    char_u  *source,</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;    <a class="code" href="structtypval___t.html">typval_T</a>    *expr,</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    char_u  *dest,</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordtype">int</span>     copy,</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;    <span class="keywordtype">int</span>     magic,</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;    <span class="keywordtype">int</span>     backslash)</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;{</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;    char_u  *src;</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    char_u  *dst;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    char_u  *s;</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;    <span class="keywordtype">int</span>     c;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;    <span class="keywordtype">int</span>     cc;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;    <span class="keywordtype">int</span>     no = -1;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;    <a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>  func_all = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;    <a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>  func_one = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    clnum = 0;  <span class="comment">/* init for GCC */</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;    <span class="keywordtype">int</span>     len = 0;    <span class="comment">/* init for GCC */</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;    <span class="keyword">static</span> char_u   *eval_result = NULL;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;    <span class="comment">/* Be paranoid... */</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;    <span class="keywordflow">if</span> ((source == NULL &amp;&amp; expr == NULL) || dest == NULL)</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;    {</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_null));</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;    }</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a2eae4f57e1ce78c93c4a0c4a69cc96d3">prog_magic_wrong</a>())</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;    src = source;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;    dst = dest;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="comment">     * When the substitute part starts with &quot;\=&quot; evaluate it as an expression.</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;    <span class="keywordflow">if</span> (expr != NULL || (source[0] == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; source[1] == <span class="charliteral">&#39;=&#39;</span>))</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;    {</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="comment">/* To make sure that the length doesn&#39;t change between checking the</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="comment">     * length and copying the string, and to speed up things, the</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="comment">     * resulting string is saved from the call with &quot;copy&quot; == FALSE to the</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="comment">     * call with &quot;copy&quot; == TRUE. */</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;    <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;        <span class="keywordflow">if</span> (eval_result != NULL)</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;        {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;        <a class="code" href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a>(dest, eval_result);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;        dst += <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(eval_result);</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;        <a class="code" href="macros_8h.html#a74420d7769a3c31521652566a1cdb094">VIM_CLEAR</a>(eval_result);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;        }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;    }</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;    {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;        <span class="keywordtype">int</span>         prev_can_f_submatch = <a class="code" href="regexp_8c.html#a27a7052023bf8c7fa31fe4194afc705b">can_f_submatch</a>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;        <a class="code" href="structregsubmatch___t.html">regsubmatch_T</a>   rsm_save;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(eval_result);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;        <span class="comment">/* The expression may contain substitute(), which calls us</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="comment">         * recursively.  Make sure submatch() gets the text from the first</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="comment">         * level. */</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;        <span class="keywordflow">if</span> (can_f_submatch)</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;        rsm_save = <a class="code" href="regexp_8c.html#aeea6d0463dd8c6cf65d70e2f1054d3e8">rsm</a>;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;        can_f_submatch = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;        rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a> = rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;        rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a> = rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;        rsm.<a class="code" href="structregsubmatch___t.html#a5fa015f4fc614ed3f8d7fb29f5eba1c4">sm_firstlnum</a> = rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a>;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        rsm.<a class="code" href="structregsubmatch___t.html#a009430b5c7cae4f93f72caacf0882919">sm_maxline</a> = rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a>;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        rsm.<a class="code" href="structregsubmatch___t.html#a7a2dfee62db80c4fc56a906768d4841f">sm_line_lbr</a> = rex.<a class="code" href="structregexec___t.html#a53e1764891cdaa02f204852056b4de3e">reg_line_lbr</a>;</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <span class="keywordflow">if</span> (expr != NULL)</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        {</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <a class="code" href="structtypval___t.html">typval_T</a>    argv[2];</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;        char_u      buf[<a class="code" href="vim_8h.html#ad75d86d19ee3c309a6db13026d35e357">NUMBUFLEN</a>];</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;        <a class="code" href="structtypval___t.html">typval_T</a>    rettv;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;        <a class="code" href="structstatic_list10___t.html">staticList10_T</a>  matchList;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;        <a class="code" href="structfuncexe___t.html">funcexe_T</a>   funcexe;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        rettv.<a class="code" href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">v_type</a> = <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9db9f9506f3e8660f6bd25e9c48745f1">VAR_STRING</a>;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        rettv.<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#ad5403b6cf230c7f663901d46079b9ac3">v_string</a> = NULL;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        argv[0].<a class="code" href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">v_type</a> = <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a0d3c7284227bb22719180d8096217d6a">VAR_LIST</a>;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;        argv[0].<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a886659f986c150dab284f1d5ef64ee00">v_list</a> = &amp;matchList.<a class="code" href="structstatic_list10___t.html#a0118b082826aa3d8245a7095535da3bb">sl_list</a>;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        matchList.<a class="code" href="structstatic_list10___t.html#a0118b082826aa3d8245a7095535da3bb">sl_list</a>.<a class="code" href="structlistvar___s.html#a77d712372893b232148468be84e339cf">lv_len</a> = 0;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;        <a class="code" href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a>(&amp;funcexe, 0, <span class="keyword">sizeof</span>(funcexe));</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;        funcexe.<a class="code" href="structfuncexe___t.html#af305ed242ec67c4e260a84ccdb207909">argv_func</a> = <a class="code" href="regexp_8c.html#a725239b8e216f17ca35b612c60160de7">fill_submatch_list</a>;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        funcexe.<a class="code" href="structfuncexe___t.html#af204bae71cf11135b7abffd0f98b5b69">evaluate</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="keywordflow">if</span> (expr-&gt;<a class="code" href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">v_type</a> == <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a5f8138ccb88702b5e64980f534312182">VAR_FUNC</a>)</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;        {</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            s = expr-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#ad5403b6cf230c7f663901d46079b9ac3">v_string</a>;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;            <a class="code" href="userfunc_8c.html#a606c32faf6f65df01d9310762659d51e">call_func</a>(s, -1, &amp;rettv, 1, argv, &amp;funcexe);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (expr-&gt;<a class="code" href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">v_type</a> == <a class="code" href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a2972867427c39b77c8e8a244be37c499">VAR_PARTIAL</a>)</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        {</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;            <a class="code" href="structpartial___s.html">partial_T</a>   *partial = expr-&gt;<a class="code" href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">vval</a>.<a class="code" href="structtypval___t.html#a357def79f46d08d1e0631fe1df3ede02">v_partial</a>;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;            s = <a class="code" href="eval_8c.html#a7157304180ff3b14de007739a3709763">partial_name</a>(partial);</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;            funcexe.<a class="code" href="structfuncexe___t.html#ab220fa83d7cabb2228ecf6178c158e19">partial</a> = partial;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;            <a class="code" href="userfunc_8c.html#a606c32faf6f65df01d9310762659d51e">call_func</a>(s, -1, &amp;rettv, 1, argv, &amp;funcexe);</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;        }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;        <span class="keywordflow">if</span> (matchList.<a class="code" href="structstatic_list10___t.html#a0118b082826aa3d8245a7095535da3bb">sl_list</a>.<a class="code" href="structlistvar___s.html#a77d712372893b232148468be84e339cf">lv_len</a> &gt; 0)</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;            <span class="comment">/* fill_submatch_list() was called */</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;            <a class="code" href="regexp_8c.html#abfd5fcde7ad3d5da685528e7e6a20128">clear_submatch_list</a>(&amp;matchList);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        eval_result = <a class="code" href="eval_8c.html#a8859a70551afcef025fbff6fd9d32963">tv_get_string_buf_chk</a>(&amp;rettv, buf);</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        <span class="keywordflow">if</span> (eval_result != NULL)</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;            eval_result = <a class="code" href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a>(eval_result);</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;        <a class="code" href="eval_8c.html#a0305cc6241b38e6e49c48da0de1b560c">clear_tv</a>(&amp;rettv);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;        }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;        eval_result = <a class="code" href="eval_8c.html#adebd7f32e4b09626d7fc827df38f6e24">eval_to_string</a>(source + 2, NULL, <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;        <span class="keywordflow">if</span> (eval_result != NULL)</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;        {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <span class="keywordtype">int</span> had_backslash = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        <span class="keywordflow">for</span> (s = eval_result; *s != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>; <a class="code" href="macros_8h.html#a8e76521a98776d2e3f9b33fcb331dcee">MB_PTR_ADV</a>(s))</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;        {</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;            <span class="comment">/* Change NL to CR, so that it becomes a line break,</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;<span class="comment">             * unless called from vim_regexec_nl().</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;<span class="comment">             * Skip over a backslashed character. */</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            <span class="keywordflow">if</span> (*s == <a class="code" href="ascii_8h.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a> &amp;&amp; !rsm.<a class="code" href="structregsubmatch___t.html#a7a2dfee62db80c4fc56a906768d4841f">sm_line_lbr</a>)</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;            *s = <a class="code" href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a>;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; s[1] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            {</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;            ++s;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            <span class="comment">/* Change NL to CR here too, so that this works:</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">             * :s/abc\\\ndef/\=&quot;aaa\\\nbbb&quot;/  on text:</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;<span class="comment">             *   abc\</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<span class="comment">             *   def</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;<span class="comment">             * Not when called from vim_regexec_nl().</span></div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;            <span class="keywordflow">if</span> (*s == <a class="code" href="ascii_8h.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a> &amp;&amp; !rsm.<a class="code" href="structregsubmatch___t.html#a7a2dfee62db80c4fc56a906768d4841f">sm_line_lbr</a>)</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                *s = <a class="code" href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a>;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;            had_backslash = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;            }</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;        }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;        <span class="keywordflow">if</span> (had_backslash &amp;&amp; backslash)</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;        {</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;            <span class="comment">/* Backslashes will be consumed, need to double them. */</span></div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;            s = <a class="code" href="misc2_8c.html#af70a2c4bbeb435621be6ebdba104e757">vim_strsave_escaped</a>(eval_result, (char_u *)<span class="stringliteral">&quot;\\&quot;</span>);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;            <span class="keywordflow">if</span> (s != NULL)</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;            {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;            <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(eval_result);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;            eval_result = s;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            }</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        }</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        dst += <a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(eval_result);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        }</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;        can_f_submatch = prev_can_f_submatch;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;        <span class="keywordflow">if</span> (can_f_submatch)</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        rsm = rsm_save;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    }</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      <span class="keywordflow">while</span> ((c = *src++) != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      {</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;&amp;&#39;</span> &amp;&amp; magic)</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        no = 0;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; *src != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    {</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;        <span class="keywordflow">if</span> (*src == <span class="charliteral">&#39;&amp;&#39;</span> &amp;&amp; !magic)</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        {</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;        ++src;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;        no = 0;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;        }</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="charliteral">&#39;0&#39;</span> &lt;= *src &amp;&amp; *src &lt;= <span class="charliteral">&#39;9&#39;</span>)</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        {</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;        no = *src++ - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        }</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a>((char_u *)<span class="stringliteral">&quot;uUlLeE&quot;</span>, *src))</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;        {</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">switch</span> (*src++)</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        {</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:   func_one = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)<a class="code" href="regexp_8c.html#a1f4f5bff2d9bda517e295c8355937b9b">do_upper</a>;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:   func_all = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)<a class="code" href="regexp_8c.html#a2e5f1ce30421c6ca1dbd3f366c06b646">do_Upper</a>;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:   func_one = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)<a class="code" href="regexp_8c.html#a6122ba1b1cf0b462e7fc87564b0315a5">do_lower</a>;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:   func_all = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)<a class="code" href="regexp_8c.html#ae7a932cc861be3c07a5604e13457cd34">do_Lower</a>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>:   func_one = func_all = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        }</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        }</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">if</span> (no &lt; 0)       <span class="comment">/* Ordinary character. */</span></div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    {</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;        <span class="keywordflow">if</span> (c == <a class="code" href="keymap_8h.html#a78c25594faa25002bddbe962940dd576">K_SPECIAL</a> &amp;&amp; src[0] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a> &amp;&amp; src[1] != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;        {</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;        <span class="comment">/* Copy a special key as-is. */</span></div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;        <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;        {</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;            *dst++ = c;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;            *dst++ = *src++;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            *dst++ = *src++;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;        }</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;        {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            dst += 3;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            src += 2;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;        }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;        <span class="keywordflow">if</span> (c == <span class="charliteral">&#39;\\&#39;</span> &amp;&amp; *src != <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>)</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;        {</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;        <span class="comment">/* Check for abbreviations -- webb */</span></div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;        <span class="keywordflow">switch</span> (*src)</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        {</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:   c = <a class="code" href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a>;    ++src;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:   c = <a class="code" href="ascii_8h.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a>;     ++src;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:   c = <a class="code" href="ascii_8h.html#ad58a1fbfc85c7e4790fc55e654f50221">TAB</a>;    ++src;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;         <span class="comment">/* Oh no!  \e already has meaning in subst pat :-( */</span></div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;         <span class="comment">/* case &#39;e&#39;:   c = ESC;    ++src;  break; */</span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:   c = <a class="code" href="ascii_8h.html#a72b7daa7cd242faff603fc92493788ec">Ctrl_H</a>; ++src;  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;            <span class="comment">/* If &quot;backslash&quot; is TRUE the backslash will be removed</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;<span class="comment">             * later.  Used to insert a literal CR. */</span></div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            <span class="keywordflow">default</span>:    <span class="keywordflow">if</span> (backslash)</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                {</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                    <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                    *dst = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                    ++dst;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                }</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                c = *src++;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        }</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;        c = <a class="code" href="globals_8h.html#a2ff646629886112d5039957029690e09">mb_ptr2char</a>(src - 1);</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;        <span class="comment">/* Write to buffer, if copy is set. */</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;        <span class="keywordflow">if</span> (func_one != (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL)</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        <span class="comment">/* Turbo C complains without the typecast */</span></div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;        func_one = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)(func_one(&amp;cc, c));</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (func_all != (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL)</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;        <span class="comment">/* Turbo C complains without the typecast */</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;        func_all = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)(func_all(&amp;cc, c));</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;        <span class="keywordflow">else</span> <span class="comment">/* just copy */</span></div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;        cc = c;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;        {</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;        <span class="keywordtype">int</span> totlen = <a class="code" href="globals_8h.html#a76244393355aa024ee3577263f838563">mb_ptr2len</a>(src - 1);</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            <a class="code" href="globals_8h.html#ad1c1ab702c27bb191dc79ab2ef8214a5">mb_char2bytes</a>(cc, dst);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;        dst += <a class="code" href="globals_8h.html#a203f91ef47660047aeb8bb865f6cba65">mb_char2len</a>(cc) - 1;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;        <span class="keywordflow">if</span> (enc_utf8)</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;        {</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;            <span class="keywordtype">int</span> clen = <a class="code" href="mbyte_8c.html#adad1b095d3961720e5b374c3cac048df">utf_ptr2len</a>(src - 1);</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            <span class="comment">/* If the character length is shorter than &quot;totlen&quot;, there</span></div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;<span class="comment">             * are composing characters; copy them as-is. */</span></div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;            <span class="keywordflow">if</span> (clen &lt; totlen)</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;            {</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;            <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;                <a class="code" href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a>(dst + 1, src - 1 + clen,</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;                             (<span class="keywordtype">size_t</span>)(totlen - clen));</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            dst += totlen - clen;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;            }</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        }</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;        src += totlen - 1;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;        }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;            *dst = cc;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;        dst++;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    }</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    {</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c">REG_MULTI</a>)</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;        {</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;        clnum = rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a>;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;        <span class="keywordflow">if</span> (clnum &lt; 0 || rex.reg_mmatch-&gt;endpos[no].lnum &lt; 0)</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;            s = NULL;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;        {</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;            s = <a class="code" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a>(clnum) + rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;            <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a> == clnum)</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;            len = rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a></div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;                        - rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;            len = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(s);</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;        }</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;        }</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;        s = rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a>-&gt;<a class="code" href="structregmatch___t.html#a501f8e5ba3a1835b4f033359c7b6a203">startp</a>[no];</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[no] == NULL)</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;            s = NULL;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;            len = (int)(rex.<a class="code" href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">reg_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[no] - s);</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;        }</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;        <span class="keywordflow">if</span> (s != NULL)</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;        {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            <span class="keywordflow">if</span> (len == 0)</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;            {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c">REG_MULTI</a>)</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            {</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;                <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a> == clnum)</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;                <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;                *dst = <a class="code" href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a>;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;                ++dst;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;                s = <a class="code" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a>(++clnum);</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                <span class="keywordflow">if</span> (rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a> == clnum)</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                len = rex.<a class="code" href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">reg_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                len = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(s);</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;            }</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;            }</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>) <span class="comment">/* we hit NUL. */</span></div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;            {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;                <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(e_re_damg));</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <span class="keywordflow">goto</span> exit;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            }</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;            {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;            <span class="keywordflow">if</span> (backslash &amp;&amp; (*s == <a class="code" href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a> || *s == <span class="charliteral">&#39;\\&#39;</span>))</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                <span class="comment">/*</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="comment">                 * Insert a backslash in front of a CR, otherwise</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="comment">                 * it will be replaced by a line break.</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;<span class="comment">                 * Number of backslashes will be halved later,</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<span class="comment">                 * double them here.</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<span class="comment">                 */</span></div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                {</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                dst[0] = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                dst[1] = *s;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;                dst += 2;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;                c = <a class="code" href="globals_8h.html#a2ff646629886112d5039957029690e09">mb_ptr2char</a>(s);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;                c = *s;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;                <span class="keywordflow">if</span> (func_one != (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL)</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;                <span class="comment">/* Turbo C complains without the typecast */</span></div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;                func_one = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)(func_one(&amp;cc, c));</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (func_all != (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)NULL)</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;                <span class="comment">/* Turbo C complains without the typecast */</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;                func_all = (<a class="code" href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a>)(func_all(&amp;cc, c));</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                <span class="keywordflow">else</span> <span class="comment">/* just copy */</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;                cc = c;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;                <span class="keywordflow">if</span> (has_mbyte)</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;                {</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;                <span class="keywordtype">int</span> <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                <span class="comment">/* Copy composing characters separately, one</span></div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;<span class="comment">                 * at a time. */</span></div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                <span class="keywordflow">if</span> (enc_utf8)</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                    l = <a class="code" href="mbyte_8c.html#adad1b095d3961720e5b374c3cac048df">utf_ptr2len</a>(s) - 1;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;                <span class="keywordflow">else</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                    l = <a class="code" href="globals_8h.html#a76244393355aa024ee3577263f838563">mb_ptr2len</a>(s) - 1;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                s += <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                len -= <a class="code" href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a>;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                    <a class="code" href="globals_8h.html#ad1c1ab702c27bb191dc79ab2ef8214a5">mb_char2bytes</a>(cc, dst);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                dst += <a class="code" href="globals_8h.html#a203f91ef47660047aeb8bb865f6cba65">mb_char2len</a>(cc) - 1;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                }</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                    *dst = cc;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;                dst++;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;            }</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;            ++s;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            --len;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            }</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;        }</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;        }</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;        no = -1;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;    }</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      }</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;    <span class="keywordflow">if</span> (copy)</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;    *dst = <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;exit:</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)((dst - dest) + 1);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;}</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;<span class="comment"> * Call reg_getline() with the line numbers from the submatch.  If a</span></div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;<span class="comment"> * substitute() was used the reg_maxline and other values have been</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;<span class="comment"> * overwritten.</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;    <span class="keyword">static</span> char_u *</div><div class="line"><a name="l02319"></a><span class="lineno"><a class="line" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33"> 2319</a></span>&#160;<a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(<a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> lnum)</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;{</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    char_u *s;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> save_first = rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a>;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a> save_max = rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a>;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a> = rsm.<a class="code" href="structregsubmatch___t.html#a5fa015f4fc614ed3f8d7fb29f5eba1c4">sm_firstlnum</a>;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;    rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a> = rsm.<a class="code" href="structregsubmatch___t.html#a009430b5c7cae4f93f72caacf0882919">sm_maxline</a>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;    s = <a class="code" href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a>(lnum);</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;    rex.<a class="code" href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">reg_firstlnum</a> = save_first;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    rex.<a class="code" href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">reg_maxline</a> = save_max;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;    <span class="keywordflow">return</span> s;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;}</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="comment"> * Used for the submatch() function: get the string from the n&#39;th submatch in</span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="comment"> * allocated memory.</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;<span class="comment"> * Returns NULL when not in a &quot;:s&quot; command and for a non-existing submatch.</span></div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;    char_u *</div><div class="line"><a name="l02341"></a><span class="lineno"><a class="line" href="regexp_8c.html#a4d9084b540c67fcc909adf621080c812"> 2341</a></span>&#160;<a class="code" href="regexp_8c.html#a4d9084b540c67fcc909adf621080c812">reg_submatch</a>(<span class="keywordtype">int</span> no)</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;{</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;    char_u  *retval = NULL;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    char_u  *s;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;    <span class="keywordtype">int</span>     len;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordtype">int</span>     round;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">if</span> (!can_f_submatch || no &lt; 0)</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">if</span> (rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a> == NULL)</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    {</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment">     * First round: compute the length and allocate memory.</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="comment">     * Second round: copy the text.</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">for</span> (round = 1; round &lt;= 2; ++round)</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    {</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        lnum = rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <span class="keywordflow">if</span> (lnum &lt; 0 || rsm.sm_mmatch-&gt;endpos[no].lnum &lt; 0)</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;        s = <a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(lnum);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keywordflow">if</span> (s == NULL)  <span class="comment">// anti-crash check, cannot happen?</span></div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        s += rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="keywordflow">if</span> (rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a> == lnum)</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;        {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;        <span class="comment">/* Within one line: take form start to end col. */</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;        len = rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;                      - rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;        <span class="keywordflow">if</span> (round == 2)</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;            <a class="code" href="misc2_8c.html#ab25a3a48241497fdc7bec2c3dbe41467">vim_strncpy</a>(retval, s, len);</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;        ++len;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        }</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;        {</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;        <span class="comment">/* Multiple lines: take start line from start col, middle</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="comment">         * lines completely and end line up to end col. */</span></div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;        len = (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(s);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <span class="keywordflow">if</span> (round == 2)</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;        {</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;            <a class="code" href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a>(retval, s);</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            retval[len] = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        }</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;        ++len;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;        ++lnum;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;        <span class="keywordflow">while</span> (lnum &lt; rsm.sm_mmatch-&gt;endpos[no].lnum)</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        {</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            s = <a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(lnum++);</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            <span class="keywordflow">if</span> (round == 2)</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            <a class="code" href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a>(retval + len, s);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;            len += (int)<a class="code" href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a>(s);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;            <span class="keywordflow">if</span> (round == 2)</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;            retval[len] = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            ++len;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        }</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;        <span class="keywordflow">if</span> (round == 2)</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            <a class="code" href="vim_8h.html#a469cffaa64ff8028edfb64ba4cd7deae">STRNCPY</a>(retval + len, <a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(lnum),</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                         rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;        len += rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;        <span class="keywordflow">if</span> (round == 2)</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;            retval[len] = <a class="code" href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a>;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;        ++len;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        }</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="keywordflow">if</span> (retval == NULL)</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;        {</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        retval = <a class="code" href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a>(len);</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;        <span class="keywordflow">if</span> (retval == NULL)</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;            <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;        }</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;    }</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    {</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;    s = rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a501f8e5ba3a1835b4f033359c7b6a203">startp</a>[no];</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">if</span> (s == NULL || rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[no] == NULL)</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        retval = NULL;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        retval = <a class="code" href="misc2_8c.html#a871ddb65e41d8bed1c38754d59737a5b">vim_strnsave</a>(s, (<span class="keywordtype">int</span>)(rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[no] - s));</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;    }</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;    <span class="keywordflow">return</span> retval;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;}</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment"> * Used for the submatch() function with the optional non-zero argument: get</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment"> * the list of strings from the n&#39;th submatch in allocated memory with NULs</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="comment"> * represented in NLs.</span></div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;<span class="comment"> * Returns a list of allocated strings.  Returns NULL when not in a &quot;:s&quot;</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;<span class="comment"> * command, for a non-existing submatch and for any error.</span></div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;    <a class="code" href="structlistvar___s.html">list_T</a> *</div><div class="line"><a name="l02436"></a><span class="lineno"><a class="line" href="regexp_8c.html#a7e80ece29119108e08c7626cd573beaf"> 2436</a></span>&#160;<a class="code" href="regexp_8c.html#a7e80ece29119108e08c7626cd573beaf">reg_submatch_list</a>(<span class="keywordtype">int</span> no)</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;{</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;    char_u  *s;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    slnum;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    elnum;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> scol;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> ecol;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;    <span class="keywordtype">int</span>     i;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <a class="code" href="structlistvar___s.html">list_T</a>  *list;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;    <span class="keywordtype">int</span>     error = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;    <span class="keywordflow">if</span> (!can_f_submatch || no &lt; 0)</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;    <span class="keywordflow">if</span> (rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a> == NULL)</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    slnum = rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a>;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;    elnum = rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lnum</a>;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;    <span class="keywordflow">if</span> (slnum &lt; 0 || elnum &lt; 0)</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;    scol = rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">startpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;    ecol = rsm.<a class="code" href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">sm_mmatch</a>-&gt;<a class="code" href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">endpos</a>[no].<a class="code" href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">col</a>;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;    list = <a class="code" href="list_8c.html#aa256fec511705ecf729a14faa62030ae">list_alloc</a>();</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    <span class="keywordflow">if</span> (list == NULL)</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;    s = <a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(slnum) + scol;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;    <span class="keywordflow">if</span> (slnum == elnum)</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;    {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a>(list, s, ecol - scol) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;        error = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    }</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    {</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a>(list, s, -1) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        error = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        <span class="keywordflow">for</span> (i = 1; i &lt; elnum - slnum; i++)</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        {</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        s = <a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(slnum + i);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a>(list, s, -1) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;            error = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;        }</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;        s = <a class="code" href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a>(elnum);</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a>(list, s, ecol) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        error = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;    }</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    {</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    s = rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a501f8e5ba3a1835b4f033359c7b6a203">startp</a>[no];</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;    <span class="keywordflow">if</span> (s == NULL || rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[no] == NULL)</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    list = <a class="code" href="list_8c.html#aa256fec511705ecf729a14faa62030ae">list_alloc</a>();</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">if</span> (list == NULL)</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;        <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a>(list, s,</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;                 (<span class="keywordtype">int</span>)(rsm.<a class="code" href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">sm_match</a>-&gt;<a class="code" href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">endp</a>[no] - s)) == <a class="code" href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;        error = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;    }</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;    <span class="keywordflow">if</span> (error)</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;    {</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;    <a class="code" href="list_8c.html#ad5552a454ce1d4a6b2be4c1ea67f46c7">list_free</a>(list);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;    <span class="keywordflow">return</span> NULL;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;    }</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;    <span class="keywordflow">return</span> list;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;}</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="regexp__bt_8c.html">regexp_bt.c</a>&quot;</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="keyword">static</span> <a class="code" href="structregengine.html">regengine_T</a> bt_regengine =</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;{</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <a class="code" href="regexp__bt_8c.html#a8ff598fc07164a2213fb35465cbdbbd9">bt_regcomp</a>,</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;    <a class="code" href="regexp__bt_8c.html#a046a1cede1e5e33d1cbe1078787ea214">bt_regfree</a>,</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <a class="code" href="regexp__bt_8c.html#a8b5a513b458191429e5a8488ff629408">bt_regexec_nl</a>,</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    <a class="code" href="regexp__bt_8c.html#abfba3b69a50fbb9e5a2c68429f78400c">bt_regexec_multi</a>,</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;    (char_u *)<span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;};</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="regexp__nfa_8c.html">regexp_nfa.c</a>&quot;</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;<span class="keyword">static</span> <a class="code" href="structregengine.html">regengine_T</a> nfa_regengine =</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;{</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    <a class="code" href="regexp__nfa_8c.html#a2ad7d4b5a572d640fbdbe170be0ef9b8">nfa_regcomp</a>,</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    <a class="code" href="regexp__nfa_8c.html#a4e40a6724314c80079725408ade1a5e0">nfa_regfree</a>,</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <a class="code" href="regexp__nfa_8c.html#abcb85faff6c34ea04cbe9ea47f3098ed">nfa_regexec_nl</a>,</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    <a class="code" href="regexp__nfa_8c.html#a0036769d223f51870eeffd92b8011c99">nfa_regexec_multi</a>,</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    (char_u *)<span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;};</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;<span class="comment">/* Which regexp engine to use? Needed for vim_regcomp().</span></div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;<span class="comment"> * Must match with &#39;regexpengine&#39;. */</span></div><div class="line"><a name="l02531"></a><span class="lineno"><a class="line" href="regexp_8c.html#ad817f6f1bf48484f0d523e75d1c13bfe"> 2531</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="regexp_8c.html#ad817f6f1bf48484f0d523e75d1c13bfe">regexp_engine</a> = 0;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;<span class="keyword">static</span> char_u regname[][30] = {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            <span class="stringliteral">&quot;AUTOMATIC Regexp Engine&quot;</span>,</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            <span class="stringliteral">&quot;BACKTRACKING Regexp Engine&quot;</span>,</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;            <span class="stringliteral">&quot;NFA Regexp Engine&quot;</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;                };</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;<span class="comment"> * Compile a regular expression into internal code.</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;<span class="comment"> * Returns the program in allocated memory.</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;<span class="comment"> * Use vim_regfree() to free the memory.</span></div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;<span class="comment"> * Returns NULL for an error.</span></div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <a class="code" href="structregprog.html">regprog_T</a> *</div><div class="line"><a name="l02548"></a><span class="lineno"><a class="line" href="regexp_8c.html#a47f217c8bc0fd2544f365dc9c38b6803"> 2548</a></span>&#160;<a class="code" href="regexp_8c.html#a47f217c8bc0fd2544f365dc9c38b6803">vim_regcomp</a>(char_u *expr_arg, <span class="keywordtype">int</span> re_flags)</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;{</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="structregprog.html">regprog_T</a>   *prog = NULL;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    char_u  *expr = expr_arg;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordtype">int</span>     save_called_emsg;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    regexp_engine = <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a>;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="comment">/* Check for prefix &quot;\%#=&quot;, that sets the regexp engine */</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="vim_8h.html#a5f1ef744c34be69aec1531f1fe604a9b">STRNCMP</a>(expr, <span class="stringliteral">&quot;\\%#=&quot;</span>, 4) == 0)</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;    {</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;    <span class="keywordtype">int</span> newengine = expr[4] - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    <span class="keywordflow">if</span> (newengine == <a class="code" href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;        || newengine == <a class="code" href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;        || newengine == <a class="code" href="regexp_8h.html#a2098719352cfe8f6a888f5121a50cf23">NFA_ENGINE</a>)</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;    {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;        regexp_engine = expr[4] - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        expr += 5;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <a class="code" href="message_8c.html#a9475d91e06c3a6d7d370ef54c0589f71">smsg</a>(<span class="stringliteral">&quot;New regexp mode selected (%d): %s&quot;</span>,</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;                       regexp_engine, regname[newengine]);</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;    }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;    {</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;        <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;E864: \\%#= can only be followed by 0, 1, or 2. The automatic engine will be used &quot;</span>));</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;        regexp_engine = <a class="code" href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a>;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;    }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;    }</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="preprocessor">#ifdef DEBUG</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;    bt_regengine.<a class="code" href="structregengine.html#a705cea9ce7786614e33c89823a5d4bca">expr</a> = expr;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;    nfa_regengine.expr = expr;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;    <span class="comment">// reg_iswordc() uses rex.reg_buf</span></div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;    rex.<a class="code" href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">reg_buf</a> = curbuf;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;<span class="comment">     * First try the NFA engine, unless backtracking was requested.</span></div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;    save_called_emsg = <a class="code" href="globals_8h.html#a8226ea083c93610f349ca43624d05129">called_emsg</a>;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;    <a class="code" href="globals_8h.html#a8226ea083c93610f349ca43624d05129">called_emsg</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;    <span class="keywordflow">if</span> (regexp_engine != <a class="code" href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a>)</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;    prog = nfa_regengine.regcomp(expr,</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;        re_flags + (regexp_engine == <a class="code" href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a> ? <a class="code" href="vim_8h.html#aa46efe1167147ae09267781af65ea97f">RE_AUTO</a> : 0));</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;    prog = bt_regengine.<a class="code" href="structregengine.html#acc9cef1420c555798e5b836e08348a9d">regcomp</a>(expr, re_flags);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;    <span class="comment">/* Check for error compiling regexp with initial engine. */</span></div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;    <span class="keywordflow">if</span> (prog == NULL)</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;    {</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;<span class="preprocessor">#ifdef BT_REGEXP_DEBUG_LOG</span></div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;    <span class="keywordflow">if</span> (regexp_engine != <a class="code" href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a>)   <span class="comment">/* debugging log for NFA */</span></div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;    {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;        FILE *<a class="code" href="hangulin_8c.html#a362077c979b0bb65159c603270e40f70">f</a>;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;        f = fopen(BT_REGEXP_DEBUG_LOG_NAME, <span class="stringliteral">&quot;a&quot;</span>);</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;        <span class="keywordflow">if</span> (f)</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        {</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;        fprintf(f, <span class="stringliteral">&quot;Syntax error in \&quot;%s\&quot;\n&quot;</span>, expr);</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        fclose(f);</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;        }</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;        <a class="code" href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a>(<span class="stringliteral">&quot;(NFA) Could not open \&quot;%s\&quot; to write !!!&quot;</span>,</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            BT_REGEXP_DEBUG_LOG_NAME);</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;    }</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;    <span class="comment">/*</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment">     * If the NFA engine failed, try the backtracking engine.</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">     * The NFA engine also fails for patterns that it can&#39;t handle well</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment">     * but are still valid patterns, thus a retry should work.</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">     * But don&#39;t try if an error message was given.</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">     */</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;    <span class="keywordflow">if</span> (regexp_engine == <a class="code" href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a> &amp;&amp; !<a class="code" href="globals_8h.html#a8226ea083c93610f349ca43624d05129">called_emsg</a>)</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;    {</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;        regexp_engine = <a class="code" href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a>;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;        prog = bt_regengine.<a class="code" href="structregengine.html#acc9cef1420c555798e5b836e08348a9d">regcomp</a>(expr, re_flags);</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;    }</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    }</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <a class="code" href="globals_8h.html#a8226ea083c93610f349ca43624d05129">called_emsg</a> |= save_called_emsg;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="keywordflow">if</span> (prog != NULL)</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;    {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;    <span class="comment">/* Store the info needed to call regcomp() again when the engine turns</span></div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment">     * out to be very slow when executing it. */</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;    prog-&gt;<a class="code" href="structregprog.html#a7f6de11d9f89eae443c566c0654aa08c">re_engine</a> = <a class="code" href="regexp_8c.html#ad817f6f1bf48484f0d523e75d1c13bfe">regexp_engine</a>;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;    prog-&gt;<a class="code" href="structregprog.html#a0c05fb082a6c5ef8e619eda1bffaecda">re_flags</a>  = re_flags;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;    }</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;    <span class="keywordflow">return</span> prog;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;}</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;<span class="comment"> * Free a compiled regexp program, returned by vim_regcomp().</span></div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l02643"></a><span class="lineno"><a class="line" href="regexp_8c.html#ae85d66ec0c262d0e6c22766cd75e0287"> 2643</a></span>&#160;<a class="code" href="regexp_8c.html#ae85d66ec0c262d0e6c22766cd75e0287">vim_regfree</a>(<a class="code" href="structregprog.html">regprog_T</a> *prog)</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;{</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;    <span class="keywordflow">if</span> (prog != NULL)</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;    prog-&gt;<a class="code" href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">engine</a>-&gt;<a class="code" href="structregengine.html#a7fc7ae362521c9a85ab4b2a387359c90">regfree</a>(prog);</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;}</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;<span class="preprocessor">#if defined(EXITFREE) || defined(PROTO)</span></div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;    <span class="keywordtype">void</span></div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;free_regexp_stuff(<span class="keywordtype">void</span>)</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;{</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;    <a class="code" href="misc2_8c.html#afa822cc3cc70a9a0ee394863bcc0c941">ga_clear</a>(&amp;<a class="code" href="regexp__bt_8c.html#aa5db53b6595fb708ae65fa51df7c65a1">regstack</a>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;    <a class="code" href="misc2_8c.html#afa822cc3cc70a9a0ee394863bcc0c941">ga_clear</a>(&amp;<a class="code" href="regexp__bt_8c.html#aa67668ebdd29eb59a906d4ce199e5e61">backpos</a>);</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(<a class="code" href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a>);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;    <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(<a class="code" href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a>);</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;}</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">void</span></div><div class="line"><a name="l02662"></a><span class="lineno"><a class="line" href="regexp_8c.html#a44175bd38592a488085829ff2e4f4595"> 2662</a></span>&#160;<a class="code" href="regexp_8c.html#a44175bd38592a488085829ff2e4f4595">report_re_switch</a>(char_u *pat)</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;{</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="option_8h.html#abb5561ad122dac5df6b719a1243b3445">p_verbose</a> &gt; 0)</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    {</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;    <a class="code" href="message_8c.html#a5b62d7cb44a463c5db0ace9f0c58b096">verbose_enter</a>();</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;    <a class="code" href="message_8c.html#a0db479cde321ca12b8d84a53196454ad">msg_puts</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<span class="stringliteral">&quot;Switching to backtracking RE engine for pattern: &quot;</span>));</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;    <a class="code" href="message_8c.html#a0db479cde321ca12b8d84a53196454ad">msg_puts</a>((<span class="keywordtype">char</span> *)pat);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;    <a class="code" href="message_8c.html#a99fd0c8ee7ce774316d01ddab3bef039">verbose_leave</a>();</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;    }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;}</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="preprocessor">#if (defined(FEAT_X11) &amp;&amp; (defined(FEAT_TITLE) || defined(FEAT_XCLIPBOARD))) \</span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="preprocessor">    || defined(PROTO)</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;<span class="comment"> * Return whether &quot;prog&quot; is currently being executed.</span></div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;regprog_in_use(<a class="code" href="structregprog.html">regprog_T</a> *prog)</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;{</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;    <span class="keywordflow">return</span> prog-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a>;</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;}</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;<span class="comment"> * Match a regexp against a string.</span></div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;<span class="comment"> * &quot;rmp-&gt;regprog&quot; is a compiled regexp as returned by vim_regcomp().</span></div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;<span class="comment"> * Note: &quot;rmp-&gt;regprog&quot; may be freed and changed.</span></div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;<span class="comment"> * Uses curbuf for line count and &#39;iskeyword&#39;.</span></div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;<span class="comment"> * When &quot;nl&quot; is TRUE consider a &quot;\n&quot; in &quot;line&quot; to be a line break.</span></div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;<span class="comment"> * Return TRUE if there is a match, FALSE if not.</span></div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span></div><div class="line"><a name="l02696"></a><span class="lineno"><a class="line" href="regexp_8c.html#abbe9e38798800dbec0246fa49efe9caa"> 2696</a></span>&#160;<a class="code" href="regexp_8c.html#abbe9e38798800dbec0246fa49efe9caa">vim_regexec_string</a>(</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;    <a class="code" href="structregmatch___t.html">regmatch_T</a>  *rmp,</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;    char_u  *line,  <span class="comment">/* string to match against */</span></div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col,    <span class="comment">/* column to start looking for match */</span></div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;    <span class="keywordtype">int</span>     nl)</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;{</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;    <span class="keywordtype">int</span>     result;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;    <a class="code" href="structregexec___t.html">regexec_T</a>   rex_save;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    <span class="keywordtype">int</span>     rex_in_use_save = <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;    <span class="comment">// Cannot use the same prog recursively, it contains state.</span></div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;    <span class="keywordflow">if</span> (rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a>)</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;    {</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="regexp_8c.html#a5e7db5a0ca4f89fdf364acc3839435ff">e_recursive</a>));</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;    }</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;    rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;    <span class="comment">// Being called recursively, save the state.</span></div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;    rex_save = <a class="code" href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847">rex</a>;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    rex.<a class="code" href="structregexec___t.html#a1065b04b07b945c0eb487c7a63bc7976">reg_startp</a> = NULL;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;    rex.<a class="code" href="structregexec___t.html#a674bed9a63a693477f540e93cd055fd0">reg_endp</a> = NULL;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;    rex.<a class="code" href="structregexec___t.html#af92e2d59b9e77aaa4ff083b2baaf3af8">reg_startpos</a> = NULL;</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;    rex.<a class="code" href="structregexec___t.html#a772bb320ad34d787d7009f867578a846">reg_endpos</a> = NULL;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;    result = rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">engine</a>-&gt;<a class="code" href="structregengine.html#ad21467fafa15630c7cb9e4c7846c36a7">regexec_nl</a>(rmp, line, col, nl);</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;    rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;    <span class="comment">/* NFA engine aborted because it&#39;s very slow. */</span></div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;    <span class="keywordflow">if</span> (rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a7f6de11d9f89eae443c566c0654aa08c">re_engine</a> == <a class="code" href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a></div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;                           &amp;&amp; result == <a class="code" href="regexp_8h.html#a080c580be022ce7d8bbf23e3d1ec7bee">NFA_TOO_EXPENSIVE</a>)</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    {</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;    <span class="keywordtype">int</span>    save_p_re = <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a>;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    <span class="keywordtype">int</span>    re_flags = rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c05fb082a6c5ef8e619eda1bffaecda">re_flags</a>;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    char_u *pat = <a class="code" href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a>(((<a class="code" href="structnfa__regprog___t.html">nfa_regprog_T</a> *)rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>)-&gt;pattern);</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a> = <a class="code" href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a>;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;    <a class="code" href="regexp_8c.html#ae85d66ec0c262d0e6c22766cd75e0287">vim_regfree</a>(rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>);</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;    <span class="keywordflow">if</span> (pat != NULL)</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;    {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;        <a class="code" href="regexp_8c.html#a44175bd38592a488085829ff2e4f4595">report_re_switch</a>(pat);</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;        rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a> = <a class="code" href="regexp_8c.html#a47f217c8bc0fd2544f365dc9c38b6803">vim_regcomp</a>(pat, re_flags);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        <span class="keywordflow">if</span> (rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a> != NULL)</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        {</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;        result = rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">engine</a>-&gt;<a class="code" href="structregengine.html#ad21467fafa15630c7cb9e4c7846c36a7">regexec_nl</a>(rmp, line, col, nl);</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;        rmp-&gt;<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;        }</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(pat);</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    }</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;    <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a> = save_p_re;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;    }</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = rex_in_use_save;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    rex = rex_save;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="keywordflow">return</span> result &gt; 0;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;}</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="comment"> * Note: &quot;*prog&quot; may be freed and changed.</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment"> * Return TRUE if there is a match, FALSE if not.</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l02767"></a><span class="lineno"><a class="line" href="regexp_8c.html#aa980656cedf8d5415584dfb7e7df6425"> 2767</a></span>&#160;<a class="code" href="regexp_8c.html#aa980656cedf8d5415584dfb7e7df6425">vim_regexec_prog</a>(</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;    <a class="code" href="structregprog.html">regprog_T</a>   **prog,</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <span class="keywordtype">int</span>     ignore_case,</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;    char_u  *line,</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col)</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;{</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <span class="keywordtype">int</span>     r;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;    <a class="code" href="structregmatch___t.html">regmatch_T</a>  <a class="code" href="regexp__bt_8c.html#a8c84017ae5b6830cd8a93599acbf3d05">regmatch</a>;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;    regmatch.<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a> = *prog;</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;    regmatch.<a class="code" href="structregmatch___t.html#afbc416ec7a624c1328c2ff29d8522764">rm_ic</a> = ignore_case;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    r = <a class="code" href="regexp_8c.html#abbe9e38798800dbec0246fa49efe9caa">vim_regexec_string</a>(&amp;regmatch, line, col, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    *prog = regmatch.<a class="code" href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regprog</a>;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <span class="keywordflow">return</span> r;</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;}</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;<span class="comment"> * Note: &quot;rmp-&gt;regprog&quot; may be freed and changed.</span></div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;<span class="comment"> * Return TRUE if there is a match, FALSE if not.</span></div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l02788"></a><span class="lineno"><a class="line" href="regexp_8c.html#abefc0928e7264f306f6149e3c5bdb074"> 2788</a></span>&#160;<a class="code" href="regexp_8c.html#abefc0928e7264f306f6149e3c5bdb074">vim_regexec</a>(<a class="code" href="structregmatch___t.html">regmatch_T</a> *rmp, char_u *line, <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col)</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;{</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#abbe9e38798800dbec0246fa49efe9caa">vim_regexec_string</a>(rmp, line, col, <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;}</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;<span class="comment"> * Like vim_regexec(), but consider a &quot;\n&quot; in &quot;line&quot; to be a line break.</span></div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="comment"> * Note: &quot;rmp-&gt;regprog&quot; may be freed and changed.</span></div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;<span class="comment"> * Return TRUE if there is a match, FALSE if not.</span></div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;    <span class="keywordtype">int</span></div><div class="line"><a name="l02799"></a><span class="lineno"><a class="line" href="regexp_8c.html#a4b41bae50ff3129f9030c3371a785dce"> 2799</a></span>&#160;<a class="code" href="regexp_8c.html#a4b41bae50ff3129f9030c3371a785dce">vim_regexec_nl</a>(<a class="code" href="structregmatch___t.html">regmatch_T</a> *rmp, char_u *line, <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col)</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;{</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="regexp_8c.html#abbe9e38798800dbec0246fa49efe9caa">vim_regexec_string</a>(rmp, line, col, <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;}</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;<span class="comment"> * Match a regexp against multiple lines.</span></div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;<span class="comment"> * &quot;rmp-&gt;regprog&quot; must be a compiled regexp as returned by vim_regcomp().</span></div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;<span class="comment"> * Note: &quot;rmp-&gt;regprog&quot; may be freed and changed, even set to NULL.</span></div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;<span class="comment"> * Uses curbuf for line count and &#39;iskeyword&#39;.</span></div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;<span class="comment"> * Return zero if there is no match.  Return number of lines contained in the</span></div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;<span class="comment"> * match otherwise.</span></div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    <span class="keywordtype">long</span></div><div class="line"><a name="l02814"></a><span class="lineno"><a class="line" href="regexp_8c.html#a47fb1bbbd69ad3fa2d82d0f326bc3baf"> 2814</a></span>&#160;<a class="code" href="regexp_8c.html#a47fb1bbbd69ad3fa2d82d0f326bc3baf">vim_regexec_multi</a>(</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;    <a class="code" href="structregmmatch___t.html">regmmatch_T</a> *rmp,</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;    <a class="code" href="structwindow___s.html">win_T</a>       *win,       <span class="comment">/* window in which to search or NULL */</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;    <a class="code" href="structfile__buffer.html">buf_T</a>       *buf,       <span class="comment">/* buffer in which to search */</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;    <a class="code" href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a>    lnum,       <span class="comment">/* nr of line to start looking for match */</span></div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;    <a class="code" href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a> col,        <span class="comment">/* column to start looking for match */</span></div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;    <a class="code" href="vim_8h.html#a983193bd908c7bc4bef972f6a15f8dab">proftime_T</a>  *tm,        <span class="comment">/* timeout limit or NULL */</span></div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <span class="keywordtype">int</span>     *timed_out) <span class="comment">/* flag is set when timeout limit reached */</span></div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;{</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="keywordtype">int</span>     result;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;    <a class="code" href="structregexec___t.html">regexec_T</a>   rex_save;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;    <span class="keywordtype">int</span>     rex_in_use_save = <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;    <span class="comment">// Cannot use the same prog recursively, it contains state.</span></div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <span class="keywordflow">if</span> (rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a>)</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;    <a class="code" href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a>(<a class="code" href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a>(<a class="code" href="regexp_8c.html#a5e7db5a0ca4f89fdf364acc3839435ff">e_recursive</a>));</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;    }</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;    <span class="comment">/* Being called recursively, save the state. */</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;    rex_save = <a class="code" href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847">rex</a>;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;    result = rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">engine</a>-&gt;<a class="code" href="structregengine.html#a75adee2e427afc4f611f2bacc41c55d1">regexec_multi</a>(</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;                      rmp, win, buf, lnum, col, tm, timed_out);</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="comment">/* NFA engine aborted because it&#39;s very slow. */</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;    <span class="keywordflow">if</span> (rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a7f6de11d9f89eae443c566c0654aa08c">re_engine</a> == <a class="code" href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a></div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;                           &amp;&amp; result == <a class="code" href="regexp_8h.html#a080c580be022ce7d8bbf23e3d1ec7bee">NFA_TOO_EXPENSIVE</a>)</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;    {</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;    <span class="keywordtype">int</span>    save_p_re = <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a>;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;    <span class="keywordtype">int</span>    re_flags = rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c05fb082a6c5ef8e619eda1bffaecda">re_flags</a>;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;    char_u *pat = <a class="code" href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a>(((<a class="code" href="structnfa__regprog___t.html">nfa_regprog_T</a> *)rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>)-&gt;pattern);</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a> = <a class="code" href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a>;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;    <a class="code" href="regexp_8c.html#ae85d66ec0c262d0e6c22766cd75e0287">vim_regfree</a>(rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="keywordflow">if</span> (pat != NULL)</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    {</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;<span class="preprocessor">#ifdef FEAT_EVAL</span></div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;        <a class="code" href="regexp_8c.html#a44175bd38592a488085829ff2e4f4595">report_re_switch</a>(pat);</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;        <span class="comment">// checking for \z misuse was already done when compiling for NFA,</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;        <span class="comment">// allow all here</span></div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;        reg_do_extmatch = <a class="code" href="vim_8h.html#a360a2693c75012e20d6770b160de3c50">REX_ALL</a>;</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;        rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a> = <a class="code" href="regexp_8c.html#a47f217c8bc0fd2544f365dc9c38b6803">vim_regcomp</a>(pat, re_flags);</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;<span class="preprocessor">#ifdef FEAT_SYN_HL</span></div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;        reg_do_extmatch = 0;</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <span class="keywordflow">if</span> (rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a> != NULL)</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;        {</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;        rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;        result = rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">engine</a>-&gt;<a class="code" href="structregengine.html#a75adee2e427afc4f611f2bacc41c55d1">regexec_multi</a>(</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                      rmp, win, buf, lnum, col, tm, timed_out);</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        rmp-&gt;<a class="code" href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regprog</a>-&gt;<a class="code" href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">re_in_use</a> = <a class="code" href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;        }</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;        <a class="code" href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a>(pat);</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    }</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <a class="code" href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a> = save_p_re;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;    }</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    <a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a> = rex_in_use_save;</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a>)</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    rex = rex_save;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    <span class="keywordflow">return</span> result &lt;= 0 ? 0 : result;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;}</div><div class="ttc" id="structlistvar___s_html_a77d712372893b232148468be84e339cf"><div class="ttname"><a href="structlistvar___s.html#a77d712372893b232148468be84e339cf">listvar_S::lv_len</a></div><div class="ttdeci">int lv_len</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01398">structs.h:1398</a></div></div>
<div class="ttc" id="regexp_8c_html_ae4026f0b0121d99d923d7b284d4d1fcc"><div class="ttname"><a href="regexp_8c.html#ae4026f0b0121d99d923d7b284d4d1fcc">MAGIC_ON</a></div><div class="ttdeci">#define MAGIC_ON</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00309">regexp.c:309</a></div></div>
<div class="ttc" id="regexp_8c_html_ae7b1fa1508ffb8177970993fb004b970"><div class="ttname"><a href="regexp_8c.html#ae7b1fa1508ffb8177970993fb004b970">RA_MATCH</a></div><div class="ttdeci">#define RA_MATCH</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00096">regexp.c:96</a></div></div>
<div class="ttc" id="regexp_8c_html_adb1dc0a9fa48d6535eee3bb561350f32"><div class="ttname"><a href="regexp_8c.html#adb1dc0a9fa48d6535eee3bb561350f32">fptr_T</a></div><div class="ttdeci">void(*(* fptr_T)(int *, int))()</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01660">regexp.c:1660</a></div></div>
<div class="ttc" id="message_8c_html_aeb2442b830699494f53059773212d850"><div class="ttname"><a href="message_8c.html#aeb2442b830699494f53059773212d850">semsg</a></div><div class="ttdeci">int semsg(const char *s,...)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l00724">message.c:724</a></div></div>
<div class="ttc" id="list_8c_html_a2881d03fa4a045d1018c5a700228472d"><div class="ttname"><a href="list_8c.html#a2881d03fa4a045d1018c5a700228472d">list_append_string</a></div><div class="ttdeci">int list_append_string(list_T *l, char_u *str, int len)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00531">list.c:531</a></div></div>
<div class="ttc" id="structpos___t_html"><div class="ttname"><a href="structpos___t.html">pos_T</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00026">structs.h:26</a></div></div>
<div class="ttc" id="globals_8h_html_a76244393355aa024ee3577263f838563"><div class="ttname"><a href="globals_8h.html#a76244393355aa024ee3577263f838563">mb_ptr2len</a></div><div class="ttdeci">EXTERN int(* mb_ptr2len)(char_u *p) INIT(</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00921">globals.h:921</a></div></div>
<div class="ttc" id="structregexec___t_html_a537733d78ee37f8f41a723c20c998a4d"><div class="ttname"><a href="structregexec___t.html#a537733d78ee37f8f41a723c20c998a4d">regexec_T::reg_match</a></div><div class="ttdeci">regmatch_T * reg_match</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01080">regexp.c:1080</a></div></div>
<div class="ttc" id="structregengine_html_a7fc7ae362521c9a85ab4b2a387359c90"><div class="ttname"><a href="structregengine.html#a7fc7ae362521c9a85ab4b2a387359c90">regengine::regfree</a></div><div class="ttdeci">void(* regfree)(regprog_T *)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00170">regexp.h:170</a></div></div>
<div class="ttc" id="structregprog_html_a7f6de11d9f89eae443c566c0654aa08c"><div class="ttname"><a href="structregprog.html#a7f6de11d9f89eae443c566c0654aa08c">regprog::re_engine</a></div><div class="ttdeci">unsigned re_engine</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00053">regexp.h:53</a></div></div>
<div class="ttc" id="structfuncexe___t_html_ab220fa83d7cabb2228ecf6178c158e19"><div class="ttname"><a href="structfuncexe___t.html#ab220fa83d7cabb2228ecf6178c158e19">funcexe_T::partial</a></div><div class="ttdeci">partial_T * partial</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01649">structs.h:1649</a></div></div>
<div class="ttc" id="vim_8h_html_a469cffaa64ff8028edfb64ba4cd7deae"><div class="ttname"><a href="vim_8h.html#a469cffaa64ff8028edfb64ba4cd7deae">STRNCPY</a></div><div class="ttdeci">#define STRNCPY(d, s, n)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01591">vim.h:1591</a></div></div>
<div class="ttc" id="structregexec___t_html_ad6fb083a6602981e8939ad6dc6987cc4"><div class="ttname"><a href="structregexec___t.html#ad6fb083a6602981e8939ad6dc6987cc4">regexec_T::nfa_has_zsubexpr</a></div><div class="ttdeci">int nfa_has_zsubexpr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01129">regexp.c:1129</a></div></div>
<div class="ttc" id="regexp_8c_html_a7577eec832babde787008ac19228eb49"><div class="ttname"><a href="regexp_8c.html#a7577eec832babde787008ac19228eb49">cstrncmp</a></div><div class="ttdeci">static int cstrncmp(char_u *s1, char_u *s2, int *n)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01555">regexp.c:1555</a></div></div>
<div class="ttc" id="structregexec___t_html_a8c7c1a34a0cde99ae7f585ef6c64302c"><div class="ttname"><a href="structregexec___t.html#a8c7c1a34a0cde99ae7f585ef6c64302c">regexec_T::reg_firstlnum</a></div><div class="ttdeci">linenr_T reg_firstlnum</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01088">regexp.c:1088</a></div></div>
<div class="ttc" id="regexp_8c_html_a003e85839832bfb75a0d019d573f58e4"><div class="ttname"><a href="regexp_8c.html#a003e85839832bfb75a0d019d573f58e4">re_has_z</a></div><div class="ttdeci">static int re_has_z</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00299">regexp.c:299</a></div></div>
<div class="ttc" id="regexp_8c_html_aef5f136cc10cf134e2184074436bbd0f"><div class="ttname"><a href="regexp_8c.html#aef5f136cc10cf134e2184074436bbd0f">prevprevchr</a></div><div class="ttdeci">static int prevprevchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00347">regexp.c:347</a></div></div>
<div class="ttc" id="vim_8h_html_aa46efe1167147ae09267781af65ea97f"><div class="ttname"><a href="vim_8h.html#aa46efe1167147ae09267781af65ea97f">RE_AUTO</a></div><div class="ttdeci">#define RE_AUTO</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01014">vim.h:1014</a></div></div>
<div class="ttc" id="regexp_8c_html_a8a374f6114572cd530aee558efb56a4e"><div class="ttname"><a href="regexp_8c.html#a8a374f6114572cd530aee558efb56a4e">reg_iswordc</a></div><div class="ttdeci">static int reg_iswordc(int)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01141">regexp.c:1141</a></div></div>
<div class="ttc" id="regexp_8c_html_a6fc47cb05ff9c686a3b30670203c033c"><div class="ttname"><a href="regexp_8c.html#a6fc47cb05ff9c686a3b30670203c033c">skip_regexp</a></div><div class="ttdeci">char_u * skip_regexp(char_u *startp, int dirc, int magic, char_u **newp)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00545">regexp.c:545</a></div></div>
<div class="ttc" id="structreg__extmatch___t_html"><div class="ttname"><a href="structreg__extmatch___t.html">reg_extmatch_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00161">regexp.h:161</a></div></div>
<div class="ttc" id="regexp_8c_html_a6c9db3b8f4f1466d80a8bf504f8a7369"><div class="ttname"><a href="regexp_8c.html#a6c9db3b8f4f1466d80a8bf504f8a7369">reg_cpo_lit</a></div><div class="ttdeci">static int reg_cpo_lit</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00480">regexp.c:480</a></div></div>
<div class="ttc" id="structpos___t_html_a08c5af56d347e155e2cd721d99616ab8"><div class="ttname"><a href="structpos___t.html#a08c5af56d347e155e2cd721d99616ab8">pos_T::col</a></div><div class="ttdeci">colnr_T col</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00029">structs.h:29</a></div></div>
<div class="ttc" id="regexp_8c_html_a9bcdf66808653231a3561d1365195621"><div class="ttname"><a href="regexp_8c.html#a9bcdf66808653231a3561d1365195621">prevchr</a></div><div class="ttdeci">static int prevchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00346">regexp.c:346</a></div></div>
<div class="ttc" id="regexp_8c_html_a2664ca435ed6f3f4bb2184ad3acc1f45"><div class="ttname"><a href="regexp_8c.html#a2664ca435ed6f3f4bb2184ad3acc1f45">init_class_tab</a></div><div class="ttdeci">static void init_class_tab(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00232">regexp.c:232</a></div></div>
<div class="ttc" id="structparse__state___t_html"><div class="ttname"><a href="structparse__state___t.html">parse_state_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00356">regexp.c:356</a></div></div>
<div class="ttc" id="macros_8h_html_a905818ace660bda0b271212f7515751f"><div class="ttname"><a href="macros_8h.html#a905818ace660bda0b271212f7515751f">MB_ISLOWER</a></div><div class="ttdeci">#define MB_ISLOWER(c)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00090">macros.h:90</a></div></div>
<div class="ttc" id="eval_8c_html_adebd7f32e4b09626d7fc827df38f6e24"><div class="ttname"><a href="eval_8c.html#adebd7f32e4b09626d7fc827df38f6e24">eval_to_string</a></div><div class="ttdeci">char_u * eval_to_string(char_u *arg, char_u **nextcmd, int convert)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00343">eval.c:343</a></div></div>
<div class="ttc" id="regexp_8c_html_a30b3f3ff243f1f189835c4230878c05e"><div class="ttname"><a href="regexp_8c.html#a30b3f3ff243f1f189835c4230878c05e">RI_HEAD</a></div><div class="ttdeci">#define RI_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00225">regexp.c:225</a></div></div>
<div class="ttc" id="message_8c_html_a5b62d7cb44a463c5db0ace9f0c58b096"><div class="ttname"><a href="message_8c.html#a5b62d7cb44a463c5db0ace9f0c58b096">verbose_enter</a></div><div class="ttdeci">void verbose_enter(void)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l03393">message.c:3393</a></div></div>
<div class="ttc" id="structparse__state___t_html_a584de1bd523ad7deb8c699fe98ee224a"><div class="ttname"><a href="structparse__state___t.html#a584de1bd523ad7deb8c699fe98ee224a">parse_state_T::prev_at_start</a></div><div class="ttdeci">int prev_at_start</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00365">regexp.c:365</a></div></div>
<div class="ttc" id="regexp_8c_html_a7d80897df315cfbecba40156ade51d57"><div class="ttname"><a href="regexp_8c.html#a7d80897df315cfbecba40156ade51d57">MAGIC_ALL</a></div><div class="ttdeci">#define MAGIC_ALL</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00310">regexp.c:310</a></div></div>
<div class="ttc" id="macros_8h_html_a56e5c3cffab565358686caf609091f04"><div class="ttname"><a href="macros_8h.html#a56e5c3cffab565358686caf609091f04">MB_TOUPPER</a></div><div class="ttdeci">#define MB_TOUPPER(c)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00093">macros.h:93</a></div></div>
<div class="ttc" id="option_8h_html_aae48618313c28d39e051675296411882"><div class="ttname"><a href="option_8h.html#aae48618313c28d39e051675296411882">CPO_LITERAL</a></div><div class="ttdeci">#define CPO_LITERAL</div><div class="ttdef"><b>Definition:</b> <a href="option_8h_source.html#l00169">option.h:169</a></div></div>
<div class="ttc" id="structtypval___t_html_a886659f986c150dab284f1d5ef64ee00"><div class="ttname"><a href="structtypval___t.html#a886659f986c150dab284f1d5ef64ee00">typval_T::v_list</a></div><div class="ttdeci">list_T * v_list</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01343">structs.h:1343</a></div></div>
<div class="ttc" id="structregmatch___t_html_a4126fc3ca4f2ff6fcde03a5b41fd6c0c"><div class="ttname"><a href="structregmatch___t.html#a4126fc3ca4f2ff6fcde03a5b41fd6c0c">regmatch_T::regprog</a></div><div class="ttdeci">regprog_T * regprog</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00133">regexp.h:133</a></div></div>
<div class="ttc" id="structregmatch___t_html"><div class="ttname"><a href="structregmatch___t.html">regmatch_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00131">regexp.h:131</a></div></div>
<div class="ttc" id="vim_8h_html"><div class="ttname"><a href="vim_8h.html">vim.h</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_aa67668ebdd29eb59a906d4ce199e5e61"><div class="ttname"><a href="regexp__bt_8c.html#aa67668ebdd29eb59a906d4ce199e5e61">backpos</a></div><div class="ttdeci">static garray_T backpos</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l00373">regexp_bt.c:373</a></div></div>
<div class="ttc" id="globals_8h_html_ad1c1ab702c27bb191dc79ab2ef8214a5"><div class="ttname"><a href="globals_8h.html#ad1c1ab702c27bb191dc79ab2ef8214a5">mb_char2bytes</a></div><div class="ttdeci">EXTERN int(* mb_char2bytes)(int c, char_u *buf) INIT(</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00927">globals.h:927</a></div></div>
<div class="ttc" id="regexp_8c_html_ae1c1f8b96f86c5e9f31829bf0e371c3b"><div class="ttname"><a href="regexp_8c.html#ae1c1f8b96f86c5e9f31829bf0e371c3b">nextchr</a></div><div class="ttdeci">static int nextchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00348">regexp.c:348</a></div></div>
<div class="ttc" id="misc2_8c_html_ab25a3a48241497fdc7bec2c3dbe41467"><div class="ttname"><a href="misc2_8c.html#ab25a3a48241497fdc7bec2c3dbe41467">vim_strncpy</a></div><div class="ttdeci">void vim_strncpy(char_u *to, char_u *from, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01721">misc2.c:1721</a></div></div>
<div class="ttc" id="regexp_8c_html_aae14f81a2b8e3200168fa49ed49ec02e"><div class="ttname"><a href="regexp_8c.html#aae14f81a2b8e3200168fa49ed49ec02e">RI_WHITE</a></div><div class="ttdeci">#define RI_WHITE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00229">regexp.c:229</a></div></div>
<div class="ttc" id="regexp_8c_html_a1aeb4e49c7371629f26e72134d494ab7"><div class="ttname"><a href="regexp_8c.html#a1aeb4e49c7371629f26e72134d494ab7">META_flags</a></div><div class="ttdeci">static char_u META_flags[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00324">regexp.c:324</a></div></div>
<div class="ttc" id="regexp_8h_html_a080c580be022ce7d8bbf23e3d1ec7bee"><div class="ttname"><a href="regexp_8h.html#a080c580be022ce7d8bbf23e3d1ec7bee">NFA_TOO_EXPENSIVE</a></div><div class="ttdeci">#define NFA_TOO_EXPENSIVE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00034">regexp.h:34</a></div></div>
<div class="ttc" id="structregsubmatch___t_html_a7a2dfee62db80c4fc56a906768d4841f"><div class="ttname"><a href="structregsubmatch___t.html#a7a2dfee62db80c4fc56a906768d4841f">regsubmatch_T::sm_line_lbr</a></div><div class="ttdeci">int sm_line_lbr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01778">regexp.c:1778</a></div></div>
<div class="ttc" id="structregexec___t_html_ab0289ebaf6ba4946aecca35f79d2bb15"><div class="ttname"><a href="structregexec___t.html#ab0289ebaf6ba4946aecca35f79d2bb15">regexec_T::need_clear_subexpr</a></div><div class="ttdeci">int need_clear_subexpr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01097">regexp.c:1097</a></div></div>
<div class="ttc" id="eval_8c_html_a8859a70551afcef025fbff6fd9d32963"><div class="ttname"><a href="eval_8c.html#a8859a70551afcef025fbff6fd9d32963">tv_get_string_buf_chk</a></div><div class="ttdeci">char_u * tv_get_string_buf_chk(typval_T *varp, char_u *buf)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l05575">eval.c:5575</a></div></div>
<div class="ttc" id="regexp_8c_html_a07a9df7fb28aec9b337c87064c831520"><div class="ttname"><a href="regexp_8c.html#a07a9df7fb28aec9b337c87064c831520">coll_get_char</a></div><div class="ttdeci">static int coll_get_char(void)</div></div>
<div class="ttc" id="regexp_8c_html_ad672fa1734bd44058dd7af298e27d644"><div class="ttname"><a href="regexp_8c.html#ad672fa1734bd44058dd7af298e27d644">gethexchrs</a></div><div class="ttdeci">static long gethexchrs(int maxinputlen)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00909">regexp.c:909</a></div></div>
<div class="ttc" id="structregexec___t_html_afe2695219e555b6ebd05771bceb1edef"><div class="ttname"><a href="structregexec___t.html#afe2695219e555b6ebd05771bceb1edef">regexec_T::nfa_alt_listid</a></div><div class="ttdeci">int nfa_alt_listid</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01126">regexp.c:1126</a></div></div>
<div class="ttc" id="message_8c_html_ae5991a4d11897dfaee9bfab8e5489d82"><div class="ttname"><a href="message_8c.html#ae5991a4d11897dfaee9bfab8e5489d82">emsg</a></div><div class="ttdeci">int emsg(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l00710">message.c:710</a></div></div>
<div class="ttc" id="regexp_8c_html_a4b3e3bfff3b3a2cc8c09d7c0c53ee92a"><div class="ttname"><a href="regexp_8c.html#a4b3e3bfff3b3a2cc8c09d7c0c53ee92a">cstrchr</a></div><div class="ttdeci">static char_u * cstrchr(char_u *, int)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01607">regexp.c:1607</a></div></div>
<div class="ttc" id="regexp_8c_html_a742a7b81fb4074f0ec3ba585b6d6c550"><div class="ttname"><a href="regexp_8c.html#a742a7b81fb4074f0ec3ba585b6d6c550">no_Magic</a></div><div class="ttdeci">static int no_Magic(int x)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00033">regexp.c:33</a></div></div>
<div class="ttc" id="regexp_8h_html_aac46a27dfcb1ea4aa6254cf4ec48c4c2"><div class="ttname"><a href="regexp_8h.html#aac46a27dfcb1ea4aa6254cf4ec48c4c2">NSUBEXP</a></div><div class="ttdeci">#define NSUBEXP</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00022">regexp.h:22</a></div></div>
<div class="ttc" id="list_8c_html_ad5552a454ce1d4a6b2be4c1ea67f46c7"><div class="ttname"><a href="list_8c.html#ad5552a454ce1d4a6b2be4c1ea67f46c7">list_free</a></div><div class="ttdeci">void list_free(list_T *l)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00233">list.c:233</a></div></div>
<div class="ttc" id="structregexec___t_html_a756224aa624bab4bae49c8bb6ee95054"><div class="ttname"><a href="structregexec___t.html#a756224aa624bab4bae49c8bb6ee95054">regexec_T::nfa_has_zend</a></div><div class="ttdeci">int nfa_has_zend</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01117">regexp.c:1117</a></div></div>
<div class="ttc" id="misc2_8c_html_acd554ee46804f666060916bf740b3c96"><div class="ttname"><a href="misc2_8c.html#acd554ee46804f666060916bf740b3c96">vim_strsave</a></div><div class="ttdeci">char_u * vim_strsave(char_u *string)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01270">misc2.c:1270</a></div></div>
<div class="ttc" id="structlistvar___s_html_ac58b71606ce99566ca5d48f92457efd7"><div class="ttname"><a href="structlistvar___s.html#ac58b71606ce99566ca5d48f92457efd7">listvar_S::lv_first</a></div><div class="ttdeci">listitem_T * lv_first</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01390">structs.h:1390</a></div></div>
<div class="ttc" id="structstatic_list10___t_html_ac3ce93228f7a2254b0ca536c5902c674"><div class="ttname"><a href="structstatic_list10___t.html#ac3ce93228f7a2254b0ca536c5902c674">staticList10_T::sl_items</a></div><div class="ttdeci">listitem_T sl_items[10]</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01409">structs.h:1409</a></div></div>
<div class="ttc" id="structregexec___t_html_a900291e625f18d6d7eb4c47c08f7205b"><div class="ttname"><a href="structregexec___t.html#a900291e625f18d6d7eb4c47c08f7205b">regexec_T::reg_win</a></div><div class="ttdeci">win_T * reg_win</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01086">regexp.c:1086</a></div></div>
<div class="ttc" id="structregprog_html_a28d4f034bc70a65e57f536c00448d598"><div class="ttname"><a href="structregprog.html#a28d4f034bc70a65e57f536c00448d598">regprog::regflags</a></div><div class="ttdeci">unsigned regflags</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00052">regexp.h:52</a></div></div>
<div class="ttc" id="regexp_8c_html_ab9e61b1216aafbd3d353948cb8f5c6e4"><div class="ttname"><a href="regexp_8c.html#ab9e61b1216aafbd3d353948cb8f5c6e4">re_multiline</a></div><div class="ttdeci">int re_multiline(regprog_T *prog)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00392">regexp.c:392</a></div></div>
<div class="ttc" id="regexp_8c_html_a05df9f80a04c4a8395b28f7f4961dddf"><div class="ttname"><a href="regexp_8c.html#a05df9f80a04c4a8395b28f7f4961dddf">e_unmatchedpar</a></div><div class="ttdeci">static char_u e_unmatchedpar[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00079">regexp.c:79</a></div></div>
<div class="ttc" id="regexp_8c_html_a5b439799fae05f45aca87aab1721a34a"><div class="ttname"><a href="regexp_8c.html#a5b439799fae05f45aca87aab1721a34a">backslash_trans</a></div><div class="ttdeci">static int backslash_trans(int c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00139">regexp.c:139</a></div></div>
<div class="ttc" id="structlistitem___s_html"><div class="ttname"><a href="structlistitem___s.html">listitem_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01368">structs.h:1368</a></div></div>
<div class="ttc" id="regexp_8c_html_af04b6afd5f1cdbe72ed21aab6e503cd8"><div class="ttname"><a href="regexp_8c.html#af04b6afd5f1cdbe72ed21aab6e503cd8">peekchr</a></div><div class="ttdeci">static int peekchr(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00658">regexp.c:658</a></div></div>
<div class="ttc" id="dosinst_8h_html_abb508ea8227673f419e9fe3a86c30d8e"><div class="ttname"><a href="dosinst_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a></div><div class="ttdeci">#define FAIL</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00061">dosinst.h:61</a></div></div>
<div class="ttc" id="structregexec___t_html_a72ec0064c0aef106b56102b13bcb4b4c"><div class="ttname"><a href="structregexec___t.html#a72ec0064c0aef106b56102b13bcb4b4c">regexec_T::reg_maxline</a></div><div class="ttdeci">linenr_T reg_maxline</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01089">regexp.c:1089</a></div></div>
<div class="ttc" id="structregsubmatch___t_html_a43132ae469d477fb63e330fe7bf51071"><div class="ttname"><a href="structregsubmatch___t.html#a43132ae469d477fb63e330fe7bf51071">regsubmatch_T::sm_mmatch</a></div><div class="ttdeci">regmmatch_T * sm_mmatch</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01775">regexp.c:1775</a></div></div>
<div class="ttc" id="dosinst_8h_html_aa93f0eb578d23995850d61f7d61c55c1"><div class="ttname"><a href="dosinst_8h.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></div><div class="ttdeci">#define FALSE</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00065">dosinst.h:65</a></div></div>
<div class="ttc" id="globals_8h_html_a8226ea083c93610f349ca43624d05129"><div class="ttname"><a href="globals_8h.html#a8226ea083c93610f349ca43624d05129">called_emsg</a></div><div class="ttdeci">EXTERN int called_emsg</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00229">globals.h:229</a></div></div>
<div class="ttc" id="regexp_8c_html_a89f6a07ca5bdcadb5ab7e442b520175d"><div class="ttname"><a href="regexp_8c.html#a89f6a07ca5bdcadb5ab7e442b520175d">e_unmatchedpp</a></div><div class="ttdeci">static char_u e_unmatchedpp[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00077">regexp.c:77</a></div></div>
<div class="ttc" id="vim_8h_html_a1d75ac7dfcfa7aabca75ae7b1333ac9e"><div class="ttname"><a href="vim_8h.html#a1d75ac7dfcfa7aabca75ae7b1333ac9e">STRMOVE</a></div><div class="ttdeci">#define STRMOVE(d, s)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01605">vim.h:1605</a></div></div>
<div class="ttc" id="regexp_8c_html_af1b2cf37f77fe2ac8deeaf542f2db413"><div class="ttname"><a href="regexp_8c.html#af1b2cf37f77fe2ac8deeaf542f2db413">vim_regsub_multi</a></div><div class="ttdeci">int vim_regsub_multi(regmmatch_T *rmp, linenr_T lnum, char_u *source, char_u *dest, int copy, int magic, int backslash)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01882">regexp.c:1882</a></div></div>
<div class="ttc" id="regexp_8c_html_af4de7ca16685ff3b7571015c989cc8b1"><div class="ttname"><a href="regexp_8c.html#af4de7ca16685ff3b7571015c989cc8b1">reg_startzpos</a></div><div class="ttdeci">static lpos_T reg_startzpos[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01165">regexp.c:1165</a></div></div>
<div class="ttc" id="regexp_8c_html_ae71ff48d4c89cd6cebc09d9bfdbac2c3"><div class="ttname"><a href="regexp_8c.html#ae71ff48d4c89cd6cebc09d9bfdbac2c3">Magic</a></div><div class="ttdeci">#define Magic(x)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00028">regexp.c:28</a></div></div>
<div class="ttc" id="list_8c_html_aa256fec511705ecf729a14faa62030ae"><div class="ttname"><a href="list_8c.html#aa256fec511705ecf729a14faa62030ae">list_alloc</a></div><div class="ttdeci">list_T * list_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l00073">list.c:73</a></div></div>
<div class="ttc" id="structregengine_html_acc9cef1420c555798e5b836e08348a9d"><div class="ttname"><a href="structregengine.html#acc9cef1420c555798e5b836e08348a9d">regengine::regcomp</a></div><div class="ttdeci">regprog_T *(* regcomp)(char_u *, int)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00169">regexp.h:169</a></div></div>
<div class="ttc" id="eval_8c_html_a0305cc6241b38e6e49c48da0de1b560c"><div class="ttname"><a href="eval_8c.html#a0305cc6241b38e6e49c48da0de1b560c">clear_tv</a></div><div class="ttdeci">void clear_tv(typval_T *varp)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l05353">eval.c:5353</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_a046a1cede1e5e33d1cbe1078787ea214"><div class="ttname"><a href="regexp__bt_8c.html#a046a1cede1e5e33d1cbe1078787ea214">bt_regfree</a></div><div class="ttdeci">static void bt_regfree(regprog_T *prog)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l02445">regexp_bt.c:2445</a></div></div>
<div class="ttc" id="structdecomp___t_html"><div class="ttname"><a href="structdecomp___t.html">decomp_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01471">regexp.c:1471</a></div></div>
<div class="ttc" id="structnfa__regprog___t_html"><div class="ttname"><a href="structnfa__regprog___t.html">nfa_regprog_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00100">regexp.h:100</a></div></div>
<div class="ttc" id="namespacedehqx_html_aa833403a763c179f4ce8087adc050961"><div class="ttname"><a href="namespacedehqx.html#aa833403a763c179f4ce8087adc050961">dehqx.d</a></div><div class="ttdeci">d</div><div class="ttdef"><b>Definition:</b> <a href="dehqx_8py_source.html#l00026">dehqx.py:26</a></div></div>
<div class="ttc" id="vim_8h_html_a934ce754d29a8aee92b71e970b7e2ae4"><div class="ttname"><a href="vim_8h.html#a934ce754d29a8aee92b71e970b7e2ae4">linenr_T</a></div><div class="ttdeci">long linenr_T</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01679">vim.h:1679</a></div></div>
<div class="ttc" id="macros_8h_html_a945ec044bf625d33eac106e0556ef5ed"><div class="ttname"><a href="macros_8h.html#a945ec044bf625d33eac106e0556ef5ed">LT_POS</a></div><div class="ttdeci">#define LT_POS(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00024">macros.h:24</a></div></div>
<div class="ttc" id="regexp_8c_html_a87f17acaa43317dad51853d50cdfa4c6"><div class="ttname"><a href="regexp_8c.html#a87f17acaa43317dad51853d50cdfa4c6">reg_endzp</a></div><div class="ttdeci">static char_u * reg_endzp[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01164">regexp.c:1164</a></div></div>
<div class="ttc" id="misc2_8c_html_ae98dff29b2b09696996ab4ead873a667"><div class="ttname"><a href="misc2_8c.html#ae98dff29b2b09696996ab4ead873a667">vim_memset</a></div><div class="ttdeci">void * vim_memset(void *ptr, int c, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01808">misc2.c:1808</a></div></div>
<div class="ttc" id="userfunc_8c_html_a606c32faf6f65df01d9310762659d51e"><div class="ttname"><a href="userfunc_8c.html#a606c32faf6f65df01d9310762659d51e">call_func</a></div><div class="ttdeci">int call_func(char_u *funcname, int len, typval_T *rettv, int argcount_in, typval_T *argvars_in, funcexe_T *funcexe)</div><div class="ttdef"><b>Definition:</b> <a href="userfunc_8c_source.html#l01489">userfunc.c:1489</a></div></div>
<div class="ttc" id="structpartial___s_html"><div class="ttname"><a href="structpartial___s.html">partial_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01654">structs.h:1654</a></div></div>
<div class="ttc" id="regexp_8c_html_a2e408adf711bd3d3f1fe33c48b79983b"><div class="ttname"><a href="regexp_8c.html#a2e408adf711bd3d3f1fe33c48b79983b">vim_regsub_both</a></div><div class="ttdeci">static int vim_regsub_both(char_u *source, typval_T *expr, char_u *dest, int copy, int magic, int backslash)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01916">regexp.c:1916</a></div></div>
<div class="ttc" id="regexp_8c_html_a229ec687979046a5dd50630a0da9f343"><div class="ttname"><a href="regexp_8c.html#a229ec687979046a5dd50630a0da9f343">e_empty_sb</a></div><div class="ttdeci">static char_u e_empty_sb[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00085">regexp.c:85</a></div></div>
<div class="ttc" id="structbt__regprog___t_html"><div class="ttname"><a href="structbt__regprog___t.html">bt_regprog_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00063">regexp.h:63</a></div></div>
<div class="ttc" id="regexp_8c_html_a20101a2a14e94b74196a0c913db33ab7"><div class="ttname"><a href="regexp_8c.html#a20101a2a14e94b74196a0c913db33ab7">get_char_class</a></div><div class="ttdeci">static int get_char_class(char_u **pp)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00157">regexp.c:157</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_a8c84017ae5b6830cd8a93599acbf3d05"><div class="ttname"><a href="regexp__bt_8c.html#a8c84017ae5b6830cd8a93599acbf3d05">regmatch</a></div><div class="ttdeci">static int regmatch(char_u *scan, proftime_T *tm UNUSED, int *timed_out UNUSED)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l03045">regexp_bt.c:3045</a></div></div>
<div class="ttc" id="vim_8h_html_af61a821be0d5cd6dbf89685d34bb4d39"><div class="ttname"><a href="vim_8h.html#af61a821be0d5cd6dbf89685d34bb4d39">long_u</a></div><div class="ttdeci">unsigned long __w64 long_u</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l00357">vim.h:357</a></div></div>
<div class="ttc" id="structparse__state___t_html_ad6727770bac8c82102251b1ca8efbc6b"><div class="ttname"><a href="structparse__state___t.html#ad6727770bac8c82102251b1ca8efbc6b">parse_state_T::regparse</a></div><div class="ttdeci">char_u * regparse</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00358">regexp.c:358</a></div></div>
<div class="ttc" id="option_8h_html_a4d3414c2fee9cab576dfcae3e05c8b2b"><div class="ttname"><a href="option_8h.html#a4d3414c2fee9cab576dfcae3e05c8b2b">p_sel</a></div><div class="ttdeci">EXTERN char_u * p_sel</div><div class="ttdef"><b>Definition:</b> <a href="option_8h_source.html#l00820">option.h:820</a></div></div>
<div class="ttc" id="regexp_8c_html_a1f4f5bff2d9bda517e295c8355937b9b"><div class="ttname"><a href="regexp_8c.html#a1f4f5bff2d9bda517e295c8355937b9b">do_upper</a></div><div class="ttdeci">static fptr_T do_upper(int *d, int c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01665">regexp.c:1665</a></div></div>
<div class="ttc" id="regexp_8c_html_a47a18fefa87191bfee029a23df83dbca"><div class="ttname"><a href="regexp_8c.html#a47a18fefa87191bfee029a23df83dbca">getdecchrs</a></div><div class="ttdeci">static long getdecchrs(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00935">regexp.c:935</a></div></div>
<div class="ttc" id="regexp_8c_html_a80efb6fd97eb3e63e7e3ccb7b63832a5"><div class="ttname"><a href="regexp_8c.html#a80efb6fd97eb3e63e7e3ccb7b63832a5">regtilde</a></div><div class="ttdeci">char_u * regtilde(char_u *source, int magic)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01709">regexp.c:1709</a></div></div>
<div class="ttc" id="regexp_8c_html_a841be044df265f2b67f1224c9d155cf0"><div class="ttname"><a href="regexp_8c.html#a841be044df265f2b67f1224c9d155cf0">REGEXP_INRANGE</a></div><div class="ttdeci">static char_u REGEXP_INRANGE[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00132">regexp.c:132</a></div></div>
<div class="ttc" id="structregexec___t_html_a674bed9a63a693477f540e93cd055fd0"><div class="ttname"><a href="structregexec___t.html#a674bed9a63a693477f540e93cd055fd0">regexec_T::reg_endp</a></div><div class="ttdeci">char_u ** reg_endp</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01083">regexp.c:1083</a></div></div>
<div class="ttc" id="structregexec___t_html_a522a96be5447936d3dc98a090d0bbd03"><div class="ttname"><a href="structregexec___t.html#a522a96be5447936d3dc98a090d0bbd03">regexec_T::reg_buf</a></div><div class="ttdeci">buf_T * reg_buf</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01087">regexp.c:1087</a></div></div>
<div class="ttc" id="regexp_8c_html_ada5158c5ec499a6e2ad6c5b4b0a5fce1"><div class="ttname"><a href="regexp_8c.html#ada5158c5ec499a6e2ad6c5b4b0a5fce1">is_Magic</a></div><div class="ttdeci">#define is_Magic(x)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00030">regexp.c:30</a></div></div>
<div class="ttc" id="regexp__nfa_8c_html_a0036769d223f51870eeffd92b8011c99"><div class="ttname"><a href="regexp__nfa_8c.html#a0036769d223f51870eeffd92b8011c99">nfa_regexec_multi</a></div><div class="ttdeci">static long nfa_regexec_multi(regmmatch_T *rmp, win_T *win, buf_T *buf, linenr_T lnum, colnr_T col, proftime_T *tm, int *timed_out)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__nfa_8c_source.html#l07404">regexp_nfa.c:7404</a></div></div>
<div class="ttc" id="regexp_8c_html_a5e7db5a0ca4f89fdf364acc3839435ff"><div class="ttname"><a href="regexp_8c.html#a5e7db5a0ca4f89fdf364acc3839435ff">e_recursive</a></div><div class="ttdeci">static char_u e_recursive[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00086">regexp.c:86</a></div></div>
<div class="ttc" id="regexp_8c_html_a4027015e50e5714af68f307cc00e6a83"><div class="ttname"><a href="regexp_8c.html#a4027015e50e5714af68f307cc00e6a83">restore_parse_state</a></div><div class="ttdeci">static void restore_parse_state(parse_state_T *ps)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00640">regexp.c:640</a></div></div>
<div class="ttc" id="regexp_8c_html_ae85d66ec0c262d0e6c22766cd75e0287"><div class="ttname"><a href="regexp_8c.html#ae85d66ec0c262d0e6c22766cd75e0287">vim_regfree</a></div><div class="ttdeci">void vim_regfree(regprog_T *prog)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02643">regexp.c:2643</a></div></div>
<div class="ttc" id="regexp_8c_html_a9289fd60d49c1a7f8f18818cdffdf29d"><div class="ttname"><a href="regexp_8c.html#a9289fd60d49c1a7f8f18818cdffdf29d">re_multi_type</a></div><div class="ttdeci">static int re_multi_type(int c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00105">regexp.c:105</a></div></div>
<div class="ttc" id="ascii_8h_html_af19d48b9f61047a668649a2f9dc317ff"><div class="ttname"><a href="ascii_8h.html#af19d48b9f61047a668649a2f9dc317ff">NUL</a></div><div class="ttdeci">#define NUL</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00024">ascii.h:24</a></div></div>
<div class="ttc" id="structregengine_html_a705cea9ce7786614e33c89823a5d4bca"><div class="ttname"><a href="structregengine.html#a705cea9ce7786614e33c89823a5d4bca">regengine::expr</a></div><div class="ttdeci">char_u * expr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00173">regexp.h:173</a></div></div>
<div class="ttc" id="ascii_8h_html_a512bac9e029a487d788a5a6acf58cfe2"><div class="ttname"><a href="ascii_8h.html#a512bac9e029a487d788a5a6acf58cfe2">Ctrl_V</a></div><div class="ttdeci">#define Ctrl_V</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00069">ascii.h:69</a></div></div>
<div class="ttc" id="regexp_8c_html_a47fb1bbbd69ad3fa2d82d0f326bc3baf"><div class="ttname"><a href="regexp_8c.html#a47fb1bbbd69ad3fa2d82d0f326bc3baf">vim_regexec_multi</a></div><div class="ttdeci">long vim_regexec_multi(regmmatch_T *rmp, win_T *win, buf_T *buf, linenr_T lnum, colnr_T col, proftime_T *tm, int *timed_out)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02814">regexp.c:2814</a></div></div>
<div class="ttc" id="globals_8h_html_a2ff646629886112d5039957029690e09"><div class="ttname"><a href="globals_8h.html#a2ff646629886112d5039957029690e09">mb_ptr2char</a></div><div class="ttdeci">EXTERN int(* mb_ptr2char)(char_u *p) INIT(</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00932">globals.h:932</a></div></div>
<div class="ttc" id="ascii_8h_html_a72b7daa7cd242faff603fc92493788ec"><div class="ttname"><a href="ascii_8h.html#a72b7daa7cd242faff603fc92493788ec">Ctrl_H</a></div><div class="ttdeci">#define Ctrl_H</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00055">ascii.h:55</a></div></div>
<div class="ttc" id="structdecomp___t_html_abe4253441cff78e3fd3abc3ef99dac2a"><div class="ttname"><a href="structdecomp___t.html#abe4253441cff78e3fd3abc3ef99dac2a">decomp_T::a</a></div><div class="ttdeci">int a</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01473">regexp.c:1473</a></div></div>
<div class="ttc" id="regexp_8c_html_a2075541ea737426246b24b3ea3c12f37"><div class="ttname"><a href="regexp_8c.html#a2075541ea737426246b24b3ea3c12f37">match_with_backref</a></div><div class="ttdeci">static int match_with_backref(linenr_T start_lnum, colnr_T start_col, linenr_T end_lnum, colnr_T end_col, int *bytelen)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01390">regexp.c:1390</a></div></div>
<div class="ttc" id="regexp__nfa_8c_html_abcb85faff6c34ea04cbe9ea47f3098ed"><div class="ttname"><a href="regexp__nfa_8c.html#abcb85faff6c34ea04cbe9ea47f3098ed">nfa_regexec_nl</a></div><div class="ttdeci">static int nfa_regexec_nl(regmatch_T *rmp, char_u *line, colnr_T col, int line_lbr)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__nfa_8c_source.html#l07359">regexp_nfa.c:7359</a></div></div>
<div class="ttc" id="regexp_8c_html_ae31aee91fc381a04c6ddc245d23f5b41"><div class="ttname"><a href="regexp_8c.html#ae31aee91fc381a04c6ddc245d23f5b41">reg_nextline</a></div><div class="ttdeci">static void reg_nextline(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01376">regexp.c:1376</a></div></div>
<div class="ttc" id="vim_8h_html_ae79e04a416bd6ce8ffe80e241850c0d2"><div class="ttname"><a href="vim_8h.html#ae79e04a416bd6ce8ffe80e241850c0d2">colnr_T</a></div><div class="ttdeci">int colnr_T</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01680">vim.h:1680</a></div></div>
<div class="ttc" id="vim_8h_html_aa48399cd06c9d5c90ec39e59fe61f1d2"><div class="ttname"><a href="vim_8h.html#aa48399cd06c9d5c90ec39e59fe61f1d2">ALLOC_CLEAR_ONE</a></div><div class="ttdeci">#define ALLOC_CLEAR_ONE(type)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01579">vim.h:1579</a></div></div>
<div class="ttc" id="structparse__state___t_html_a5e86ee5b6c84c567ec223e3415ea1c1b"><div class="ttname"><a href="structparse__state___t.html#a5e86ee5b6c84c567ec223e3415ea1c1b">parse_state_T::prevprevchr</a></div><div class="ttdeci">int prevprevchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00362">regexp.c:362</a></div></div>
<div class="ttc" id="misc2_8c_html_a8978cebac3b4ced66551e67c3a375842"><div class="ttname"><a href="misc2_8c.html#a8978cebac3b4ced66551e67c3a375842">vim_strchr</a></div><div class="ttdeci">char_u * vim_strchr(char_u *string, int c)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01875">misc2.c:1875</a></div></div>
<div class="ttc" id="regexp_8c_html_a2bc8fe4c00212e06be8ca34451764ffe"><div class="ttname"><a href="regexp_8c.html#a2bc8fe4c00212e06be8ca34451764ffe">regparse</a></div><div class="ttdeci">static char_u * regparse</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00295">regexp.c:295</a></div></div>
<div class="ttc" id="structlpos___t_html_ac55b9778bc7f5637ddc87da913a358a8"><div class="ttname"><a href="structlpos___t.html#ac55b9778bc7f5637ddc87da913a358a8">lpos_T::col</a></div><div class="ttdeci">colnr_T col</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00040">structs.h:40</a></div></div>
<div class="ttc" id="vim_8h_html_ad75d86d19ee3c309a6db13026d35e357"><div class="ttname"><a href="vim_8h.html#ad75d86d19ee3c309a6db13026d35e357">NUMBUFLEN</a></div><div class="ttdeci">#define NUMBUFLEN</div></div>
<div class="ttc" id="regexp_8c_html_a1bdf6e238dca7eec87cd0053378b510a"><div class="ttname"><a href="regexp_8c.html#a1bdf6e238dca7eec87cd0053378b510a">reg_startzp</a></div><div class="ttdeci">static char_u * reg_startzp[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01163">regexp.c:1163</a></div></div>
<div class="ttc" id="macros_8h_html_a8e76521a98776d2e3f9b33fcb331dcee"><div class="ttname"><a href="macros_8h.html#a8e76521a98776d2e3f9b33fcb331dcee">MB_PTR_ADV</a></div><div class="ttdeci">#define MB_PTR_ADV(p)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00235">macros.h:235</a></div></div>
<div class="ttc" id="regexp_8c_html_a74a08ee662dd2e910f06e815adfcc0df"><div class="ttname"><a href="regexp_8c.html#a74a08ee662dd2e910f06e815adfcc0df">e_z_not_allowed</a></div><div class="ttdeci">static char_u e_z_not_allowed[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00081">regexp.c:81</a></div></div>
<div class="ttc" id="regexp_8c_html_acfe56a0f73a4952db24dfeb4b15ffd8c"><div class="ttname"><a href="regexp_8c.html#acfe56a0f73a4952db24dfeb4b15ffd8c">REGMAGIC</a></div><div class="ttdeci">#define REGMAGIC</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00054">regexp.c:54</a></div></div>
<div class="ttc" id="ascii_8h_html_a1ff500177d91664413d59db9f49ecbaf"><div class="ttname"><a href="ascii_8h.html#a1ff500177d91664413d59db9f49ecbaf">CAR</a></div><div class="ttdeci">#define CAR</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00031">ascii.h:31</a></div></div>
<div class="ttc" id="regexp_8c_html_aece7fc07c42c4e1c83d4ad58b7a65868"><div class="ttname"><a href="regexp_8c.html#aece7fc07c42c4e1c83d4ad58b7a65868">get_equi_class</a></div><div class="ttdeci">static int get_equi_class(char_u **pp)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00403">regexp.c:403</a></div></div>
<div class="ttc" id="structparse__state___t_html_a1c12485c167c302ea2b5f5eecfa16d6c"><div class="ttname"><a href="structparse__state___t.html#a1c12485c167c302ea2b5f5eecfa16d6c">parse_state_T::prevchr</a></div><div class="ttdeci">int prevchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00361">regexp.c:361</a></div></div>
<div class="ttc" id="list_8c_html_a814f594703aac00d08b487addccb55a3"><div class="ttname"><a href="list_8c.html#a814f594703aac00d08b487addccb55a3">init_static_list</a></div><div class="ttdeci">void init_static_list(staticList10_T *sl)</div><div class="ttdef"><b>Definition:</b> <a href="list_8c_source.html#l01019">list.c:1019</a></div></div>
<div class="ttc" id="ascii_8h_html_a4af1b6159e447ba72652bb7fcdfa726e"><div class="ttname"><a href="ascii_8h.html#a4af1b6159e447ba72652bb7fcdfa726e">ESC</a></div><div class="ttdeci">#define ESC</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00032">ascii.h:32</a></div></div>
<div class="ttc" id="regexp_8c_html_a4c012eb4e1025956d735275b0c5b836a"><div class="ttname"><a href="regexp_8c.html#a4c012eb4e1025956d735275b0c5b836a">make_extmatch</a></div><div class="ttdeci">static reg_extmatch_T * make_extmatch(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01177">regexp.c:1177</a></div></div>
<div class="ttc" id="regexp_8c_html_ad817f6f1bf48484f0d523e75d1c13bfe"><div class="ttname"><a href="regexp_8c.html#ad817f6f1bf48484f0d523e75d1c13bfe">regexp_engine</a></div><div class="ttdeci">static int regexp_engine</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02531">regexp.c:2531</a></div></div>
<div class="ttc" id="structregexec___t_html_a53e1764891cdaa02f204852056b4de3e"><div class="ttname"><a href="structregexec___t.html#a53e1764891cdaa02f204852056b4de3e">regexec_T::reg_line_lbr</a></div><div class="ttdeci">int reg_line_lbr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01090">regexp.c:1090</a></div></div>
<div class="ttc" id="regexp_8c_html_a4b41bae50ff3129f9030c3371a785dce"><div class="ttname"><a href="regexp_8c.html#a4b41bae50ff3129f9030c3371a785dce">vim_regexec_nl</a></div><div class="ttdeci">int vim_regexec_nl(regmatch_T *rmp, char_u *line, colnr_T col)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02799">regexp.c:2799</a></div></div>
<div class="ttc" id="structs_8h_html_a2b5ff4af1dac681258949e5a522dca76a0d3c7284227bb22719180d8096217d6a"><div class="ttname"><a href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a0d3c7284227bb22719180d8096217d6a">VAR_LIST</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01320">structs.h:1320</a></div></div>
<div class="ttc" id="regexp_8c_html_a30d96694dfc7c35f66fecb91a1974ee0"><div class="ttname"><a href="regexp_8c.html#a30d96694dfc7c35f66fecb91a1974ee0">mb_decompose</a></div><div class="ttdeci">static void mb_decompose(int c, int *c1, int *c2, int *c3)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01531">regexp.c:1531</a></div></div>
<div class="ttc" id="regexp_8c_html_a70fd49df055b8f914060b1502805c113"><div class="ttname"><a href="regexp_8c.html#a70fd49df055b8f914060b1502805c113">cleanup_zsubexpr</a></div><div class="ttdeci">static void cleanup_zsubexpr(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01352">regexp.c:1352</a></div></div>
<div class="ttc" id="macros_8h_html_a864f2928398599e3ead685d4c964cc7d"><div class="ttname"><a href="macros_8h.html#a864f2928398599e3ead685d4c964cc7d">MB_TOLOWER</a></div><div class="ttdeci">#define MB_TOLOWER(c)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00092">macros.h:92</a></div></div>
<div class="ttc" id="structregexec___t_html_aea6f8a6572ec21e7c20a9997428a8a8b"><div class="ttname"><a href="structregexec___t.html#aea6f8a6572ec21e7c20a9997428a8a8b">regexec_T::reg_mmatch</a></div><div class="ttdeci">regmmatch_T * reg_mmatch</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01081">regexp.c:1081</a></div></div>
<div class="ttc" id="structregprog_html_a0c05fb082a6c5ef8e619eda1bffaecda"><div class="ttname"><a href="structregprog.html#a0c05fb082a6c5ef8e619eda1bffaecda">regprog::re_flags</a></div><div class="ttdeci">unsigned re_flags</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00054">regexp.h:54</a></div></div>
<div class="ttc" id="structregexec___t_html_af889cf51c0f23bf4f7c6cc841e716dc0"><div class="ttname"><a href="structregexec___t.html#af889cf51c0f23bf4f7c6cc841e716dc0">regexec_T::reg_icombine</a></div><div class="ttdeci">int reg_icombine</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01110">regexp.c:1110</a></div></div>
<div class="ttc" id="structregmatch___t_html_afbc416ec7a624c1328c2ff29d8522764"><div class="ttname"><a href="structregmatch___t.html#afbc416ec7a624c1328c2ff29d8522764">regmatch_T::rm_ic</a></div><div class="ttdeci">int rm_ic</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00136">regexp.h:136</a></div></div>
<div class="ttc" id="regexp_8c_html_a56cd45f8ad6a13f958427ad4bf7ed7a1"><div class="ttname"><a href="regexp_8c.html#a56cd45f8ad6a13f958427ad4bf7ed7a1">MULTI_MULT</a></div><div class="ttdeci">#define MULTI_MULT</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00090">regexp.c:90</a></div></div>
<div class="ttc" id="regexp_8c_html_af341fa89fd5e7c4d161524c5b29b0b1c"><div class="ttname"><a href="regexp_8c.html#af341fa89fd5e7c4d161524c5b29b0b1c">RI_ALPHA</a></div><div class="ttdeci">#define RI_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00226">regexp.c:226</a></div></div>
<div class="ttc" id="regexp_8c_html_a5334e3d8b2a0fa9f9c621ab8c567f847"><div class="ttname"><a href="regexp_8c.html#a5334e3d8b2a0fa9f9c621ab8c567f847">rex</a></div><div class="ttdeci">static regexec_T rex</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01133">regexp.c:1133</a></div></div>
<div class="ttc" id="regexp__nfa_8c_html_a4e40a6724314c80079725408ade1a5e0"><div class="ttname"><a href="regexp__nfa_8c.html#a4e40a6724314c80079725408ade1a5e0">nfa_regfree</a></div><div class="ttdeci">static void nfa_regfree(regprog_T *prog)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__nfa_8c_source.html#l07340">regexp_nfa.c:7340</a></div></div>
<div class="ttc" id="macros_8h_html_a2bfad910dd34f80c38ec2c345bc0215f"><div class="ttname"><a href="macros_8h.html#a2bfad910dd34f80c38ec2c345bc0215f">MB_ISUPPER</a></div><div class="ttdeci">#define MB_ISUPPER(c)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00091">macros.h:91</a></div></div>
<div class="ttc" id="regexp_8c_html_a05f05ac9b422c47f5a8780086bd2f065"><div class="ttname"><a href="regexp_8c.html#a05f05ac9b422c47f5a8780086bd2f065">initchr</a></div><div class="ttdeci">static void initchr(char_u *)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00609">regexp.c:609</a></div></div>
<div class="ttc" id="structregsubmatch___t_html_a5fa015f4fc614ed3f8d7fb29f5eba1c4"><div class="ttname"><a href="structregsubmatch___t.html#a5fa015f4fc614ed3f8d7fb29f5eba1c4">regsubmatch_T::sm_firstlnum</a></div><div class="ttdeci">linenr_T sm_firstlnum</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01776">regexp.c:1776</a></div></div>
<div class="ttc" id="message_8c_html_a0db479cde321ca12b8d84a53196454ad"><div class="ttname"><a href="message_8c.html#a0db479cde321ca12b8d84a53196454ad">msg_puts</a></div><div class="ttdeci">void msg_puts(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l01910">message.c:1910</a></div></div>
<div class="ttc" id="vim_8h_html_a983193bd908c7bc4bef972f6a15f8dab"><div class="ttname"><a href="vim_8h.html#a983193bd908c7bc4bef972f6a15f8dab">proftime_T</a></div><div class="ttdeci">int proftime_T</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01779">vim.h:1779</a></div></div>
<div class="ttc" id="charset_8c_html_a269e1797f0d8a95bd4cc2258588f8a63"><div class="ttname"><a href="charset_8c.html#a269e1797f0d8a95bd4cc2258588f8a63">vim_isxdigit</a></div><div class="ttdeci">int vim_isxdigit(int c)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l01572">charset.c:1572</a></div></div>
<div class="ttc" id="regexp_8c_html_a3b77f97627d25f5564e3b6ad8c529d8b"><div class="ttname"><a href="regexp_8c.html#a3b77f97627d25f5564e3b6ad8c529d8b">RA_NOMATCH</a></div><div class="ttdeci">#define RA_NOMATCH</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00097">regexp.c:97</a></div></div>
<div class="ttc" id="regexp_8c_html_a3787b1217e9cdea2f210cdb9bbf09dd7"><div class="ttname"><a href="regexp_8c.html#a3787b1217e9cdea2f210cdb9bbf09dd7">rex_in_use</a></div><div class="ttdeci">static int rex_in_use</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01134">regexp.c:1134</a></div></div>
<div class="ttc" id="regexp_8c_html_aa980656cedf8d5415584dfb7e7df6425"><div class="ttname"><a href="regexp_8c.html#aa980656cedf8d5415584dfb7e7df6425">vim_regexec_prog</a></div><div class="ttdeci">int vim_regexec_prog(regprog_T **prog, int ignore_case, char_u *line, colnr_T col)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02767">regexp.c:2767</a></div></div>
<div class="ttc" id="ascii_8h_html_ad58a1fbfc85c7e4790fc55e654f50221"><div class="ttname"><a href="ascii_8h.html#ad58a1fbfc85c7e4790fc55e654f50221">TAB</a></div><div class="ttdeci">#define TAB</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00027">ascii.h:27</a></div></div>
<div class="ttc" id="regexp_8h_html_a82a6225a14fd6812ccf62442bbc156fc"><div class="ttname"><a href="regexp_8h.html#a82a6225a14fd6812ccf62442bbc156fc">BACKTRACKING_ENGINE</a></div><div class="ttdeci">#define BACKTRACKING_ENGINE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00039">regexp.h:39</a></div></div>
<div class="ttc" id="regexp_8c_html_ab2b58a63aede7d2120fce912bfc7179f"><div class="ttname"><a href="regexp_8c.html#ab2b58a63aede7d2120fce912bfc7179f">reg_getline</a></div><div class="ttdeci">static char_u * reg_getline(linenr_T lnum)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01150">regexp.c:1150</a></div></div>
<div class="ttc" id="structfile__buffer_html"><div class="ttname"><a href="structfile__buffer.html">file_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02231">structs.h:2231</a></div></div>
<div class="ttc" id="regexp_8c_html_a6495374cf73dd261c3f13cabc43b7100"><div class="ttname"><a href="regexp_8c.html#a6495374cf73dd261c3f13cabc43b7100">save_parse_state</a></div><div class="ttdeci">static void save_parse_state(parse_state_T *ps)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00623">regexp.c:623</a></div></div>
<div class="ttc" id="ascii_8h_html_a4fc34b120ed3bd1120c1eb36abbcd6af"><div class="ttname"><a href="ascii_8h.html#a4fc34b120ed3bd1120c1eb36abbcd6af">NL</a></div><div class="ttdeci">#define NL</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00028">ascii.h:28</a></div></div>
<div class="ttc" id="regexp_8c_html_af082cfea994077d5a3da04843b1dd7e0"><div class="ttname"><a href="regexp_8c.html#af082cfea994077d5a3da04843b1dd7e0">EMSG2_RET_FAIL</a></div><div class="ttdeci">#define EMSG2_RET_FAIL(m, c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00068">regexp.c:68</a></div></div>
<div class="ttc" id="regexp_8c_html_a05cbcd9ba8cb8de2c3a20323915a193f"><div class="ttname"><a href="regexp_8c.html#a05cbcd9ba8cb8de2c3a20323915a193f">e_unmatchedp</a></div><div class="ttdeci">static char_u e_unmatchedp[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00078">regexp.c:78</a></div></div>
<div class="ttc" id="regexp_8c_html_adf74187265a2755cbb10c1972d9a0d2b"><div class="ttname"><a href="regexp_8c.html#adf74187265a2755cbb10c1972d9a0d2b">nfa_regengine</a></div><div class="ttdeci">static regengine_T nfa_regengine</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00386">regexp.c:386</a></div></div>
<div class="ttc" id="structregengine_html_a75adee2e427afc4f611f2bacc41c55d1"><div class="ttname"><a href="structregengine.html#a75adee2e427afc4f611f2bacc41c55d1">regengine::regexec_multi</a></div><div class="ttdeci">long(* regexec_multi)(regmmatch_T *, win_T *, buf_T *, linenr_T, colnr_T, proftime_T *, int *)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00172">regexp.h:172</a></div></div>
<div class="ttc" id="regexp_8c_html_a2e5f1ce30421c6ca1dbd3f366c06b646"><div class="ttname"><a href="regexp_8c.html#a2e5f1ce30421c6ca1dbd3f366c06b646">do_Upper</a></div><div class="ttdeci">static fptr_T do_Upper(int *d, int c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01673">regexp.c:1673</a></div></div>
<div class="ttc" id="hangulin_8c_html_a362077c979b0bb65159c603270e40f70"><div class="ttname"><a href="hangulin_8c.html#a362077c979b0bb65159c603270e40f70">f</a></div><div class="ttdeci">static int f</div><div class="ttdef"><b>Definition:</b> <a href="hangulin_8c_source.html#l00032">hangulin.c:32</a></div></div>
<div class="ttc" id="regexp_8c_html_a2e0ab48b2dae9064b2d9a43786e53f13"><div class="ttname"><a href="regexp_8c.html#a2e0ab48b2dae9064b2d9a43786e53f13">NOT_MULTI</a></div><div class="ttdeci">#define NOT_MULTI</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00088">regexp.c:88</a></div></div>
<div class="ttc" id="structregmmatch___t_html_ab0e4cd493b96365e07fdb0951543ead8"><div class="ttname"><a href="structregmmatch___t.html#ab0e4cd493b96365e07fdb0951543ead8">regmmatch_T::startpos</a></div><div class="ttdeci">lpos_T startpos[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00150">regexp.h:150</a></div></div>
<div class="ttc" id="regexp_8c_html_a27a7052023bf8c7fa31fe4194afc705b"><div class="ttname"><a href="regexp_8c.html#a27a7052023bf8c7fa31fe4194afc705b">can_f_submatch</a></div><div class="ttdeci">static int can_f_submatch</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01768">regexp.c:1768</a></div></div>
<div class="ttc" id="regexp_8c_html_a198f91073a4f1d29cf4a516a8b6412b3"><div class="ttname"><a href="regexp_8c.html#a198f91073a4f1d29cf4a516a8b6412b3">bt_regengine</a></div><div class="ttdeci">static regengine_T bt_regengine</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00385">regexp.c:385</a></div></div>
<div class="ttc" id="os__unix_8h_html_ae70108db942e4f3eeb701ad8787b1835"><div class="ttname"><a href="os__unix_8h.html#ae70108db942e4f3eeb701ad8787b1835">mch_memmove</a></div><div class="ttdeci">#define mch_memmove(to, from, len)</div><div class="ttdef"><b>Definition:</b> <a href="os__unix_8h_source.html#l00434">os_unix.h:434</a></div></div>
<div class="ttc" id="regexp_8c_html_abefc0928e7264f306f6149e3c5bdb074"><div class="ttname"><a href="regexp_8c.html#abefc0928e7264f306f6149e3c5bdb074">vim_regexec</a></div><div class="ttdeci">int vim_regexec(regmatch_T *rmp, char_u *line, colnr_T col)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02788">regexp.c:2788</a></div></div>
<div class="ttc" id="message_8c_html_a99fd0c8ee7ce774316d01ddab3bef039"><div class="ttname"><a href="message_8c.html#a99fd0c8ee7ce774316d01ddab3bef039">verbose_leave</a></div><div class="ttdeci">void verbose_leave(void)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l03404">message.c:3404</a></div></div>
<div class="ttc" id="message_8c_html_a9475d91e06c3a6d7d370ef54c0589f71"><div class="ttname"><a href="message_8c.html#a9475d91e06c3a6d7d370ef54c0589f71">smsg</a></div><div class="ttdeci">int smsg(const char *s,...)</div><div class="ttdef"><b>Definition:</b> <a href="message_8c_source.html#l00357">message.c:357</a></div></div>
<div class="ttc" id="charset_8c_html_a4b79b924d5ef76cedc50dc43ecdcef1b"><div class="ttname"><a href="charset_8c.html#a4b79b924d5ef76cedc50dc43ecdcef1b">win_linetabsize</a></div><div class="ttdeci">int win_linetabsize(win_T *wp, char_u *line, colnr_T len)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l00811">charset.c:811</a></div></div>
<div class="ttc" id="misc2_8c_html_ad0b64e14955781629a3908e328f82665"><div class="ttname"><a href="misc2_8c.html#ad0b64e14955781629a3908e328f82665">alloc</a></div><div class="ttdeci">void * alloc(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l00825">misc2.c:825</a></div></div>
<div class="ttc" id="regexp_8c_html_af20613961f0779bdd4c923cf3ed99aa8"><div class="ttname"><a href="regexp_8c.html#af20613961f0779bdd4c923cf3ed99aa8">e_missingbracket</a></div><div class="ttdeci">static char_u e_missingbracket[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00074">regexp.c:74</a></div></div>
<div class="ttc" id="structregexec___t_html_a4e17d4016c97c56eab778bd495d07608"><div class="ttname"><a href="structregexec___t.html#a4e17d4016c97c56eab778bd495d07608">regexec_T::reg_maxcol</a></div><div class="ttdeci">colnr_T reg_maxcol</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01114">regexp.c:1114</a></div></div>
<div class="ttc" id="regexp_8c_html_a17de9a9aceb1d9fa93139afe29230769"><div class="ttname"><a href="regexp_8c.html#a17de9a9aceb1d9fa93139afe29230769">MULTI_ONE</a></div><div class="ttdeci">#define MULTI_ONE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00089">regexp.c:89</a></div></div>
<div class="ttc" id="regexp_8c_html_a7674475ca89598eec9cdb67f132c6289"><div class="ttname"><a href="regexp_8c.html#a7674475ca89598eec9cdb67f132c6289">REGEXP_ABBR</a></div><div class="ttdeci">static char_u REGEXP_ABBR[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00133">regexp.c:133</a></div></div>
<div class="ttc" id="regexp_8c_html_a185ef4507bed93cc591e199003232473"><div class="ttname"><a href="regexp_8c.html#a185ef4507bed93cc591e199003232473">regnzpar</a></div><div class="ttdeci">static int regnzpar</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00298">regexp.c:298</a></div></div>
<div class="ttc" id="structregexec___t_html_ae93d58d50770b679ee6a46bc052c66b2"><div class="ttname"><a href="structregexec___t.html#ae93d58d50770b679ee6a46bc052c66b2">regexec_T::input</a></div><div class="ttdeci">char_u * input</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01095">regexp.c:1095</a></div></div>
<div class="ttc" id="macros_8h_html_a1c79e75cde848afa5b4c0be7c1c99ead"><div class="ttname"><a href="macros_8h.html#a1c79e75cde848afa5b4c0be7c1c99ead">VIM_ISDIGIT</a></div><div class="ttdeci">#define VIM_ISDIGIT(c)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00098">macros.h:98</a></div></div>
<div class="ttc" id="option_8h_html_a441e114eba9a56d517bbe74d233ec3f9"><div class="ttname"><a href="option_8h.html#a441e114eba9a56d517bbe74d233ec3f9">p_cpo</a></div><div class="ttdeci">EXTERN char_u * p_cpo</div><div class="ttdef"><b>Definition:</b> <a href="option_8h_source.html#l00482">option.h:482</a></div></div>
<div class="ttc" id="structregprog_html_a17b35a10bf140540d03cd127c8c68a9d"><div class="ttname"><a href="structregprog.html#a17b35a10bf140540d03cd127c8c68a9d">regprog::engine</a></div><div class="ttdeci">regengine_T * engine</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00051">regexp.h:51</a></div></div>
<div class="ttc" id="vim_8h_html_aba49c317732ed2f938129061ee53fe32"><div class="ttname"><a href="vim_8h.html#aba49c317732ed2f938129061ee53fe32">N_</a></div><div class="ttdeci">#define N_(x)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l00562">vim.h:562</a></div></div>
<div class="ttc" id="regexp_8c_html_a0461ae73e24933bb4fc20f3b9623ce33"><div class="ttname"><a href="regexp_8c.html#a0461ae73e24933bb4fc20f3b9623ce33">reg_getline_submatch</a></div><div class="ttdeci">static char_u * reg_getline_submatch(linenr_T lnum)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02319">regexp.c:2319</a></div></div>
<div class="ttc" id="regexp_8c_html_a74a1898fb3405190ab136129c4dda03a"><div class="ttname"><a href="regexp_8c.html#a74a1898fb3405190ab136129c4dda03a">reg_cpo_bsl</a></div><div class="ttdeci">static int reg_cpo_bsl</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00481">regexp.c:481</a></div></div>
<div class="ttc" id="regexp_8c_html_a4d9084b540c67fcc909adf621080c812"><div class="ttname"><a href="regexp_8c.html#a4d9084b540c67fcc909adf621080c812">reg_submatch</a></div><div class="ttdeci">char_u * reg_submatch(int no)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02341">regexp.c:2341</a></div></div>
<div class="ttc" id="structstatic_list10___t_html"><div class="ttname"><a href="structstatic_list10___t.html">staticList10_T</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01407">structs.h:1407</a></div></div>
<div class="ttc" id="regexp_8c_html_abbe9e38798800dbec0246fa49efe9caa"><div class="ttname"><a href="regexp_8c.html#abbe9e38798800dbec0246fa49efe9caa">vim_regexec_string</a></div><div class="ttdeci">static int vim_regexec_string(regmatch_T *rmp, char_u *line, colnr_T col, int nl)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02696">regexp.c:2696</a></div></div>
<div class="ttc" id="regexp_8c_html_a7e80ece29119108e08c7626cd573beaf"><div class="ttname"><a href="regexp_8c.html#a7e80ece29119108e08c7626cd573beaf">reg_submatch_list</a></div><div class="ttdeci">list_T * reg_submatch_list(int no)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02436">regexp.c:2436</a></div></div>
<div class="ttc" id="regexp_8c_html_a624c4be32c71b525f1d39791692ba09e"><div class="ttname"><a href="regexp_8c.html#a624c4be32c71b525f1d39791692ba09e">getchr</a></div><div class="ttdeci">static int getchr(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00874">regexp.c:874</a></div></div>
<div class="ttc" id="structparse__state___t_html_a41d00fd7b03eda69b7451b730700648e"><div class="ttname"><a href="structparse__state___t.html#a41d00fd7b03eda69b7451b730700648e">parse_state_T::regnpar</a></div><div class="ttdeci">int regnpar</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00366">regexp.c:366</a></div></div>
<div class="ttc" id="structpos___t_html_abff612ea21a47084625b593756153b3e"><div class="ttname"><a href="structpos___t.html#abff612ea21a47084625b593756153b3e">pos_T::lnum</a></div><div class="ttdeci">linenr_T lnum</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00028">structs.h:28</a></div></div>
<div class="ttc" id="structtypval___t_html_ad5403b6cf230c7f663901d46079b9ac3"><div class="ttname"><a href="structtypval___t.html#ad5403b6cf230c7f663901d46079b9ac3">typval_T::v_string</a></div><div class="ttdeci">char_u * v_string</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01342">structs.h:1342</a></div></div>
<div class="ttc" id="structlistitem___s_html_abb33a84716f24bdf8c15f1ab8ba7a9ca"><div class="ttname"><a href="structlistitem___s.html#abb33a84716f24bdf8c15f1ab8ba7a9ca">listitem_S::li_next</a></div><div class="ttdeci">listitem_T * li_next</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01370">structs.h:1370</a></div></div>
<div class="ttc" id="regexp_8c_html_a8b40a3ad984b90ba37d032c586394d3e"><div class="ttname"><a href="regexp_8c.html#a8b40a3ad984b90ba37d032c586394d3e">reg_tofree</a></div><div class="ttdeci">static char_u * reg_tofree</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01059">regexp.c:1059</a></div></div>
<div class="ttc" id="dosinst_8h_html_aba51915c87d64af47fb1cc59348961c9"><div class="ttname"><a href="dosinst_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a></div><div class="ttdeci">#define OK</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00062">dosinst.h:62</a></div></div>
<div class="ttc" id="regexp_8c_html_a9516e7f9f8711efcb0d381cb09e8f3c5"><div class="ttname"><a href="regexp_8c.html#a9516e7f9f8711efcb0d381cb09e8f3c5">UCHARAT</a></div><div class="ttdeci">#define UCHARAT(p)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00059">regexp.c:59</a></div></div>
<div class="ttc" id="structlistvar___s_html"><div class="ttname"><a href="structlistvar___s.html">listvar_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01388">structs.h:1388</a></div></div>
<div class="ttc" id="structparse__state___t_html_a30a351eaf2afe86a0688c2697164e603"><div class="ttname"><a href="structparse__state___t.html#a30a351eaf2afe86a0688c2697164e603">parse_state_T::at_start</a></div><div class="ttdeci">int at_start</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00364">regexp.c:364</a></div></div>
<div class="ttc" id="regexp_8c_html_a98347110ae77b09278f1dda77ffbd7c6"><div class="ttname"><a href="regexp_8c.html#a98347110ae77b09278f1dda77ffbd7c6">decomp_table</a></div><div class="ttdeci">static decomp_T decomp_table[0xfb4f-0xfb20+1]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01478">regexp.c:1478</a></div></div>
<div class="ttc" id="structregexec___t_html_a1065b04b07b945c0eb487c7a63bc7976"><div class="ttname"><a href="structregexec___t.html#a1065b04b07b945c0eb487c7a63bc7976">regexec_T::reg_startp</a></div><div class="ttdeci">char_u ** reg_startp</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01082">regexp.c:1082</a></div></div>
<div class="ttc" id="structregexec___t_html_a9a0eedc4298db93f48e7010bf8b3a1d2"><div class="ttname"><a href="structregexec___t.html#a9a0eedc4298db93f48e7010bf8b3a1d2">regexec_T::line</a></div><div class="ttdeci">char_u * line</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01094">regexp.c:1094</a></div></div>
<div class="ttc" id="structregexec___t_html_aa87c2a74de8a0b64bbba077af9194255"><div class="ttname"><a href="structregexec___t.html#aa87c2a74de8a0b64bbba077af9194255">regexec_T::need_clear_zsubexpr</a></div><div class="ttdeci">int need_clear_zsubexpr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01099">regexp.c:1099</a></div></div>
<div class="ttc" id="structregexec___t_html_af196521a1c4f1242e382ffd2d6462536"><div class="ttname"><a href="structregexec___t.html#af196521a1c4f1242e382ffd2d6462536">regexec_T::nfa_has_backref</a></div><div class="ttdeci">int nfa_has_backref</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01118">regexp.c:1118</a></div></div>
<div class="ttc" id="regexp_8c_html_a18d2339761cde0a3010d7be24de2e60a"><div class="ttname"><a href="regexp_8c.html#a18d2339761cde0a3010d7be24de2e60a">reg_strict</a></div><div class="ttdeci">static int reg_strict</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00314">regexp.c:314</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_a8ff598fc07164a2213fb35465cbdbbd9"><div class="ttname"><a href="regexp__bt_8c.html#a8ff598fc07164a2213fb35465cbdbbd9">bt_regcomp</a></div><div class="ttdeci">static regprog_T * bt_regcomp(char_u *expr, int re_flags)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l02287">regexp_bt.c:2287</a></div></div>
<div class="ttc" id="charset_8c_html_ad81a749470a4c63eab4e9dea315f2819"><div class="ttname"><a href="charset_8c.html#ad81a749470a4c63eab4e9dea315f2819">getdigits</a></div><div class="ttdeci">long getdigits(char_u **pp)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l01733">charset.c:1733</a></div></div>
<div class="ttc" id="regexp_8c_html_a44175bd38592a488085829ff2e4f4595"><div class="ttname"><a href="regexp_8c.html#a44175bd38592a488085829ff2e4f4595">report_re_switch</a></div><div class="ttdeci">static void report_re_switch(char_u *pat)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02662">regexp.c:2662</a></div></div>
<div class="ttc" id="structs_8h_html_a2b5ff4af1dac681258949e5a522dca76a2972867427c39b77c8e8a244be37c499"><div class="ttname"><a href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a2972867427c39b77c8e8a244be37c499">VAR_PARTIAL</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01319">structs.h:1319</a></div></div>
<div class="ttc" id="structparse__state___t_html_aa88b7450a01ee45fa82cad8447f9398f"><div class="ttname"><a href="structparse__state___t.html#aa88b7450a01ee45fa82cad8447f9398f">parse_state_T::curchr</a></div><div class="ttdeci">int curchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00360">regexp.c:360</a></div></div>
<div class="ttc" id="vim_8h_html_a5f1ef744c34be69aec1531f1fe604a9b"><div class="ttname"><a href="vim_8h.html#a5f1ef744c34be69aec1531f1fe604a9b">STRNCMP</a></div><div class="ttdeci">#define STRNCMP(d, s, n)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01593">vim.h:1593</a></div></div>
<div class="ttc" id="regexp_8c_html_a854ff71c2cea93ce05fd3e0a8a32fac4"><div class="ttname"><a href="regexp_8c.html#a854ff71c2cea93ce05fd3e0a8a32fac4">reg_endzpos</a></div><div class="ttdeci">static lpos_T reg_endzpos[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01166">regexp.c:1166</a></div></div>
<div class="ttc" id="globals_8h_html_a6f9149fd98feaea8859bd233c24b6d71"><div class="ttname"><a href="globals_8h.html#a6f9149fd98feaea8859bd233c24b6d71">mb_head_off</a></div><div class="ttdeci">EXTERN int(* mb_head_off)(char_u *base, char_u *p) INIT(</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00933">globals.h:933</a></div></div>
<div class="ttc" id="regexp_8c_html_adf128f5283b70a6ef6ba1955134d8b91"><div class="ttname"><a href="regexp_8c.html#adf128f5283b70a6ef6ba1955134d8b91">class_tab</a></div><div class="ttdeci">static short class_tab[256]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00219">regexp.c:219</a></div></div>
<div class="ttc" id="regexp_8c_html_af5d315f845c2bf22b0555fbe7b008814"><div class="ttname"><a href="regexp_8c.html#af5d315f845c2bf22b0555fbe7b008814">cleanup_subexpr</a></div><div class="ttdeci">static void cleanup_subexpr(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01331">regexp.c:1331</a></div></div>
<div class="ttc" id="structregexec___t_html_af92e2d59b9e77aaa4ff083b2baaf3af8"><div class="ttname"><a href="structregexec___t.html#af92e2d59b9e77aaa4ff083b2baaf3af8">regexec_T::reg_startpos</a></div><div class="ttdeci">lpos_T * reg_startpos</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01084">regexp.c:1084</a></div></div>
<div class="ttc" id="regexp_8c_html_ab0d690a0d4a93666d44346dfd058ada0"><div class="ttname"><a href="regexp_8c.html#ab0d690a0d4a93666d44346dfd058ada0">MAX_LIMIT</a></div><div class="ttdeci">#define MAX_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00072">regexp.c:72</a></div></div>
<div class="ttc" id="structstatic_list10___t_html_a0118b082826aa3d8245a7095535da3bb"><div class="ttname"><a href="structstatic_list10___t.html#a0118b082826aa3d8245a7095535da3bb">staticList10_T::sl_list</a></div><div class="ttdeci">list_T sl_list</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01408">structs.h:1408</a></div></div>
<div class="ttc" id="regexp_8c_html_aefa9683ce2ad17a90146fc0477f152ed"><div class="ttname"><a href="regexp_8c.html#aefa9683ce2ad17a90146fc0477f152ed">reg_magic</a></div><div class="ttdeci">static int reg_magic</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00306">regexp.c:306</a></div></div>
<div class="ttc" id="regexp_8c_html_a7f3dbbaa1cbb72d5fc7a52b30a4cbf2f"><div class="ttname"><a href="regexp_8c.html#a7f3dbbaa1cbb72d5fc7a52b30a4cbf2f">ungetchr</a></div><div class="ttdeci">static void ungetchr(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00886">regexp.c:886</a></div></div>
<div class="ttc" id="misc2_8c_html_a4b4777924352aae7456002f6d9438ffd"><div class="ttname"><a href="misc2_8c.html#a4b4777924352aae7456002f6d9438ffd">vim_free</a></div><div class="ttdeci">void vim_free(void *x)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01795">misc2.c:1795</a></div></div>
<div class="ttc" id="structlpos___t_html"><div class="ttname"><a href="structlpos___t.html">lpos_T</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00037">structs.h:37</a></div></div>
<div class="ttc" id="vim_8h_html_addf5ec070e9499d36b7f2009ce736076"><div class="ttname"><a href="vim_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a></div><div class="ttdeci">#define UNUSED</div></div>
<div class="ttc" id="keymap_8h_html_a78c25594faa25002bddbe962940dd576"><div class="ttname"><a href="keymap_8h.html#a78c25594faa25002bddbe962940dd576">K_SPECIAL</a></div><div class="ttdeci">#define K_SPECIAL</div><div class="ttdef"><b>Definition:</b> <a href="keymap_8h_source.html#l00029">keymap.h:29</a></div></div>
<div class="ttc" id="mbyte_8c_html_ae1a4569df11b81f0d22bec5d04822e46"><div class="ttname"><a href="mbyte_8c.html#ae1a4569df11b81f0d22bec5d04822e46">utf_fold</a></div><div class="ttdeci">int utf_fold(int a)</div><div class="ttdef"><b>Definition:</b> <a href="mbyte_8c_source.html#l03158">mbyte.c:3158</a></div></div>
<div class="ttc" id="regexp_8c_html_a725239b8e216f17ca35b612c60160de7"><div class="ttname"><a href="regexp_8c.html#a725239b8e216f17ca35b612c60160de7">fill_submatch_list</a></div><div class="ttdeci">static int fill_submatch_list(int argc UNUSED, typval_T *argv, int argcount)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01791">regexp.c:1791</a></div></div>
<div class="ttc" id="misc2_8c_html_a871ddb65e41d8bed1c38754d59737a5b"><div class="ttname"><a href="misc2_8c.html#a871ddb65e41d8bed1c38754d59737a5b">vim_strnsave</a></div><div class="ttdeci">char_u * vim_strnsave(char_u *string, int len)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01289">misc2.c:1289</a></div></div>
<div class="ttc" id="structreg__extmatch___t_html_abb0946f16ec7489b59022c64f7ecc22e"><div class="ttname"><a href="structreg__extmatch___t.html#abb0946f16ec7489b59022c64f7ecc22e">reg_extmatch_T::refcnt</a></div><div class="ttdeci">short refcnt</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00163">regexp.h:163</a></div></div>
<div class="ttc" id="regexp_8c_html_aef8f199befde26d636c66da1cbb0a93e"><div class="ttname"><a href="regexp_8c.html#aef8f199befde26d636c66da1cbb0a93e">curchr</a></div><div class="ttdeci">static int curchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00342">regexp.c:342</a></div></div>
<div class="ttc" id="structtypval___t_html_a6ae136251ffe2c006e55e7dc8b980bfb"><div class="ttname"><a href="structtypval___t.html#a6ae136251ffe2c006e55e7dc8b980bfb">typval_T::vval</a></div><div class="ttdeci">union typval_T::@41 vval</div></div>
<div class="ttc" id="regexp_8c_html_a5ac2e6b5dc43654bbe0911fd13d632b0"><div class="ttname"><a href="regexp_8c.html#a5ac2e6b5dc43654bbe0911fd13d632b0">RF_HASNL</a></div><div class="ttdeci">#define RF_HASNL</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00287">regexp.c:287</a></div></div>
<div class="ttc" id="vim_8h_html_a916ffefe1fc74532d08102cca55d8e34"><div class="ttname"><a href="vim_8h.html#a916ffefe1fc74532d08102cca55d8e34">STRLEN</a></div><div class="ttdeci">#define STRLEN(s)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01589">vim.h:1589</a></div></div>
<div class="ttc" id="misc2_8c_html_af70a2c4bbeb435621be6ebdba104e757"><div class="ttname"><a href="misc2_8c.html#af70a2c4bbeb435621be6ebdba104e757">vim_strsave_escaped</a></div><div class="ttdeci">char_u * vim_strsave_escaped(char_u *string, char_u *esc_chars)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l01321">misc2.c:1321</a></div></div>
<div class="ttc" id="regexp_8c_html_ad3dd54c8989ce3895833653fb7545561"><div class="ttname"><a href="regexp_8c.html#ad3dd54c8989ce3895833653fb7545561">reg_prev_class</a></div><div class="ttdeci">static int reg_prev_class(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01220">regexp.c:1220</a></div></div>
<div class="ttc" id="regexp_8c_html_aa3dc7d1facc61311070e1b7ea61b0370"><div class="ttname"><a href="regexp_8c.html#aa3dc7d1facc61311070e1b7ea61b0370">getoctchrs</a></div><div class="ttdeci">static long getoctchrs(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00966">regexp.c:966</a></div></div>
<div class="ttc" id="regexp_8h_html_a9185ee5172b29cf25454c239a060c9d4"><div class="ttname"><a href="regexp_8h.html#a9185ee5172b29cf25454c239a060c9d4">AUTOMATIC_ENGINE</a></div><div class="ttdeci">#define AUTOMATIC_ENGINE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00038">regexp.h:38</a></div></div>
<div class="ttc" id="regexp__nfa_8c_html"><div class="ttname"><a href="regexp__nfa_8c.html">regexp_nfa.c</a></div></div>
<div class="ttc" id="structregexec___t_html"><div class="ttname"><a href="structregexec___t.html">regexec_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01079">regexp.c:1079</a></div></div>
<div class="ttc" id="charset_8c_html_a39333219c8243783a64d89c25aecc2c0"><div class="ttname"><a href="charset_8c.html#a39333219c8243783a64d89c25aecc2c0">getvvcol</a></div><div class="ttdeci">void getvvcol(win_T *wp, pos_T *pos, colnr_T *start, colnr_T *cursor, colnr_T *end)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l01360">charset.c:1360</a></div></div>
<div class="ttc" id="structtypval___t_html"><div class="ttname"><a href="structtypval___t.html">typval_T</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01332">structs.h:1332</a></div></div>
<div class="ttc" id="regexp_8c_html_adeefddda59520e626c2ca6bf4f8f1ecd"><div class="ttname"><a href="regexp_8c.html#adeefddda59520e626c2ca6bf4f8f1ecd">RI_DIGIT</a></div><div class="ttdeci">#define RI_DIGIT</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00221">regexp.c:221</a></div></div>
<div class="ttc" id="structregexec___t_html_a9410461a7f6de60f13ee31ce3c573033"><div class="ttname"><a href="structregexec___t.html#a9410461a7f6de60f13ee31ce3c573033">regexec_T::reg_ic</a></div><div class="ttdeci">int reg_ic</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01106">regexp.c:1106</a></div></div>
<div class="ttc" id="regexp_8c_html_a3b065e4736e7ac58e089404e2bd25ca8"><div class="ttname"><a href="regexp_8c.html#a3b065e4736e7ac58e089404e2bd25ca8">RI_OCTAL</a></div><div class="ttdeci">#define RI_OCTAL</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00223">regexp.c:223</a></div></div>
<div class="ttc" id="structregmatch___t_html_a501f8e5ba3a1835b4f033359c7b6a203"><div class="ttname"><a href="structregmatch___t.html#a501f8e5ba3a1835b4f033359c7b6a203">regmatch_T::startp</a></div><div class="ttdeci">char_u * startp[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00134">regexp.h:134</a></div></div>
<div class="ttc" id="regexp_8c_html_acc98f25a4f94e6bc0113fad8a44d5308"><div class="ttname"><a href="regexp_8c.html#acc98f25a4f94e6bc0113fad8a44d5308">un_Magic</a></div><div class="ttdeci">#define un_Magic(x)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00029">regexp.c:29</a></div></div>
<div class="ttc" id="memline_8c_html_a5efa31d210327048f60b8b00586e2a8c"><div class="ttname"><a href="memline_8c.html#a5efa31d210327048f60b8b00586e2a8c">ml_get_buf</a></div><div class="ttdeci">char_u * ml_get_buf(buf_T *buf, linenr_T lnum, int will_change)</div><div class="ttdef"><b>Definition:</b> <a href="memline_8c_source.html#l02607">memline.c:2607</a></div></div>
<div class="ttc" id="structlpos___t_html_a7e68ccf9d05571c35b6edf554826eecc"><div class="ttname"><a href="structlpos___t.html#a7e68ccf9d05571c35b6edf554826eecc">lpos_T::lnum</a></div><div class="ttdeci">linenr_T lnum</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l00039">structs.h:39</a></div></div>
<div class="ttc" id="vim_8h_html_a1c402209d2bd8cf0ab105a9150203bf7"><div class="ttname"><a href="vim_8h.html#a1c402209d2bd8cf0ab105a9150203bf7">MB_STRNICMP</a></div><div class="ttdeci">#define MB_STRNICMP(d, s, n)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01624">vim.h:1624</a></div></div>
<div class="ttc" id="regexp_8c_html_a47f217c8bc0fd2544f365dc9c38b6803"><div class="ttname"><a href="regexp_8c.html#a47f217c8bc0fd2544f365dc9c38b6803">vim_regcomp</a></div><div class="ttdeci">regprog_T * vim_regcomp(char_u *expr_arg, int re_flags)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l02548">regexp.c:2548</a></div></div>
<div class="ttc" id="structregengine_html_ad21467fafa15630c7cb9e4c7846c36a7"><div class="ttname"><a href="structregengine.html#ad21467fafa15630c7cb9e4c7846c36a7">regengine::regexec_nl</a></div><div class="ttdeci">int(* regexec_nl)(regmatch_T *, char_u *, colnr_T, int)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00171">regexp.h:171</a></div></div>
<div class="ttc" id="option_8h_html_aa792aee58c92572fdfd1dc9ff20817c2"><div class="ttname"><a href="option_8h.html#aa792aee58c92572fdfd1dc9ff20817c2">CPO_BACKSL</a></div><div class="ttdeci">#define CPO_BACKSL</div><div class="ttdef"><b>Definition:</b> <a href="option_8h_source.html#l00206">option.h:206</a></div></div>
<div class="ttc" id="structwindow___s_html"><div class="ttname"><a href="structwindow___s.html">window_S</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02945">structs.h:2945</a></div></div>
<div class="ttc" id="regexp_8c_html_add6fd21c9929e9ac76661c9c79c57a44"><div class="ttname"><a href="regexp_8c.html#add6fd21c9929e9ac76661c9c79c57a44">e_missing_sb</a></div><div class="ttdeci">static char_u e_missing_sb[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00084">regexp.c:84</a></div></div>
<div class="ttc" id="regexp_8c_html_ab0831bcbf4ba5fb3d936b3b2d4b791c0"><div class="ttname"><a href="regexp_8c.html#ab0831bcbf4ba5fb3d936b3b2d4b791c0">at_start</a></div><div class="ttdeci">static int at_start</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00602">regexp.c:602</a></div></div>
<div class="ttc" id="regexp_8c_html_ae7a932cc861be3c07a5604e13457cd34"><div class="ttname"><a href="regexp_8c.html#ae7a932cc861be3c07a5604e13457cd34">do_Lower</a></div><div class="ttdeci">static fptr_T do_Lower(int *d, int c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01689">regexp.c:1689</a></div></div>
<div class="ttc" id="structs_8h_html_a2b5ff4af1dac681258949e5a522dca76a9db9f9506f3e8660f6bd25e9c48745f1"><div class="ttname"><a href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a9db9f9506f3e8660f6bd25e9c48745f1">VAR_STRING</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01317">structs.h:1317</a></div></div>
<div class="ttc" id="globals_8h_html_acf84ebbba1c7b96312e1e8af22a3bf9a"><div class="ttname"><a href="globals_8h.html#acf84ebbba1c7b96312e1e8af22a3bf9a">VIsual</a></div><div class="ttdeci">EXTERN pos_T VIsual</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00766">globals.h:766</a></div></div>
<div class="ttc" id="regexp_8c_html_aef2444bdaedc85e8ef06dca82be1b5ab"><div class="ttname"><a href="regexp_8c.html#aef2444bdaedc85e8ef06dca82be1b5ab">e_large_class</a></div><div class="ttdeci">static char_u e_large_class[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00076">regexp.c:76</a></div></div>
<div class="ttc" id="regexp_8h_html_a2098719352cfe8f6a888f5121a50cf23"><div class="ttname"><a href="regexp_8h.html#a2098719352cfe8f6a888f5121a50cf23">NFA_ENGINE</a></div><div class="ttdeci">#define NFA_ENGINE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00040">regexp.h:40</a></div></div>
<div class="ttc" id="regexp__bt_8c_html"><div class="ttname"><a href="regexp__bt_8c.html">regexp_bt.c</a></div></div>
<div class="ttc" id="structregexec___t_html_ab950ceb152649f6f548dd0aaeeee3b93"><div class="ttname"><a href="structregexec___t.html#ab950ceb152649f6f548dd0aaeeee3b93">regexec_T::nfa_nsubexpr</a></div><div class="ttdeci">int nfa_nsubexpr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01119">regexp.c:1119</a></div></div>
<div class="ttc" id="misc2_8c_html_afa822cc3cc70a9a0ee394863bcc0c941"><div class="ttname"><a href="misc2_8c.html#afa822cc3cc70a9a0ee394863bcc0c941">ga_clear</a></div><div class="ttdeci">void ga_clear(garray_T *gap)</div><div class="ttdef"><b>Definition:</b> <a href="misc2_8c_source.html#l02006">misc2.c:2006</a></div></div>
<div class="ttc" id="mbyte_8c_html_ae242a847bc7d90805007de2faec56759"><div class="ttname"><a href="mbyte_8c.html#ae242a847bc7d90805007de2faec56759">mb_get_class_buf</a></div><div class="ttdeci">int mb_get_class_buf(char_u *p, buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="mbyte_8c_source.html#l00877">mbyte.c:877</a></div></div>
<div class="ttc" id="regexp_8c_html_a3f9b229cfd40b1d4cb87d53b3c7c4bcc"><div class="ttname"><a href="regexp_8c.html#a3f9b229cfd40b1d4cb87d53b3c7c4bcc">reg_string</a></div><div class="ttdeci">static int reg_string</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00312">regexp.c:312</a></div></div>
<div class="ttc" id="regexp_8c_html_a422a17b780e9f598f934c853d6f9dcd1"><div class="ttname"><a href="regexp_8c.html#a422a17b780e9f598f934c853d6f9dcd1">e_z1_not_allowed</a></div><div class="ttdeci">static char_u e_z1_not_allowed[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00082">regexp.c:82</a></div></div>
<div class="ttc" id="regexp_8c_html_ad1bc3a37eac976df51116e8ec09427d7"><div class="ttname"><a href="regexp_8c.html#ad1bc3a37eac976df51116e8ec09427d7">reg_prev_sub</a></div><div class="ttdeci">static char_u * reg_prev_sub</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00114">regexp.c:114</a></div></div>
<div class="ttc" id="structparse__state___t_html_a0f0ead30a6f2059a84c8641af2e7a89f"><div class="ttname"><a href="structparse__state___t.html#a0f0ead30a6f2059a84c8641af2e7a89f">parse_state_T::prevchr_len</a></div><div class="ttdeci">int prevchr_len</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00359">regexp.c:359</a></div></div>
<div class="ttc" id="hangulin_8c_html_a89606eca6b563ec68d2da2e84657736f"><div class="ttname"><a href="hangulin_8c.html#a89606eca6b563ec68d2da2e84657736f">l</a></div><div class="ttdeci">static int l</div><div class="ttdef"><b>Definition:</b> <a href="hangulin_8c_source.html#l00032">hangulin.c:32</a></div></div>
<div class="ttc" id="structdecomp___t_html_aacd3aac354ee475cbc7bd664327950b3"><div class="ttname"><a href="structdecomp___t.html#aacd3aac354ee475cbc7bd664327950b3">decomp_T::b</a></div><div class="ttdeci">int b</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01473">regexp.c:1473</a></div></div>
<div class="ttc" id="regexp_8c_html_a6122ba1b1cf0b462e7fc87564b0315a5"><div class="ttname"><a href="regexp_8c.html#a6122ba1b1cf0b462e7fc87564b0315a5">do_lower</a></div><div class="ttdeci">static fptr_T do_lower(int *d, int c)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01681">regexp.c:1681</a></div></div>
<div class="ttc" id="regexp_8c_html_ad911eb33f36bd0b1b42d0424297f0e9b"><div class="ttname"><a href="regexp_8c.html#ad911eb33f36bd0b1b42d0424297f0e9b">reg_match_visual</a></div><div class="ttdeci">static int reg_match_visual(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01232">regexp.c:1232</a></div></div>
<div class="ttc" id="regexp_8c_html_ad5cb0a39c4067d2fb137c7f5f8a5f64c"><div class="ttname"><a href="regexp_8c.html#ad5cb0a39c4067d2fb137c7f5f8a5f64c">REG_MULTI</a></div><div class="ttdeci">#define REG_MULTI</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01170">regexp.c:1170</a></div></div>
<div class="ttc" id="regexp_8c_html_a6e2c0f04f5a7672232232e9b5a4b1c54"><div class="ttname"><a href="regexp_8c.html#a6e2c0f04f5a7672232232e9b5a4b1c54">read_limits</a></div><div class="ttdeci">static int read_limits(long *minval, long *maxval)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00994">regexp.c:994</a></div></div>
<div class="ttc" id="globals_8h_html_a203f91ef47660047aeb8bb865f6cba65"><div class="ttname"><a href="globals_8h.html#a203f91ef47660047aeb8bb865f6cba65">mb_char2len</a></div><div class="ttdeci">EXTERN int(* mb_char2len)(int c) INIT(</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00925">globals.h:925</a></div></div>
<div class="ttc" id="structfuncexe___t_html_af204bae71cf11135b7abffd0f98b5b69"><div class="ttname"><a href="structfuncexe___t.html#af204bae71cf11135b7abffd0f98b5b69">funcexe_T::evaluate</a></div><div class="ttdeci">int evaluate</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01648">structs.h:1648</a></div></div>
<div class="ttc" id="structlistitem___s_html_a65661823089984c3ee9b5e089d549140"><div class="ttname"><a href="structlistitem___s.html#a65661823089984c3ee9b5e089d549140">listitem_S::li_tv</a></div><div class="ttdeci">typval_T li_tv</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01372">structs.h:1372</a></div></div>
<div class="ttc" id="regexp_8c_html_aeea6d0463dd8c6cf65d70e2f1054d3e8"><div class="ttname"><a href="regexp_8c.html#aeea6d0463dd8c6cf65d70e2f1054d3e8">rsm</a></div><div class="ttdeci">static regsubmatch_T rsm</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01781">regexp.c:1781</a></div></div>
<div class="ttc" id="regexp_8c_html_aa6478def4dec44cbd90722b1c1bfa107"><div class="ttname"><a href="regexp_8c.html#aa6478def4dec44cbd90722b1c1bfa107">RI_LOWER</a></div><div class="ttdeci">#define RI_LOWER</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00227">regexp.c:227</a></div></div>
<div class="ttc" id="regexp_8c_html_af7e8c489405bf8f0c2684981ac9324da"><div class="ttname"><a href="regexp_8c.html#af7e8c489405bf8f0c2684981ac9324da">MAGIC_OFF</a></div><div class="ttdeci">#define MAGIC_OFF</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00308">regexp.c:308</a></div></div>
<div class="ttc" id="structregsubmatch___t_html"><div class="ttname"><a href="structregsubmatch___t.html">regsubmatch_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01773">regexp.c:1773</a></div></div>
<div class="ttc" id="regexp_8c_html_a14a2522cb2782f01fde6ec96eb70e25a"><div class="ttname"><a href="regexp_8c.html#a14a2522cb2782f01fde6ec96eb70e25a">unref_extmatch</a></div><div class="ttdeci">void unref_extmatch(reg_extmatch_T *em)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01203">regexp.c:1203</a></div></div>
<div class="ttc" id="structfuncexe___t_html"><div class="ttname"><a href="structfuncexe___t.html">funcexe_T</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01643">structs.h:1643</a></div></div>
<div class="ttc" id="mbyte_8c_html_a505073bff7332ecc1f0c8c21d190264c"><div class="ttname"><a href="mbyte_8c.html#a505073bff7332ecc1f0c8c21d190264c">mb_ptr2char_adv</a></div><div class="ttdeci">int mb_ptr2char_adv(char_u **pp)</div><div class="ttdef"><b>Definition:</b> <a href="mbyte_8c_source.html#l01893">mbyte.c:1893</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_aa5db53b6595fb708ae65fa51df7c65a1"><div class="ttname"><a href="regexp__bt_8c.html#aa5db53b6595fb708ae65fa51df7c65a1">regstack</a></div><div class="ttdeci">static garray_T regstack</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l00372">regexp_bt.c:372</a></div></div>
<div class="ttc" id="globals_8h_html_a1440aee39ae90077fff5aeb23c8a3764"><div class="ttname"><a href="globals_8h.html#a1440aee39ae90077fff5aeb23c8a3764">curwin</a></div><div class="ttdeci">EXTERN win_T * curwin</div><div class="ttdef"><b>Definition:</b> <a href="globals_8h_source.html#l00640">globals.h:640</a></div></div>
<div class="ttc" id="regexp_8c_html_ab27e8d8459fdfdc88557c40b8cb1ac8d"><div class="ttname"><a href="regexp_8c.html#ab27e8d8459fdfdc88557c40b8cb1ac8d">CLASS_NONE</a></div><div class="ttdeci">#define CLASS_NONE</div></div>
<div class="ttc" id="charset_8c_html_a35845ed87dc61ea86eb2e2f2f2f477f3"><div class="ttname"><a href="charset_8c.html#a35845ed87dc61ea86eb2e2f2f2f477f3">vim_isdigit</a></div><div class="ttdeci">int vim_isdigit(int c)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l01561">charset.c:1561</a></div></div>
<div class="ttc" id="structregexec___t_html_ae6b8a11c6367adbf3b1e984953fb2c34"><div class="ttname"><a href="structregexec___t.html#ae6b8a11c6367adbf3b1e984953fb2c34">regexec_T::nfa_listid</a></div><div class="ttdeci">int nfa_listid</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01125">regexp.c:1125</a></div></div>
<div class="ttc" id="regexp_8c_html_a3d79271a6d5ca0e0fc6da065a475c0cc"><div class="ttname"><a href="regexp_8c.html#a3d79271a6d5ca0e0fc6da065a475c0cc">vim_regsub</a></div><div class="ttdeci">int vim_regsub(regmatch_T *rmp, char_u *source, typval_T *expr, char_u *dest, int copy, int magic, int backslash)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01849">regexp.c:1849</a></div></div>
<div class="ttc" id="vim_8h_html_a360a2693c75012e20d6770b160de3c50"><div class="ttname"><a href="vim_8h.html#a360a2693c75012e20d6770b160de3c50">REX_ALL</a></div><div class="ttdeci">#define REX_ALL</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01020">vim.h:1020</a></div></div>
<div class="ttc" id="dosinst_8h_html_aa8cecfc5c5c054d2875c03e77b7be15d"><div class="ttname"><a href="dosinst_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></div><div class="ttdeci">#define TRUE</div><div class="ttdef"><b>Definition:</b> <a href="dosinst_8h_source.html#l00068">dosinst.h:68</a></div></div>
<div class="ttc" id="regexp_8c_html_afff9a44eced3c9b899398988cfe7e474"><div class="ttname"><a href="regexp_8c.html#afff9a44eced3c9b899398988cfe7e474">had_eol</a></div><div class="ttdeci">static int had_eol</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00303">regexp.c:303</a></div></div>
<div class="ttc" id="regexp_8c_html_a5d689700d06c3e06008805c1551467ce"><div class="ttname"><a href="regexp_8c.html#a5d689700d06c3e06008805c1551467ce">toggle_Magic</a></div><div class="ttdeci">static int toggle_Magic(int x)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00041">regexp.c:41</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_a8b5a513b458191429e5a8488ff629408"><div class="ttname"><a href="regexp__bt_8c.html#a8b5a513b458191429e5a8488ff629408">bt_regexec_nl</a></div><div class="ttdeci">static int bt_regexec_nl(regmatch_T *rmp, char_u *line, colnr_T col, int line_lbr)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l04818">regexp_bt.c:4818</a></div></div>
<div class="ttc" id="regexp_8c_html_a2fc7528035ce03855d00eff1ce955a64"><div class="ttname"><a href="regexp_8c.html#a2fc7528035ce03855d00eff1ce955a64">get_cpo_flags</a></div><div class="ttdeci">static void get_cpo_flags(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00484">regexp.c:484</a></div></div>
<div class="ttc" id="structdecomp___t_html_a1b0e71f8a5ba3d1eac9a79ff6d265751"><div class="ttname"><a href="structdecomp___t.html#a1b0e71f8a5ba3d1eac9a79ff6d265751">decomp_T::c</a></div><div class="ttdeci">int c</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01473">regexp.c:1473</a></div></div>
<div class="ttc" id="regexp_8c_html_ac73960fd6b38099c8d8df9a17bf90ac2"><div class="ttname"><a href="regexp_8c.html#ac73960fd6b38099c8d8df9a17bf90ac2">reg_tofreelen</a></div><div class="ttdeci">static unsigned reg_tofreelen</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01060">regexp.c:1060</a></div></div>
<div class="ttc" id="structregprog_html_a0c503bc07fbe7484bef184c3dd336bde"><div class="ttname"><a href="structregprog.html#a0c503bc07fbe7484bef184c3dd336bde">regprog::re_in_use</a></div><div class="ttdeci">int re_in_use</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00055">regexp.h:55</a></div></div>
<div class="ttc" id="regexp_8c_html_aa1db20edd21b74004b5c5ba0ec166ece"><div class="ttname"><a href="regexp_8c.html#aa1db20edd21b74004b5c5ba0ec166ece">skipchr_keepstart</a></div><div class="ttdeci">static void skipchr_keepstart(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00857">regexp.c:857</a></div></div>
<div class="ttc" id="vim_8h_html_aef214bee44b8ea3707359a56c8c921c6"><div class="ttname"><a href="vim_8h.html#aef214bee44b8ea3707359a56c8c921c6">MAXCOL</a></div><div class="ttdeci">#define MAXCOL</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01696">vim.h:1696</a></div></div>
<div class="ttc" id="regexp_8c_html_ab44f3e7ea7c913d746fa73743692898e"><div class="ttname"><a href="regexp_8c.html#ab44f3e7ea7c913d746fa73743692898e">skipchr</a></div><div class="ttdeci">static void skipchr(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00826">regexp.c:826</a></div></div>
<div class="ttc" id="regexp_8c_html_a67bd1819bc1579cf08194833c070b312"><div class="ttname"><a href="regexp_8c.html#a67bd1819bc1579cf08194833c070b312">prev_at_start</a></div><div class="ttdeci">static int prev_at_start</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00603">regexp.c:603</a></div></div>
<div class="ttc" id="regexp_8c_html_a2eae4f57e1ce78c93c4a0c4a69cc96d3"><div class="ttname"><a href="regexp_8c.html#a2eae4f57e1ce78c93c4a0c4a69cc96d3">prog_magic_wrong</a></div><div class="ttdeci">static int prog_magic_wrong(void)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01308">regexp.c:1308</a></div></div>
<div class="ttc" id="structregmmatch___t_html_abfe61429c29ab593fdb68551fcd7c90a"><div class="ttname"><a href="structregmmatch___t.html#abfe61429c29ab593fdb68551fcd7c90a">regmmatch_T::regprog</a></div><div class="ttdeci">regprog_T * regprog</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00149">regexp.h:149</a></div></div>
<div class="ttc" id="structregmmatch___t_html"><div class="ttname"><a href="structregmmatch___t.html">regmmatch_T</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00147">regexp.h:147</a></div></div>
<div class="ttc" id="structs_8h_html_a2b5ff4af1dac681258949e5a522dca76a5f8138ccb88702b5e64980f534312182"><div class="ttname"><a href="structs_8h.html#a2b5ff4af1dac681258949e5a522dca76a5f8138ccb88702b5e64980f534312182">VAR_FUNC</a></div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01318">structs.h:1318</a></div></div>
<div class="ttc" id="regexp_8c_html_affd74523395f3a98d1234b0bd8a97940"><div class="ttname"><a href="regexp_8c.html#affd74523395f3a98d1234b0bd8a97940">MAGIC_NONE</a></div><div class="ttdeci">#define MAGIC_NONE</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00307">regexp.c:307</a></div></div>
<div class="ttc" id="structtypval___t_html_a357def79f46d08d1e0631fe1df3ede02"><div class="ttname"><a href="structtypval___t.html#a357def79f46d08d1e0631fe1df3ede02">typval_T::v_partial</a></div><div class="ttdeci">partial_T * v_partial</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01345">structs.h:1345</a></div></div>
<div class="ttc" id="charset_8c_html_a58ed0722af2b6452235a9c269767aa0c"><div class="ttname"><a href="charset_8c.html#a58ed0722af2b6452235a9c269767aa0c">hex2nr</a></div><div class="ttdeci">int hex2nr(int c)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l01975">charset.c:1975</a></div></div>
<div class="ttc" id="regexp_8c_html_abfd5fcde7ad3d5da685528e7e6a20128"><div class="ttname"><a href="regexp_8c.html#abfd5fcde7ad3d5da685528e7e6a20128">clear_submatch_list</a></div><div class="ttdeci">static void clear_submatch_list(staticList10_T *sl)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01821">regexp.c:1821</a></div></div>
<div class="ttc" id="structregmatch___t_html_a08f025a2796a267c5a9ffae4e4f5553b"><div class="ttname"><a href="structregmatch___t.html#a08f025a2796a267c5a9ffae4e4f5553b">regmatch_T::endp</a></div><div class="ttdeci">char_u * endp[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00135">regexp.h:135</a></div></div>
<div class="ttc" id="regexp_8c_html_a6cf9e213f834085926aa8aca9939a99e"><div class="ttname"><a href="regexp_8c.html#a6cf9e213f834085926aa8aca9939a99e">get_coll_element</a></div><div class="ttdeci">static int get_coll_element(char_u **pp)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00457">regexp.c:457</a></div></div>
<div class="ttc" id="regexp_8c_html_afde509b0991af1a45c85dfc930cc71b3"><div class="ttname"><a href="regexp_8c.html#afde509b0991af1a45c85dfc930cc71b3">RI_UPPER</a></div><div class="ttdeci">#define RI_UPPER</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00228">regexp.c:228</a></div></div>
<div class="ttc" id="regexp_8c_html_a501c5953f3d8e248063f076d95c424f9"><div class="ttname"><a href="regexp_8c.html#a501c5953f3d8e248063f076d95c424f9">RA_FAIL</a></div><div class="ttdeci">#define RA_FAIL</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00093">regexp.c:93</a></div></div>
<div class="ttc" id="regexp_8c_html_ab644b69b55c309c51d3a1c320f1a4c8c"><div class="ttname"><a href="regexp_8c.html#ab644b69b55c309c51d3a1c320f1a4c8c">re_mult_next</a></div><div class="ttdeci">static int re_mult_next(char *what)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01460">regexp.c:1460</a></div></div>
<div class="ttc" id="vim_8h_html_aa9cea5fcb1483307770f365fb24aa08d"><div class="ttname"><a href="vim_8h.html#aa9cea5fcb1483307770f365fb24aa08d">STRCPY</a></div><div class="ttdeci">#define STRCPY(d, s)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l01590">vim.h:1590</a></div></div>
<div class="ttc" id="regexp_8c_html_a4600952c189c965d3d53173007940f18"><div class="ttname"><a href="regexp_8c.html#a4600952c189c965d3d53173007940f18">prevchr_len</a></div><div class="ttdeci">static int prevchr_len</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00601">regexp.c:601</a></div></div>
<div class="ttc" id="ascii_8h_html_a580a88f98668df1ac5e1683cae31c0b3"><div class="ttname"><a href="ascii_8h.html#a580a88f98668df1ac5e1683cae31c0b3">BS</a></div><div class="ttdeci">#define BS</div><div class="ttdef"><b>Definition:</b> <a href="ascii_8h_source.html#l00026">ascii.h:26</a></div></div>
<div class="ttc" id="regexp_8c_html_a751f9427045bd908e2da7211aabd2683"><div class="ttname"><a href="regexp_8c.html#a751f9427045bd908e2da7211aabd2683">regflags</a></div><div class="ttdeci">static unsigned regflags</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00301">regexp.c:301</a></div></div>
<div class="ttc" id="structregengine_html"><div class="ttname"><a href="structregengine.html">regengine</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00167">regexp.h:167</a></div></div>
<div class="ttc" id="option_8h_html_a1801c71939ba380968f3c65c6c164b8f"><div class="ttname"><a href="option_8h.html#a1801c71939ba380968f3c65c6c164b8f">p_re</a></div><div class="ttdeci">EXTERN long p_re</div><div class="ttdef"><b>Definition:</b> <a href="option_8h_source.html#l00789">option.h:789</a></div></div>
<div class="ttc" id="macros_8h_html_a74420d7769a3c31521652566a1cdb094"><div class="ttname"><a href="macros_8h.html#a74420d7769a3c31521652566a1cdb094">VIM_CLEAR</a></div><div class="ttdeci">#define VIM_CLEAR(p)</div><div class="ttdef"><b>Definition:</b> <a href="macros_8h_source.html#l00332">macros.h:332</a></div></div>
<div class="ttc" id="structregprog_html"><div class="ttname"><a href="structregprog.html">regprog</a></div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00049">regexp.h:49</a></div></div>
<div class="ttc" id="regexp__nfa_8c_html_a2ad7d4b5a572d640fbdbe170be0ef9b8"><div class="ttname"><a href="regexp__nfa_8c.html#a2ad7d4b5a572d640fbdbe170be0ef9b8">nfa_regcomp</a></div><div class="ttdeci">static regprog_T * nfa_regcomp(char_u *expr, int re_flags)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__nfa_8c_source.html#l07229">regexp_nfa.c:7229</a></div></div>
<div class="ttc" id="regexp_8c_html_a81919d8c9eea030b6b86d6115a231f44"><div class="ttname"><a href="regexp_8c.html#a81919d8c9eea030b6b86d6115a231f44">regnpar</a></div><div class="ttdeci">static int regnpar</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00296">regexp.c:296</a></div></div>
<div class="ttc" id="structtypval___t_html_a4a097c53f448d2cf81e15a6729228ae3"><div class="ttname"><a href="structtypval___t.html#a4a097c53f448d2cf81e15a6729228ae3">typval_T::v_type</a></div><div class="ttdeci">vartype_T v_type</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01334">structs.h:1334</a></div></div>
<div class="ttc" id="charset_8c_html_a9dcd8ec399bd749ed97bdd8530ad0701"><div class="ttname"><a href="charset_8c.html#a9dcd8ec399bd749ed97bdd8530ad0701">vim_iswordc_buf</a></div><div class="ttdeci">int vim_iswordc_buf(int c, buf_T *buf)</div><div class="ttdef"><b>Definition:</b> <a href="charset_8c_source.html#l00844">charset.c:844</a></div></div>
<div class="ttc" id="mbyte_8c_html_adad1b095d3961720e5b374c3cac048df"><div class="ttname"><a href="mbyte_8c.html#adad1b095d3961720e5b374c3cac048df">utf_ptr2len</a></div><div class="ttdeci">int utf_ptr2len(char_u *p)</div><div class="ttdef"><b>Definition:</b> <a href="mbyte_8c_source.html#l02052">mbyte.c:2052</a></div></div>
<div class="ttc" id="mbyte_8c_html_aaad0e5164799bb3256d7c6827aa9e670"><div class="ttname"><a href="mbyte_8c.html#aaad0e5164799bb3256d7c6827aa9e670">utf_ptr2char</a></div><div class="ttdeci">int utf_ptr2char(char_u *p)</div><div class="ttdef"><b>Definition:</b> <a href="mbyte_8c_source.html#l01790">mbyte.c:1790</a></div></div>
<div class="ttc" id="structparse__state___t_html_ae7541db3451267004f7c4d0f7d3624f0"><div class="ttname"><a href="structparse__state___t.html#ae7541db3451267004f7c4d0f7d3624f0">parse_state_T::nextchr</a></div><div class="ttdeci">int nextchr</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00363">regexp.c:363</a></div></div>
<div class="ttc" id="structregsubmatch___t_html_a3b4a953422978d6dbf890762286b2e1e"><div class="ttname"><a href="structregsubmatch___t.html#a3b4a953422978d6dbf890762286b2e1e">regsubmatch_T::sm_match</a></div><div class="ttdeci">regmatch_T * sm_match</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01774">regexp.c:1774</a></div></div>
<div class="ttc" id="structregmmatch___t_html_a4ed865acdfb2bc1973fef6a66a49a049"><div class="ttname"><a href="structregmmatch___t.html#a4ed865acdfb2bc1973fef6a66a49a049">regmmatch_T::endpos</a></div><div class="ttdeci">lpos_T endpos[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00151">regexp.h:151</a></div></div>
<div class="ttc" id="structregexec___t_html_a772bb320ad34d787d7009f867578a846"><div class="ttname"><a href="structregexec___t.html#a772bb320ad34d787d7009f867578a846">regexec_T::reg_endpos</a></div><div class="ttdeci">lpos_T * reg_endpos</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01085">regexp.c:1085</a></div></div>
<div class="ttc" id="regexp__bt_8c_html_abfba3b69a50fbb9e5a2c68429f78400c"><div class="ttname"><a href="regexp__bt_8c.html#abfba3b69a50fbb9e5a2c68429f78400c">bt_regexec_multi</a></div><div class="ttdeci">static long bt_regexec_multi(regmmatch_T *rmp, win_T *win, buf_T *buf, linenr_T lnum, colnr_T col, proftime_T *tm, int *timed_out)</div><div class="ttdef"><b>Definition:</b> <a href="regexp__bt_8c_source.html#l04846">regexp_bt.c:4846</a></div></div>
<div class="ttc" id="structreg__extmatch___t_html_a37bc6d5e3d3cbf48d30d178d54afb5f7"><div class="ttname"><a href="structreg__extmatch___t.html#a37bc6d5e3d3cbf48d30d178d54afb5f7">reg_extmatch_T::matches</a></div><div class="ttdeci">char_u * matches[NSUBEXP]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8h_source.html#l00164">regexp.h:164</a></div></div>
<div class="ttc" id="vim_8h_html_af20b8d139279b360b0fdeae71f8f43bc"><div class="ttname"><a href="vim_8h.html#af20b8d139279b360b0fdeae71f8f43bc">_</a></div><div class="ttdeci">#define _(x)</div><div class="ttdef"><b>Definition:</b> <a href="vim_8h_source.html#l00560">vim.h:560</a></div></div>
<div class="ttc" id="structregsubmatch___t_html_a009430b5c7cae4f93f72caacf0882919"><div class="ttname"><a href="structregsubmatch___t.html#a009430b5c7cae4f93f72caacf0882919">regsubmatch_T::sm_maxline</a></div><div class="ttdeci">linenr_T sm_maxline</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01777">regexp.c:1777</a></div></div>
<div class="ttc" id="regexp_8c_html_a482cfb3cd6688b47e85dee5d807e796d"><div class="ttname"><a href="regexp_8c.html#a482cfb3cd6688b47e85dee5d807e796d">e_reverse_range</a></div><div class="ttdeci">static char_u e_reverse_range[]</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00075">regexp.c:75</a></div></div>
<div class="ttc" id="regexp_8c_html_ab783824ead78e71dcc8db7a031c300dc"><div class="ttname"><a href="regexp_8c.html#ab783824ead78e71dcc8db7a031c300dc">ref_extmatch</a></div><div class="ttdeci">reg_extmatch_T * ref_extmatch(reg_extmatch_T *em)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01191">regexp.c:1191</a></div></div>
<div class="ttc" id="regexp_8c_html_a0a7d271c5228c38d2d604e318940b5f3"><div class="ttname"><a href="regexp_8c.html#a0a7d271c5228c38d2d604e318940b5f3">skip_anyof</a></div><div class="ttdeci">static char_u * skip_anyof(char_u *p)</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00496">regexp.c:496</a></div></div>
<div class="ttc" id="eval_8c_html_a7157304180ff3b14de007739a3709763"><div class="ttname"><a href="eval_8c.html#a7157304180ff3b14de007739a3709763">partial_name</a></div><div class="ttdeci">char_u * partial_name(partial_T *pt)</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l03620">eval.c:3620</a></div></div>
<div class="ttc" id="regexp_8c_html_aa63acc1189593a155295e9a31d832fbf"><div class="ttname"><a href="regexp_8c.html#aa63acc1189593a155295e9a31d832fbf">RI_HEX</a></div><div class="ttdeci">#define RI_HEX</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00222">regexp.c:222</a></div></div>
<div class="ttc" id="structfuncexe___t_html_af305ed242ec67c4e260a84ccdb207909"><div class="ttname"><a href="structfuncexe___t.html#af305ed242ec67c4e260a84ccdb207909">funcexe_T::argv_func</a></div><div class="ttdeci">int(* argv_func)(int, typval_T *, int)</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l01644">structs.h:1644</a></div></div>
<div class="ttc" id="option_8h_html_abb5561ad122dac5df6b719a1243b3445"><div class="ttname"><a href="option_8h.html#abb5561ad122dac5df6b719a1243b3445">p_verbose</a></div><div class="ttdeci">EXTERN long p_verbose</div><div class="ttdef"><b>Definition:</b> <a href="option_8h_source.html#l01022">option.h:1022</a></div></div>
<div class="ttc" id="structwindow___s_html_a397eb20adbcf2f8a50e1038886c1930c"><div class="ttname"><a href="structwindow___s.html#a397eb20adbcf2f8a50e1038886c1930c">window_S::w_cursor</a></div><div class="ttdeci">pos_T w_cursor</div><div class="ttdef"><b>Definition:</b> <a href="structs_8h_source.html#l02963">structs.h:2963</a></div></div>
<div class="ttc" id="regexp_8c_html_aa143243bda3abc5e824070ef85e66103"><div class="ttname"><a href="regexp_8c.html#aa143243bda3abc5e824070ef85e66103">RI_WORD</a></div><div class="ttdeci">#define RI_WORD</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l00224">regexp.c:224</a></div></div>
<div class="ttc" id="structregexec___t_html_a07dd1059fc66a251d5e8757e2ebf93c1"><div class="ttname"><a href="structregexec___t.html#a07dd1059fc66a251d5e8757e2ebf93c1">regexec_T::lnum</a></div><div class="ttdeci">linenr_T lnum</div><div class="ttdef"><b>Definition:</b> <a href="regexp_8c_source.html#l01093">regexp.c:1093</a></div></div>
<div class="ttc" id="misc1_8c_html_ab76e97b0e4c8694e5ecae285d0231b22"><div class="ttname"><a href="misc1_8c.html#ab76e97b0e4c8694e5ecae285d0231b22">fast_breakcheck</a></div><div class="ttdeci">void fast_breakcheck(void)</div><div class="ttdef"><b>Definition:</b> <a href="misc1_8c_source.html#l02740">misc1.c:2740</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
